<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Ordinal Endpoint QOIs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../">
<link href="../../../../../media/FACTS_icon.png" rel="icon" type="image/png">
<script src="../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #125740;
      }
</style>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">

<!-- Roboto Serif -->
<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:wght@400;700&amp;display=swap" rel="stylesheet">

<!-- Roboto Sans -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet">
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WLMVE7GR4S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WLMVE7GR4S');
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../../media/FACTSLogo.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../introduction/index.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../documentation/index.html"> 
<span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../concepts/index.html"> 
<span class="menu-text">Concepts</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../get/index.html"> 
<span class="menu-text">Get FACTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../contact/index.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <h1 class="title">Ordinal Endpoint QOIs</h1>
            <p class="subtitle lead">QOIs specific to ordinal endpoints.</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta column-page-left">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#posterior-probability-qois" id="toc-posterior-probability-qois" class="nav-link active" data-scroll-target="#posterior-probability-qois">Posterior probability QOIs</a>
  <ul>
  <li><a href="#cumulative-logistic-modeling" id="toc-cumulative-logistic-modeling" class="nav-link" data-scroll-target="#cumulative-logistic-modeling">Cumulative logistic modeling</a></li>
  <li><a href="#dirichlet-modeling" id="toc-dirichlet-modeling" class="nav-link" data-scroll-target="#dirichlet-modeling">Dirichlet modeling</a></li>
  </ul></li>
  <li><a href="#p-values" id="toc-p-values" class="nav-link" data-scroll-target="#p-values"><span class="math inline">\(p\)</span>-values</a>
  <ul>
  <li><a href="#utility-t-test" id="toc-utility-t-test" class="nav-link" data-scroll-target="#utility-t-test">Utility <span class="math inline">\(t\)</span>-test</a></li>
  <li><a href="#wilcoxon-mann-whitney-test" id="toc-wilcoxon-mann-whitney-test" class="nav-link" data-scroll-target="#wilcoxon-mann-whitney-test">Wilcoxon-Mann-Whitney test</a></li>
  <li><a href="#proportional-odds-likelihood-ratio-test" id="toc-proportional-odds-likelihood-ratio-test" class="nav-link" data-scroll-target="#proportional-odds-likelihood-ratio-test">Proportional odds likelihood ratio test</a></li>
  <li><a href="#dichotomized-ordinal-test" id="toc-dichotomized-ordinal-test" class="nav-link" data-scroll-target="#dichotomized-ordinal-test">Dichotomized ordinal test</a></li>
  </ul></li>
  <li><a href="#bayesian-predictive-probabilities" id="toc-bayesian-predictive-probabilities" class="nav-link" data-scroll-target="#bayesian-predictive-probabilities">Bayesian Predictive Probabilities</a>
  <ul>
  <li><a href="#current-trial-bayesian-predictive-probabilities" id="toc-current-trial-bayesian-predictive-probabilities" class="nav-link" data-scroll-target="#current-trial-bayesian-predictive-probabilities">Current Trial Bayesian Predictive Probabilities</a></li>
  <li><a href="#future-trial-bayesian-predictive-probabilities" id="toc-future-trial-bayesian-predictive-probabilities" class="nav-link" data-scroll-target="#future-trial-bayesian-predictive-probabilities">Future Trial Bayesian Predictive Probabilities</a></li>
  <li><a href="#conditional-power" id="toc-conditional-power" class="nav-link" data-scroll-target="#conditional-power">Conditional Power</a></li>
  </ul></li>
  <li><a href="#decision-quantities" id="toc-decision-quantities" class="nav-link" data-scroll-target="#decision-quantities">Decision Quantities</a></li>
  <li><a href="#standard-evaluation-variables" id="toc-standard-evaluation-variables" class="nav-link" data-scroll-target="#standard-evaluation-variables">Standard Evaluation Variables</a>
  <ul>
  <li><a href="#definition-of-success" id="toc-definition-of-success" class="nav-link" data-scroll-target="#definition-of-success">Definition of Success</a></li>
  <li><a href="#clinically-significant-difference" id="toc-clinically-significant-difference" class="nav-link" data-scroll-target="#clinically-significant-difference">Clinically significant difference</a></li>
  <li><a href="#super-superiority-and-non-inferiority" id="toc-super-superiority-and-non-inferiority" class="nav-link" data-scroll-target="#super-superiority-and-non-inferiority">Super-superiority and non-inferiority</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content">





<p>The FACTS Ordinal Engine features several special quantities of interest.</p>
<section id="posterior-probability-qois" class="level1">
<h1>Posterior probability QOIs</h1>
<p>The posterior probability QOIs available depend on whether the user has chosen to model the ordinal endpoint with the cumulative logistic family or with independent Dirichlet distributions.</p>
<section id="cumulative-logistic-modeling" class="level2">
<h2 class="anchored" data-anchor-id="cumulative-logistic-modeling">Cumulative logistic modeling</h2>
<p>When the cumulative logistic family is in use, each arm other than control has an odds ratio parameter relative to control. Posterior probability QOIs are defined based on these odds ratios. By default, the following posterior probability QOIs are available, (here <span class="math inline">\(OR_d\)</span> is <span class="math inline">\(\exp(\theta_d)\)</span> where the <span class="math inline">\(\theta_d\)</span>’s are the parameters defined in the dose-response model):</p>
<ul>
<li><p>The probability of being better than control, which is <span class="fake-code-block">Pr(<span class="math inline">\(OR_d &gt; 1\)</span>)</span> when large values of the ordinal index are good, or <span class="fake-code-block">Pr(<span class="math inline">\(OR_d &lt; 1\)</span>)</span> when small values are good.</p></li>
<li><p>The probability of being better than control by a clinically significant difference, which is <span class="fake-code-block">Pr(<span class="math inline">\(OR_d - 1 &gt; CSD\)</span>)</span> when large values are good, or <span class="fake-code-block">Pr(<span class="math inline">\(OR_d - 1 &lt; -CSD\)</span>)</span> when small values are good. The CSD is entered by the user in the Standard Evaluation Variables section of the Quantities of Interest tab.</p></li>
</ul>
</section>
<section id="dirichlet-modeling" class="level2">
<h2 class="anchored" data-anchor-id="dirichlet-modeling">Dirichlet modeling</h2>
<p>When the user has selected independent Dirichlet modeling for the ordinal endpoint, the posterior probability QOIs are based on expected utility. The default posterior probability QOIs are:</p>
<ul>
<li><p>The probability of being better than control with respect to expected utility, which is <span class="fake-code-block">Pr(<span class="math inline">\(EU_d &gt; EU_{Control}\)</span>)</span>. Here <span class="math inline">\(EU_d = \sum_{k=1}^K p^d_k U_k\)</span>, where <span class="math inline">\(p^d_k\)</span> is the probability of ordinal outcome <span class="math inline">\(k\)</span> for arm <span class="math inline">\(d\)</span> and where <span class="math inline">\(U_k\)</span> is the utility for outcome <span class="math inline">\(k\)</span>.</p></li>
<li><p>The probability of being better than control by a clinical significant difference, which is <span class="fake-code-block">Pr(<span class="math inline">\(EU_d &gt; EU_{Control} + CSD\)</span>)</span> regardless of whether large or small values of the ordinal endpoint are good (large values of utility are always good). The CSD is entered by the user in the Standard Evaluation Variables section of the Quantities of Interest tab.</p></li>
</ul>
</section>
</section>
<section id="p-values" class="level1">
<h1><span class="math inline">\(p\)</span>-values</h1>
<p>The Ordinal Engine has the following different frequentist final analyses available. If there are multiple experimental arms, the <span class="math inline">\(p\)</span>-values can optionally be adjusted using the Bonferroni correction. The <span class="math inline">\(p\)</span>-values may handle missing values by ignoring them or by imputing a specific ordinal outcome chosen by the user.</p>
<section id="utility-t-test" class="level2">
<h2 class="anchored" data-anchor-id="utility-t-test">Utility <span class="math inline">\(t\)</span>-test</h2>
<p>One option is to perform a <span class="math inline">\(t\)</span>-test on the utility values observed, comparing each experimental arm to control, in the same way as with a continuous endpoint.</p>
</section>
<section id="wilcoxon-mann-whitney-test" class="level2">
<h2 class="anchored" data-anchor-id="wilcoxon-mann-whitney-test">Wilcoxon-Mann-Whitney test</h2>
<p>FACTS will also perform a Wilcoxon-Mann-Whitney (rank sum) test comparing each experimental arm to control. FACTS adjusts for ties in computing the <span class="math inline">\(p\)</span>-value.</p>
</section>
<section id="proportional-odds-likelihood-ratio-test" class="level2">
<h2 class="anchored" data-anchor-id="proportional-odds-likelihood-ratio-test">Proportional odds likelihood ratio test</h2>
<p>FACTS will also perform a likelihood ratio test based on the proportional odds model, comparing each experimental arm to control. It fits a multinomial model to both arms together, and also fits a model where the experimental arm has a single proportional odds model deviation from control, and compares twice the logged ratio of maximized likelihoods to the chi-squared distribution with one degree of freedom. In practice, this test will often give similar results to the Wilcoxon test. (See, for example, <a href="https://www.fharrell.com/post/wpo/" title="Harrell"><strong>Harrell</strong></a>.)</p>
</section>
<section id="dichotomized-ordinal-test" class="level2">
<h2 class="anchored" data-anchor-id="dichotomized-ordinal-test">Dichotomized ordinal test</h2>
<p>FACTS will also test whether the probability of a “good” outcome is larger for an experimental arm than it is for control. The user defines a “good” outcome using the “Definition of Success” selector in the “Standard Evaluation Variables” section. The test is the same as for a dichotomous endpoint.</p>
<p>Dichotomizing an ordinal outcome is rarely a good choice because much of the information in the ordinal outcome is wasted. See, for example, Podcast by Scott Berry. FACTS simulations can be useful in demonstrating the reduction in power when an ordinal endpoint is dichotomized.</p>
</section>
</section>
<section id="bayesian-predictive-probabilities" class="level1">
<h1>Bayesian Predictive Probabilities</h1>
<p>Bayesian predictive probabilities are available for any of the four <span class="math inline">\(p\)</span>-value-based frequentist final analyses described above. As with other endpoints, these can be predictions of the result of the current trial, or a separate two-arm trial.<br>
The current trial predictions can refer either to an analysis of the patients currently enrolled but after follow-up is complete, or at the maximum sample size for the trial.</p>
<p>Here are a few notes about the different predictive probabilities.</p>
<ul>
<li><p>Predictive probabilities for the proportional odds likelihood ratio test are likely to be more time-consuming, and less accurate, to simulate than the other <span class="math inline">\(p\)</span>-values. These predictive probabilities require simulating a large number of final data sets, computing the test statistic for each, and counting how many achieved the desired significance level. We recommend substituting the Wilcoxon test while the design is being developed (and maybe permanently); its results should be similar.</p></li>
<li><p>Predictive probabilities for the Wilcoxon test: Both future trial and current trial predictive probabilities for the Wilcoxon test are computed using formulas developed by Graves for use in simulating trials designed by Berry Consultants including <a href="https://jamanetwork.com/journals/jama/fullarticle/2752580" title="SEPSIS-ACT"><strong>SEPSIS-ACT</strong></a>. The approach is to write the Wilcoxon-Mann-Whitney as a sum, over pairs of patients, of indicators that an experimental arm patient has a better outcome than a control arm patients, and then correctly computes the predictive mean and variance of this sum as a function of the probabilities of each outcome for each arm. The results are then averaged over a large number of Markov chain Monte Carlo samples of outcome probabilities. The predictive probabilities computed in this way are very accurate, the only exception is when there are a very small number of future patients whose data are yet to be collected.</p></li>
</ul>
<section id="current-trial-bayesian-predictive-probabilities" class="level2">
<h2 class="anchored" data-anchor-id="current-trial-bayesian-predictive-probabilities">Current Trial Bayesian Predictive Probabilities</h2>
<p>For general discussion of current trial Bayesian predictive probabilities, see the core QOIs page. In the present version of the FACTS Ordinal Engine, current trial predictive probabilities are only available for the full sample size intended at the end of the trial.</p>
</section>
<section id="future-trial-bayesian-predictive-probabilities" class="level2">
<h2 class="anchored" data-anchor-id="future-trial-bayesian-predictive-probabilities">Future Trial Bayesian Predictive Probabilities</h2>
<p>For general discussion of future trial Bayesian predictive probabilities, see the core QOIs page.</p>
</section>
<section id="conditional-power" class="level2">
<h2 class="anchored" data-anchor-id="conditional-power">Conditional Power</h2>
<p>Conditional power in trials with an ordinal endpoint will be added in a future release of FACTS Ordinal.</p>
</section>
</section>
<section id="decision-quantities" class="level1">
<h1>Decision Quantities</h1>
<p>Decision quantities in FACTS Ordinal operate similarly to decision quantities with other FACTS endpoints.</p>
</section>
<section id="standard-evaluation-variables" class="level1">
<h1>Standard Evaluation Variables</h1>
<section id="definition-of-success" class="level2">
<h2 class="anchored" data-anchor-id="definition-of-success">Definition of Success</h2>
<p>In some circumstances, one may wish to dichotomize an ordinal endpoint, and define an ordinal value such that achieving that value or better counts as a success, while reaching a worse value is a failure. This value can be chosen here, and it will be used in p-values comparing treatments to control with respect to the probability of a success. “Better” than a specified value here is taken to mean a more favorable ordinal index (a higher index if high values are good, or a lower index if low values are good), regardless of which utility values have been entered.</p>
</section>
<section id="clinically-significant-difference" class="level2">
<h2 class="anchored" data-anchor-id="clinically-significant-difference">Clinically significant difference</h2>
<p>Here the user may define a clinically significant difference (CSD) to use in posterior probabilities of being better than control by a CSD.</p>
<ul>
<li><p>If the user has selected independent Dirichlet modeling, the CSD is on the scale of utility. For example if the CSD is 0.5, FACTS by default computes the probability that each treatment has an expected utility that is more than 0.5 points higher than the expected utility for the control arm. Regardless of whether the high values of the ordinal index are good, large utilities are good in FACTS Ordinal.</p></li>
<li><p>If the user has selected cumulative logistic modeling, the CSD is on the scale of an odds ratio. For example if the CSD is 0.3 and large values are good, the default posterior probability of an odds ratio of at least 1 + 0.3 = 1.3 is calculated. If the CSD is 0.2 and small values are good, the posterior probability of an odds ratio less than 1 - 0.2 = 0.8 is calculated.</p></li>
</ul>
</section>
<section id="super-superiority-and-non-inferiority" class="level2">
<h2 class="anchored" data-anchor-id="super-superiority-and-non-inferiority">Super-superiority and non-inferiority</h2>
<p>Super-superiority and non-inferiority are complicated concepts in ordinal endpoints and they have different meanings, or no established meaning, depending on how the ordinal endpoint is analyzed. These will be enabled in a future version of FACTS Ordinal.</p>


</section>
</section>

</main> <!-- /main -->
<!-- footer.html -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-pF6W3...<truncated>...Q==" crossorigin="anonymous" referrerpolicy="no-referrer">

<footer style="display: flex; justify-content: space-between; align-items: center; padding: 1rem 0;">
  <p style="margin: 0;">
    © <span id="year"></span>
    <a href="https://www.berryconsultants.com">Berry Consultants</a>
  </p>

  <div id="share-icons" style="display: flex; justify-content: center; gap: 1rem;">
    <!-- buttons injected here -->
  </div>

  <p style="margin: 0;">
    <a href="../../../../../introduction/citation.html">Cite</a>
  </p>
</footer>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  document.addEventListener("DOMContentLoaded", () => {
    const url   = encodeURIComponent(window.location.href);
    const title = encodeURIComponent(document.title);

    const networks = [
      {
        name: "X",
        href: `https://twitter.com/intent/tweet?url=${url}&text=${title}`,
        icon: `<i class="fab fa-x" style="font-size:1.4em;"></i>`
      },
      {
        name: "LinkedIn",
        href: `https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=${title}`,
        icon: `<i class="fab fa-linkedin" style="font-size:1.4em;"></i>`
      },
      {
        name: "Bluesky",
        href: `https://bsky.app/intent/compose?text=${title}%20${url}`,
        icon: `
          <svg width="1.4em" height="1.4em" fill="currentColor"
               viewBox="0 0 600 530" xmlns="http://www.w3.org/2000/svg">
            <path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46
                     26.262-54.316 97.782-155.54 164.28-205.46
                     47.98-36.021 125.72-63.892 125.72 24.795
                     0 17.712-10.155 148.79-16.111 170.07
                     -20.703 73.984-96.144 92.854-163.25 81.433
                     117.3 19.964 147.14 86.092 82.697 152.22
                     -122.39 125.59-175.91-31.511-189.63-71.766
                     -2.514-7.3797-3.6904-10.832-3.7077-7.8964
                     -0.0174-2.9357-1.1937 0.51669-3.7077 7.8964
                     -13.714 40.255-67.233 197.36-189.63 71.766
                     -64.444-66.128-34.605-132.26 82.697-152.22
                     -67.108 11.421-142.55-7.4491-163.25-81.433
                     -5.9562-21.282-16.111-152.36-16.111-170.07
                     0-88.687 77.742-60.816 125.72-24.795z"/>
          </svg>`
      },
      {
        name: "Reddit",
        href: `https://www.reddit.com/submit?url=${url}&title=${title}`,
        icon: `<i class="fab fa-reddit" style="font-size:1.4em;"></i>`
      },
      {
        name: "WhatsApp",
        href: `https://wa.me/?text=${title}%20${url}`,
        icon: `<i class="fab fa-whatsapp" style="font-size:1.4em;"></i>`
      },
      {
        name: "Email",
        href: `mailto:?subject=${title}&body=${title}%20${url}`,
        icon: `<i class="fas fa-envelope" style="font-size:1.4em;"></i>`
      }
    ];

    const container = document.getElementById("share-icons");
    networks.forEach(net => {
      const a = document.createElement("a");
      a.href      = net.href;
      a.target    = "_blank";
      a.rel       = "noopener";
      a.setAttribute("aria-label", `Share on ${net.name}`);
      a.innerHTML = net.icon;
      container.appendChild(a);
    });
  });
</script>

<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/docs\.berryconsultants\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>