<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2D-CRM</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../media/FACTS_icon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #125740;
      }
</style>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">

<!-- Roboto Serif -->
<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:wght@400;700&amp;display=swap" rel="stylesheet">

<!-- Roboto Sans -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet">
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WLMVE7GR4S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WLMVE7GR4S');
</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../media/FACTSLogo.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../introduction/index.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../../documentation/index.html" aria-current="page"> 
<span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../concepts/index.html"> 
<span class="menu-text">Concepts</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../versions/index.html"> 
<span class="menu-text">Versions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../get/index.html"> 
<span class="menu-text">Get FACTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../contact/index.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Version 7.1</li><li class="breadcrumb-item"><a href="../../../documentation/v71/userguides/core/index.html">User Guides</a></li><li class="breadcrumb-item"><a href="../../../documentation/v71/userguides/2dcrm.html">2D-CRM</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Version 7.1</li><li class="breadcrumb-item"><a href="../../../documentation/v71/userguides/core/index.html">User Guides</a></li><li class="breadcrumb-item"><a href="../../../documentation/v71/userguides/2dcrm.html">2D-CRM</a></li></ol></nav>
      <h1 class="title">2D-CRM</h1>
            <p class="subtitle lead">2D Model-Based Dose Escalation</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta column-body">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Documentation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Version 7.1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">User Guides</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../documentation/v71/userguides/core/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Phase II &amp; III Designs</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Study</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/study/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/study/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/study/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../documentation/v71/userguides/core/vsr/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Virtual Subject Response</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/vsr/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/vsr/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/vsr/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/execution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Execution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/qois.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quantities of Interest (QOI) Tab</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../documentation/v71/userguides/core/design/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Design</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/design/doseresponse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dose Response Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/design/frequentistanalysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frequentist Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../documentation/v71/userguides/core/longitudinalmodels/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Longitudinal Models</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth5 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/longitudinalmodels/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/longitudinalmodels/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/longitudinalmodels/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/design/allocation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Allocation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/design/interims.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interims</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/design/successfutility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Success/Futility Criteria</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../documentation/v71/userguides/core/simulation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simulation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/simulation/contanddichot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous/Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/simulation/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/core/analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/platform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Platform Trials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/crm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CRM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3+3 / mTPI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/dr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Design Report</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/2dcrm.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">2D-CRM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/flfll.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FLFLL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/FACTSfromR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Calling FACTS from R</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Examples</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">CRM</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Staged</span></span>
  </li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul>
  <li><a href="#purpose-of-this-document" id="toc-purpose-of-this-document" class="nav-link" data-scroll-target="#purpose-of-this-document">Purpose of this document</a></li>
  <li><a href="#scope-of-this-document" id="toc-scope-of-this-document" class="nav-link" data-scroll-target="#scope-of-this-document">Scope of this document</a></li>
  <li><a href="#context-of-this-issue" id="toc-context-of-this-issue" class="nav-link" data-scroll-target="#context-of-this-issue">Context of this Issue</a></li>
  <li><a href="#citing-facts" id="toc-citing-facts" class="nav-link" data-scroll-target="#citing-facts">Citing FACTS</a></li>
  <li><a href="#definition-of-terms" id="toc-definition-of-terms" class="nav-link" data-scroll-target="#definition-of-terms">Definition of Terms</a></li>
  </ul></li>
  <li><a href="#facts-2d-crm-overview" id="toc-facts-2d-crm-overview" class="nav-link" data-scroll-target="#facts-2d-crm-overview">FACTS 2D-CRM Overview</a>
  <ul>
  <li><a href="#facts-7.0" id="toc-facts-7.0" class="nav-link" data-scroll-target="#facts-7.0">FACTS 7.0</a></li>
  <li><a href="#facts-6.5" id="toc-facts-6.5" class="nav-link" data-scroll-target="#facts-6.5">FACTS 6.5</a></li>
  <li><a href="#facts-6.4.1-changes-to-2d-crm" id="toc-facts-6.4.1-changes-to-2d-crm" class="nav-link" data-scroll-target="#facts-6.4.1-changes-to-2d-crm">FACTS 6.4.1 Changes to 2D-CRM</a></li>
  <li><a href="#facts-6.4-changes-to-2d-crm" id="toc-facts-6.4-changes-to-2d-crm" class="nav-link" data-scroll-target="#facts-6.4-changes-to-2d-crm">FACTS 6.4 Changes to 2D-CRM</a></li>
  <li><a href="#facts-6.3-changes-to-2d-crm" id="toc-facts-6.3-changes-to-2d-crm" class="nav-link" data-scroll-target="#facts-6.3-changes-to-2d-crm">FACTS 6.3 Changes to 2D-CRM</a></li>
  <li><a href="#the-use-of-the-2d-crm-simulator-to-design-a-trial" id="toc-the-use-of-the-2d-crm-simulator-to-design-a-trial" class="nav-link" data-scroll-target="#the-use-of-the-2d-crm-simulator-to-design-a-trial">The use of the 2D-CRM simulator to design a trial</a></li>
  <li><a href="#general-constraints-and-assumptions" id="toc-general-constraints-and-assumptions" class="nav-link" data-scroll-target="#general-constraints-and-assumptions">General constraints and assumptions</a></li>
  <li><a href="#models-and-methods" id="toc-models-and-methods" class="nav-link" data-scroll-target="#models-and-methods">Models and Methods</a>
  <ul class="collapse">
  <li><a href="#run-in-methods" id="toc-run-in-methods" class="nav-link" data-scroll-target="#run-in-methods">Run-in methods</a></li>
  <li><a href="#escalation-methods" id="toc-escalation-methods" class="nav-link" data-scroll-target="#escalation-methods">Escalation methods</a></li>
  </ul></li>
  <li><a href="#outstanding-issues-absent-features" id="toc-outstanding-issues-absent-features" class="nav-link" data-scroll-target="#outstanding-issues-absent-features">Outstanding Issues / Absent Features</a></li>
  </ul></li>
  <li><a href="#starting-facts" id="toc-starting-facts" class="nav-link" data-scroll-target="#starting-facts">Starting FACTS</a></li>
  <li><a href="#the-facts-2d-crm-gui" id="toc-the-facts-2d-crm-gui" class="nav-link" data-scroll-target="#the-facts-2d-crm-gui">The FACTS 2D-CRM GUI</a></li>
  <li><a href="#the-standard-facts-menus" id="toc-the-standard-facts-menus" class="nav-link" data-scroll-target="#the-standard-facts-menus">The Standard FACTS Menus</a>
  <ul>
  <li><a href="#the-file-menu" id="toc-the-file-menu" class="nav-link" data-scroll-target="#the-file-menu">The ‘File’ Menu</a></li>
  <li><a href="#facts-settings-menu" id="toc-facts-settings-menu" class="nav-link" data-scroll-target="#facts-settings-menu">FACTS Settings Menu</a>
  <ul class="collapse">
  <li><a href="#options" id="toc-options" class="nav-link" data-scroll-target="#options">Options</a>
  <ul class="collapse">
  <li><a href="#grid-configuration" id="toc-grid-configuration" class="nav-link" data-scroll-target="#grid-configuration">Grid Configuration</a></li>
  <li><a href="#reset-options" id="toc-reset-options" class="nav-link" data-scroll-target="#reset-options">Reset Options</a></li>
  <li><a href="#load-options" id="toc-load-options" class="nav-link" data-scroll-target="#load-options">Load Options</a></li>
  <li><a href="#r-configuration" id="toc-r-configuration" class="nav-link" data-scroll-target="#r-configuration">R Configuration</a></li>
  <li><a href="#gamma-distribution-parameters" id="toc-gamma-distribution-parameters" class="nav-link" data-scroll-target="#gamma-distribution-parameters">Gamma Distribution Parameters</a></li>
  </ul></li>
  <li><a href="#enter-a-license-key" id="toc-enter-a-license-key" class="nav-link" data-scroll-target="#enter-a-license-key">Enter a license key</a></li>
  </ul></li>
  <li><a href="#the-help-menu" id="toc-the-help-menu" class="nav-link" data-scroll-target="#the-help-menu">The Help Menu</a></li>
  </ul></li>
  <li><a href="#the-study-tabs" id="toc-the-study-tabs" class="nav-link" data-scroll-target="#the-study-tabs">The Study Tabs</a>
  <ul>
  <li><a href="#study-info" id="toc-study-info" class="nav-link" data-scroll-target="#study-info">Study Info</a></li>
  <li><a href="#treatment-arms" id="toc-treatment-arms" class="nav-link" data-scroll-target="#treatment-arms">Treatment Arms</a></li>
  <li><a href="#exclude" id="toc-exclude" class="nav-link" data-scroll-target="#exclude">Exclude</a></li>
  </ul></li>
  <li><a href="#the-virtual-subject-response-tabs" id="toc-the-virtual-subject-response-tabs" class="nav-link" data-scroll-target="#the-virtual-subject-response-tabs">The Virtual Subject Response Tabs</a>
  <ul>
  <li><a href="#explicitly-defined" id="toc-explicitly-defined" class="nav-link" data-scroll-target="#explicitly-defined">Explicitly Defined</a>
  <ul class="collapse">
  <li><a href="#parametric" id="toc-parametric" class="nav-link" data-scroll-target="#parametric">Parametric</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#the-design-tabs" id="toc-the-design-tabs" class="nav-link" data-scroll-target="#the-design-tabs">The Design Tabs</a>
  <ul>
  <li><a href="#start-up" id="toc-start-up" class="nav-link" data-scroll-target="#start-up">Start-up</a></li>
  <li><a href="#dose-escalation" id="toc-dose-escalation" class="nav-link" data-scroll-target="#dose-escalation">Dose Escalation</a></li>
  <li><a href="#response-model" id="toc-response-model" class="nav-link" data-scroll-target="#response-model">Response Model</a></li>
  <li><a href="#prior-toxicities" id="toc-prior-toxicities" class="nav-link" data-scroll-target="#prior-toxicities">Prior Toxicities</a></li>
  </ul></li>
  <li><a href="#simulation-tab" id="toc-simulation-tab" class="nav-link" data-scroll-target="#simulation-tab">Simulation Tab</a>
  <ul>
  <li><a href="#to-run-simulations" id="toc-to-run-simulations" class="nav-link" data-scroll-target="#to-run-simulations">To run simulations</a></li>
  <li><a href="#mcmc-settings" id="toc-mcmc-settings" class="nav-link" data-scroll-target="#mcmc-settings">MCMC Settings</a></li>
  <li><a href="#how-many-simulations-to-run" id="toc-how-many-simulations-to-run" class="nav-link" data-scroll-target="#how-many-simulations-to-run">How many simulations to run?</a></li>
  <li><a href="#simulation-results" id="toc-simulation-results" class="nav-link" data-scroll-target="#simulation-results">Simulation results</a></li>
  <li><a href="#facts-grid-simulation-settings" id="toc-facts-grid-simulation-settings" class="nav-link" data-scroll-target="#facts-grid-simulation-settings">FACTS Grid Simulation Settings</a></li>
  <li><a href="#detailed-simulation-results" id="toc-detailed-simulation-results" class="nav-link" data-scroll-target="#detailed-simulation-results">Detailed Simulation Results</a></li>
  <li><a href="#cohort-simulation-results" id="toc-cohort-simulation-results" class="nav-link" data-scroll-target="#cohort-simulation-results">Cohort Simulation Results</a></li>
  <li><a href="#aggregation" id="toc-aggregation" class="nav-link" data-scroll-target="#aggregation">Aggregation</a></li>
  </ul></li>
  <li><a href="#the-summary-results-columns" id="toc-the-summary-results-columns" class="nav-link" data-scroll-target="#the-summary-results-columns">The Summary Results Columns</a>
  <ul>
  <li><a href="#highlights" id="toc-highlights" class="nav-link" data-scroll-target="#highlights">Highlights</a></li>
  <li><a href="#fitted-toxicity" id="toc-fitted-toxicity" class="nav-link" data-scroll-target="#fitted-toxicity">Fitted Toxicity</a></li>
  <li><a href="#observed-toxicity" id="toc-observed-toxicity" class="nav-link" data-scroll-target="#observed-toxicity">Observed Toxicity</a></li>
  <li><a href="#the-per-simulation-results" id="toc-the-per-simulation-results" class="nav-link" data-scroll-target="#the-per-simulation-results">The Per-Simulation Results</a></li>
  </ul></li>
  <li><a href="#graphs" id="toc-graphs" class="nav-link" data-scroll-target="#graphs">Graphs</a>
  <ul>
  <li><a href="#fitted-ppntoxicity" id="toc-fitted-ppntoxicity" class="nav-link" data-scroll-target="#fitted-ppntoxicity">Fitted Ppn(Toxicity)</a></li>
  <li><a href="#ppntoxicity-bands" id="toc-ppntoxicity-bands" class="nav-link" data-scroll-target="#ppntoxicity-bands">Ppn(Toxicity Bands)</a></li>
  <li><a href="#toxicity-summary-graph" id="toc-toxicity-summary-graph" class="nav-link" data-scroll-target="#toxicity-summary-graph">Toxicity Summary Graph</a></li>
  <li><a href="#mean-prselected-mtt" id="toc-mean-prselected-mtt" class="nav-link" data-scroll-target="#mean-prselected-mtt">Mean Pr(Selected MTT)</a></li>
  <li><a href="#mean-subject-allocation" id="toc-mean-subject-allocation" class="nav-link" data-scroll-target="#mean-subject-allocation">Mean Subject Allocation</a></li>
  <li><a href="#mean-observed-prtoxicity" id="toc-mean-observed-prtoxicity" class="nav-link" data-scroll-target="#mean-observed-prtoxicity">Mean Observed Pr(Toxicity)</a></li>
  <li><a href="#study-sizes-and-outcomes" id="toc-study-sizes-and-outcomes" class="nav-link" data-scroll-target="#study-sizes-and-outcomes">Study Sizes and Outcomes</a></li>
  <li><a href="#fitted-prtoxicity-per-simulationper-cohort" id="toc-fitted-prtoxicity-per-simulationper-cohort" class="nav-link" data-scroll-target="#fitted-prtoxicity-per-simulationper-cohort">Fitted Pr(Toxicity) per simulation/per cohort</a></li>
  <li><a href="#prtoxicity-band-per-simulationper-cohort" id="toc-prtoxicity-band-per-simulationper-cohort" class="nav-link" data-scroll-target="#prtoxicity-band-per-simulationper-cohort">Pr(Toxicity Band) per simulation/per cohort</a></li>
  <li><a href="#summary-graph-per-simulationper-cohort" id="toc-summary-graph-per-simulationper-cohort" class="nav-link" data-scroll-target="#summary-graph-per-simulationper-cohort">Summary Graph per simulation/per cohort</a></li>
  <li><a href="#subject-allocation-per-simulationper-cohort" id="toc-subject-allocation-per-simulationper-cohort" class="nav-link" data-scroll-target="#subject-allocation-per-simulationper-cohort">Subject Allocation per simulation/per cohort</a></li>
  <li><a href="#observed-prtoxicity-per-simulationper-cohort" id="toc-observed-prtoxicity-per-simulationper-cohort" class="nav-link" data-scroll-target="#observed-prtoxicity-per-simulationper-cohort">Observed Pr(Toxicity) per simulation/per cohort</a></li>
  <li><a href="#true-prtoxicity" id="toc-true-prtoxicity" class="nav-link" data-scroll-target="#true-prtoxicity">True Pr(Toxicity)</a></li>
  </ul></li>
  <li><a href="#analysis-tab" id="toc-analysis-tab" class="nav-link" data-scroll-target="#analysis-tab">Analysis Tab</a>
  <ul>
  <li><a href="#analysis-tab-graphs" id="toc-analysis-tab-graphs" class="nav-link" data-scroll-target="#analysis-tab-graphs">Analysis tab graphs</a>
  <ul class="collapse">
  <li><a href="#fitted-prtoxicity" id="toc-fitted-prtoxicity" class="nav-link" data-scroll-target="#fitted-prtoxicity">Fitted Pr(Toxicity)</a></li>
  <li><a href="#prtoxicity-band" id="toc-prtoxicity-band" class="nav-link" data-scroll-target="#prtoxicity-band">Pr(Toxicity Band)</a></li>
  <li><a href="#band-summary-graph" id="toc-band-summary-graph" class="nav-link" data-scroll-target="#band-summary-graph">Band Summary Graph</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#the-output-files" id="toc-the-output-files" class="nav-link" data-scroll-target="#the-output-files">The output files</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-body" id="quarto-document-content">





<section id="introduction" class="level1">
<h1>Introduction</h1>
<section id="purpose-of-this-document" class="level2">
<h2 class="anchored" data-anchor-id="purpose-of-this-document">Purpose of this document</h2>
<p>This document describes how use the FACTS Dose Escalation (DE) 2D-CRM design engine. It is intended for all end users of the system.</p>
</section>
<section id="scope-of-this-document" class="level2">
<h2 class="anchored" data-anchor-id="scope-of-this-document">Scope of this document</h2>
<p>This document covers the FACTS Dose Escalation 2D-CRM design engine user interface.</p>
<p>This document does not address the internal workings of the design engines or algorithms, which are addressed in the associated Design Engine Specification. It also does not address the use of FACTS Core Designs or Enrichment Designs, which are covered in other User Guides.</p>
<p>The screenshots provided are specific to a particular installation and may not reflect the exact layout of the information seen by any particular user. They were taken from FACTS 6 or later installed on Windows 10. Different versions of Windows or the use of different Windows themes will introduce some differences in appearance. The contents of each tab, however, will be consistent with the software.</p>
</section>
<section id="context-of-this-issue" class="level2">
<h2 class="anchored" data-anchor-id="context-of-this-issue">Context of this Issue</h2>
<p>This document is a guide to the version 7.0 release of Dose Escalation FACTS.</p>
</section>
<section id="citing-facts" class="level2">
<h2 class="anchored" data-anchor-id="citing-facts">Citing FACTS</h2>
<p>If writing in LaTex and using Bibtex, if you wish to cite FACTS (thank you!), can we suggest the following:</p>
</section>
<section id="definition-of-terms" class="level2">
<h2 class="anchored" data-anchor-id="definition-of-terms">Definition of Terms</h2>
<p>The following acronyms and abbreviations are used in this document.</p>
<p>Cap A limit on the number of subjects recruited. In FACTS N-CRM users can specify a cap on the overall number of subjects to be recruited in the trial (the ‘Overall Cap’) and specify stopping rules to define when the trial should stop before it reaches cap.</p>
<p>Control Is the treatment arm with which the novel treatment(s) are principally being compared. Control may be placebo, or some existing standard of care, or therapy, against which the novel treatment has to be benchmarked in order to determine its likely usefulness.</p>
<p>Core FACTS Core: A mode of FACTS for designing trials where multiple treatments, (possibly different doses of a novel treatment) are tested against a control and optionally an active comparator.</p>
<p>CRM Continual Reassessment Method – a dose escalation design where the dose-toxicity is estimated using a simple Bayesian model, and the resulting estimates used to control the dose escalation and estimate the Maximum Tolerated Dose (MTD).</p>
<p>DE Dose Escalation: a mode of FACTS where subjects are treated in cohorts and dose escalation is determined by the number of toxicities observed.</p>
<p>ED Enrichment Designs: a mode of FACTS for designing trials where the same treatment is testing in different settings for example different sub-populations or different but related indications.</p>
<p>Endpoint An endpoint is a measure of the subject’s health that is being analyzed in order to learn about the effects of the treatments being studied in the trial.</p>
<p>FACTS Fixed and Adaptive Clinical Trial Simulator</p>
<p>Final Endpoint The final value, or state, of a subject’s endpoint.</p>
<p>GUI Graphical User Interface, the part of the FACTS application that the user interacts with.</p>
<p>Method In the FACTS documentation we try to reserve the term ‘method’ for the algorithms used in the simulation (as opposed to the analysis) part of the program. In the analysis part we use the term ‘Model’, see below.</p>
<p>Model In the FACTS documentation we try to reserve the term ‘model’ for the statistical models used in the analysis of the trial data (in the ‘design’ section of the FACTS user interface). Where mathematical algorithms are used for other purposes in FACTS (for instance in the generation of the simulated data) we try to use the term ‘method’. We have found that initially it is very easy for users to be confused between these two parts of FACTS and we feel that using distinct terminology may help to reduce this.</p>
<p>MTD The dose most likely to be the Maximum Tolerated Dose (MTD) – the dose with the highest Pr(MTD).</p>
<p>MTD+ The dose most likely to be the MTD+ – the dose with the highest Pr(MTD+).</p>
<p>Pr(MTD) A dose’s probability of being MTD is the probability that it is the dose with the highest probability of having a toxicity rate in the acceptable toxicity band, and (if a threshold has been specified) does not have a probability of excess or unacceptable toxicity above the threshold. This estimate of MTD is constrained to select one of the available doses.</p>
<p>Pr(MTD+) A doses probability of being the MTD+ is the probability that it is the dose with the highest probability of having a toxicity rate in the acceptable band, and (if a threshold has been specified) does not have a probability of excess or unacceptable toxicity above the threshold. Unlike Pr(MTD), Pr(MTD+) includes estimating whether a dose below or a dose above the range of those being tested is more likely to have a toxicity in the acceptable band than any of the doses in the range.</p>
<p>Profile A profile is a specification of one aspect of a scenario. A scenario is made up of one profile of each of the required types for the type of trial being simulated. FACTS allows the user to specify multiple profiles of each type and then presents all the possible combinations of profiles as scenarios that can be used to drive simulations.</p>
<p>Response The change in a subject’s endpoint compared to their baseline state.</p>
<p>Scenario A scenario is the complete specification of the unknown external factors that determine the data observed on the trial and its timing. The exact factors depend on the type of trial being simulated but typically include:</p>
<blockquote class="blockquote">
<p>the distribution of the final change from base line, or probability of response or rate of events in the different treatment groups,</p>
<p>the properties of subjects’ early responses and the correlation with their final outcome,</p>
<p>the rate at which subjects are recruited into the trial,</p>
<p>the rate at which subjects drop out of the trial.</p>
</blockquote>
<p>SPEC The Design Engine Specification, describes the system algorithms, and meaning of parameters.</p>
<p>Subject Someone recruited onto a clinical trial for the purposes of learning about the properties of a treatment. Depending on the type of trial they might be patients or they might be healthy volunteers.</p>
<p>Treatment Arm Subjects on entering the study are randomized to different ‘treatment arms’. Subjects randomized to the same arm receive the same treatment and the responses of the subjects in the arm analyzed to determine the expected response to that treatment, allowing the expected responses to the different treatments to be compared.</p>
<p>UG The User Guide, describes how to use the system.</p>
</section>
</section>
<section id="facts-2d-crm-overview" class="level1">
<h1>FACTS 2D-CRM Overview</h1>
<p>This user guide assumes some limited general familiarity with FACTS and concentrates on describing the interface for designs using the 2D-CRM approach. See the FACTS Dose Escalation user guide for a general introduction to the FACTS Dose Escalation user interface.</p>
<p>The 2D-CRM is based on the method described in the paper <span class="citation" data-cites="neuenschwander2008critical">(<a href="#ref-neuenschwander2008critical" role="doc-biblioref">Neuenschwander, Branson, and Gsponer 2008</a>)</span>. It is designed for use in oncology phase 1 trials, and we understand has been used at Novartis for some trials of this type:</p>
<ul>
<li><p>Combinations of doses of two drugs are to be tested.</p></li>
<li><p>Dosing starts at a (very) low dose combination, strongly believed to be safe.</p></li>
<li><p>Usually after a cohort of subjects have completed their current dose, the dose to be used for the next cohort is selected. The selection of this dose is dictated by a combination of dose escalation rules, the estimate of the toxicity rate on the different doses and the target maximum tolerated toxicity, or toxicity band.</p></li>
<li><p>The endpoint per subject is binary: toxicity observed or not.</p></li>
<li><p>There are two predefined sets of doses to explore, one for each drug. Not all combinations may be permitted.</p></li>
<li><p>There is limited sample size.</p></li>
</ul>
<section id="facts-7.0" class="level2">
<h2 class="anchored" data-anchor-id="facts-7.0">FACTS 7.0</h2>
<p>There have been no changes to 2D-CRM in FACTS 7.0.</p>
</section>
<section id="facts-6.5" class="level2">
<h2 class="anchored" data-anchor-id="facts-6.5">FACTS 6.5</h2>
<p>There have been no changes to 2D-CRM in FACTS 6.5.</p>
</section>
<section id="facts-6.4.1-changes-to-2d-crm" class="level2">
<h2 class="anchored" data-anchor-id="facts-6.4.1-changes-to-2d-crm">FACTS 6.4.1 Changes to 2D-CRM</h2>
<p>Compared to 6.4 there have been slight changes to address circumstances where the model could fail to converge, and parameter estimates could reach very large values. This was due to wanting to allow 0 doses in 2D-CRM, because in the 2D setting it is sometimes the case that there have been monotherapy escalation studies and there is a desire to incorporate this data in the 2D trial. To do this a 0 dose is included for the other drug so there are monotherapy combinations in the design (possibly excluded from being actually given during the 2D trial). This means the posterior parameter estimates from the monotherapy can be used for that drug’s prior, or the data from the monotherapy trial can be included as “Prior Toxicities”.</p>
<p>Up to this release (6.4.1) there were two problems doing this:</p>
<ol type="1">
<li><p>Inherited from the N-CRM code, FACTS was still storing the logs of the dose strengths, so doses could not be 0, and the advice was to use small values instead such as 0.001.</p></li>
<li><p>The presence of a combination with very small values for the transformed dose strength (and now 0 values) causes problems for the model’s stability, in particular when the dose strengths are 0 it becomes impossible for the model to have anything other than 0 DLT rate at the 0,0 combination.</p></li>
</ol>
<p>In FACTS 6.4.1 these problems have been addressed by the following changes:</p>
<ol type="1">
<li><p>FACTS now allows 0 strength doses.</p></li>
<li><p>It there is any combination where both dose strengths after transformation are less than 0.001 then this combination must be excluded from the trial and can have no prior toxicities specified for it (however prior observations of no toxicities are allowed).</p></li>
<li><p>If both drugs include 0 strength doses, the lower asymptote for the Response Model (the range is usually [0, 1]) must be raised slightly, e.g.&nbsp;to 0.0001.</p></li>
</ol>
<p>Restrictions 2 and 3 are checked when there is an attempt to run simulations, and if violated a warning message is displayed and the simulations not run.</p>
</section>
<section id="facts-6.4-changes-to-2d-crm" class="level2">
<h2 class="anchored" data-anchor-id="facts-6.4-changes-to-2d-crm">FACTS 6.4 Changes to 2D-CRM</h2>
<p>There were no changes to the 2D-CRM simulator for FACTS 6.4.</p>
</section>
<section id="facts-6.3-changes-to-2d-crm" class="level2">
<h2 class="anchored" data-anchor-id="facts-6.3-changes-to-2d-crm">FACTS 6.3 Changes to 2D-CRM</h2>
<p>There were no changes to the 2D-CRM simulator for FACTS 6.3.</p>
</section>
<section id="the-use-of-the-2d-crm-simulator-to-design-a-trial" class="level2">
<h2 class="anchored" data-anchor-id="the-use-of-the-2d-crm-simulator-to-design-a-trial">The use of the 2D-CRM simulator to design a trial</h2>
<p>The typical pattern of use of the simulator is as follows:</p>
<ul>
<li><p>Enter the constraints and objectives of the study: maximum sample size and the bounds of the different toxicity bands.</p></li>
<li><p>Select the choice of and overdose control thresholds.</p></li>
<li><p>Specify a small number of expected toxicity responses as VSR scenarios.</p></li>
<li><p>Select the desired run-in and dose escalation rules.</p></li>
<li><p>Specify an initial set of priors for the model.</p></li>
<li><p>Run a small number of simulations (25 is usually adequate at this stage) of each scenario.</p></li>
<li><p>Check the performance of the design:</p>
<ul>
<li><p>Do the majority of the final combinations being selected have an acceptable level of toxicity?</p></li>
<li><p>Is the overall level of toxicity observed in the trial acceptable?</p></li>
<li><p>In the scenarios where the performance is worst, observe the behavior in individual simulations.</p></li>
</ul></li>
<li><p>Try a number of modifications to the design and simulate each modification individually. Increasing the number of simulations (usually 100 is still adequate at this stage).</p></li>
<li><p>Consider if more VSRs need to be included to check a greater range of possible actual toxicity rate patterns.</p></li>
<li><p>Combine modifications with promising results and re-simulate, (usually 500 is an adequate number at this stage).</p></li>
</ul>
<p>The design changes that are typically considered are:</p>
<ul>
<li><p>Exclude low dose combinations that are certain to be too weak.</p></li>
<li><p>Exclude high dose combinations that are certain to be too toxic.</p></li>
<li><p>Modify the run-in to be more aggressive if it is taking too many subjects and cycles to reach the escalation phase.</p>
<ul>
<li><p>The ”Huang” diagonals method is the least aggressive, both the “Ivanova” and “Tri-axial” can skip some combinations, finally consider a user specified run-in sequence.</p></li>
<li><p>The “Huang” and the “Tri-axial” can make use of the “multiple simultaneous cohorts” option in the run-in phase to test multiple combinations simultaneously.</p></li>
</ul></li>
<li><p>If the escalation phase is too aggressive – incurring too many toxicities or selecting combinations with high toxicity true toxicity too often - then options are:</p>
<ul>
<li><p>Make the run-in expand at the dose below observed toxicities, not at the toxicity</p></li>
<li><p>Make the priors for the model less informative (if the priors are informative and predicting low toxicity at higher combinations), the greater uncertainty in the toxicity at higher doses may then result in the estimate of their toxicity exceeding the overdose control threshold.</p></li>
<li><p>Make the priors for the model predict higher levels of toxicity.</p></li>
<li><p>Increase the overdose control thresholds.</p></li>
<li><p>Shift the toxicity band bounds downwards.</p></li>
<li><p>Add prior toxicity data.</p></li>
<li><p>Increase the number of subjects before escalation.</p></li>
</ul></li>
<li><p>If the escalation phase is not aggressive enough – selecting combinations with too low a toxicity too often - then options are:</p>
<ul>
<li><p>Make the run-in expand at the dose where toxicity observed not a dose below</p></li>
<li><p>Make the priors for the model more informative (if the priors are uninformative) this will allow lack of toxicity on lower doses reduce the predicted toxicity at higher, untested doses, bringing the probability of toxicity at the higher doses below the dose escalation threshold.</p></li>
<li><p>Make the priors for the model predict lower levels of toxicity.</p></li>
<li><p>Lower the overdose control thresholds.</p></li>
<li><p>Shift the toxicity band bounds upwards.</p></li>
<li><p>Add prior toxicity data.</p></li>
<li><p>Decrease the number of subjects before escalation.</p></li>
</ul></li>
</ul>
</section>
<section id="general-constraints-and-assumptions" class="level2">
<h2 class="anchored" data-anchor-id="general-constraints-and-assumptions">General constraints and assumptions</h2>
<p>The design engine is limited to phase 1/2a designs with dichotomous endpoints toxicity/no-toxicity. There is no longitudinal modeling or analysis of covariates included. All results of a cohort are assumed to be available before the next cohort is treated.</p>
</section>
<section id="models-and-methods" class="level2">
<h2 class="anchored" data-anchor-id="models-and-methods">Models and Methods</h2>
<p>For a full description of the models and methods implemented in the 2D-CRM see the Software Specification document [Spec].</p>
<p>In the current prototype there is a single statistical model used to analyse the data – the 5 parameter Bayesian Logistic Regression Model as described in <span class="citation" data-cites="neuenschwander2008critical">(<a href="#ref-neuenschwander2008critical" role="doc-biblioref">Neuenschwander, Branson, and Gsponer 2008</a>)</span>. The model is used to compute the posterior probability that the toxicity rate at each combination is in one of 4 toxicity bands – “underdosing”, “target toxicity”, “excess toxicity” and “unacceptable toxicity”. The boundaries between the bounds are settable by the user.</p>
<p>The posterior probability that the rate is in the target toxicity rate is used to target the dose allocation – the method attempts to allocate to the Maximum Target Toxicity (MTT). The posterior probability that the rate is in the “excess toxicity” and “unacceptable” or just the “unacceptable” bands can be used to enforce an “overdose control”. Combinations with a posterior probability that exceed the specified threshold are excluded from selection or allocation.</p>
<p>The dose combinations are explored in two phases:</p>
<ol type="1">
<li><p>Optionally the trial may begin with a “small cohort run in” or the allocation of a single cohort to a specified combination. This phase ends when the sequence of combinations to explore is exhausted or excluded by combinations at which toxicities have been observed. There is no model fitting during this phase.</p></li>
<li><p>The trial then proceeds looking for the dose combination with the highest probability of having a toxicity rate in the target toxicity range using dose escalation, limited by dose escalation rules.</p></li>
</ol>
<section id="run-in-methods" class="level3">
<h3 class="anchored" data-anchor-id="run-in-methods">Run-in methods</h3>
<p>There are 4 run-in methods available:</p>
<p>Contour This explores the reverse diagonals, assuming that the expected toxicity at the dose increments of the two doses are roughly equal.</p>
<p>Row by row This explores the doses of drug 1 at the first dose of drug 2, then increments drug 2, steps back a specified number of doses in drug 1 and then increments through the doses of drug 1 again. This method favours escalation of drug 1 over escalation of drug 2.</p>
<p>Tri-axial This explores the combinations on each axis and on the diagonal. For small numbers of dose increments it is similar to the Huang run-in. For larger numbers of dose increments it is more parsimonious.</p>
<p>Custom This explores a specific sequence of combinations stopping when the first toxicity is observed or the sequence is completed.</p>
<p>Or run-in can be skipped.</p>
<p>For more details see the Software Specification document [Spec].</p>
</section>
<section id="escalation-methods" class="level3">
<h3 class="anchored" data-anchor-id="escalation-methods">Escalation methods</h3>
<p>There are 4 escalation methods available. They all work in the same basic framework:</p>
<ol type="1">
<li><p>The dose combinations where sufficient subjects have been tested and lesser dose combinations are found.</p></li>
<li><p>The dose combinations that can be escalated to beyond these are found.</p></li>
<li><p>The dose combinations where the overdose control limits are exceeded are removed.</p></li>
<li><p>The target dose combinations from the remaining set are selected according to the selected method.</p></li>
</ol>
<p>The 4 methods are:</p>
<p>Contour This explores every MTT on every row and every column (frequently these overlap, but not necessarily).</p>
<p>Walk This explores the MTT that is at or adjacent to the last combination tested (excluding the dose that is an increment in both drugs from the last combination tested).</p>
<p>Tri-axial This explores the MTT on each axis and on the diagonal. Once these have the required maximum subjects on MTT, any combinations off the axis and diagonal that are the MTT are explored.</p>
<p>Allocate MTT This allocates to the combination that is the overall MTT of all the combinations that it is permitted to allocate to.</p>
</section>
</section>
<section id="outstanding-issues-absent-features" class="level2">
<h2 class="anchored" data-anchor-id="outstanding-issues-absent-features">Outstanding Issues / Absent Features</h2>
<p>Currently the most obvious absent features are:</p>
<ul>
<li><p>modeling of additional endpoints such as efficacy or drug exposure</p></li>
<li><p>the modeling of ordinal toxicity</p></li>
<li><p>the simulation of open enrolment where subjects are allocated on subject by subject basis as they become available for enrolment, with a limit on the number of subjects who can being treated but for whom final endpoint has not been observed.</p></li>
</ul>
</section>
</section>
<section id="starting-facts" class="level1">
<h1>Starting FACTS</h1>
<p>FACTS is usually first started using the FACTS icon installed on the Windows desktop or from the Windows Start &gt; Programs menu.</p>
<p>When the application opens, you are presented with the main introduction screen of FACTS (<strong>Error! Reference source not found.</strong>). From here you can start designing a 2D-CRM trial, by double clicking 2D-CRM in the list of available designs, or by selecting the 2D-CRM design option from the File &gt; New &gt; Dose Escalation menu.</p>
<p>FACTS will also be associated the parameter files it writes out with a ‘.facts’ file extension. Clicking on any one of these files will automatically start FACTS with that file opened.</p>
<p>Note: Depending on your license, some design options may not be available.</p>
<figure class="figure">
<img src="./2DCRM/media/image2.png" style="width:5.99892in;height:4.55514in" alt="Graphical user interface, text, application Description automatically generated" class="figure-img">
<figcaption>
<p>
Figure 3‑1 FACTS introduction screen
</p>
</figcaption>
</figure>
<p>From this screen a new design can be started by selecting the design type in the list and double clicking it or clicking on the ‘create new’ button at the bottom of the list.</p>
<p>In the ‘Recent Work’ panel, the use can select from the list of most recently opened FACTS files, or from the list of directories where those files were located, opening the folder and selecting a FACTS file from there.</p>
<p>Once a FACTS design has been created, the appropriate FACTS design module can be launched by double clicking on the “.facts” file in Windows Explorer.</p>
<p>FACTS information and displays are divided into various tabs (Figure 4‑1). The Study Tab has sub-tabs for Study Information and Treatment Arms. The Virtual Subject Response, Execution, and Design tabs allow the user to set additional parameters for simulation. On the Simulation Tab, the user executes simulations and views the results.</p>
</section>
<section id="the-facts-2d-crm-gui" class="level1">
<h1>The FACTS 2D-CRM GUI</h1>
<p>The FACTS 2D-CRM GUI conforms to the standard FACTS GUI layout, with information and displays divided across various standard tabs (Figure 4‑1).</p>
<ul>
<li><p>The Study Tab has sub-tabs for entering Study Information and specifying the Treatment Arms (doses) available in the study. This is where the user specifies the ‘given’ requirements, or constraints, of the trial to be designed.</p></li>
<li><p>The Virtual Subject Response tab has sub-tabs for specifying Explicitly Defined response scenarios to simulate and loading External data files of simulated subject responses. This is where a set of different toxicity rates per dose are specified that should represent the expected ‘space’ of the expected dose-toxicity profiles for the compound being tested.</p></li>
<li><p>The Design has sub-tabs for specifying the Start-up phase, the Dose Escalation phase, the Toxicity Response model and any prior toxicity data to include. These are the design choices open to the trial biostatistician. The expected consequences of these design choices are estimated by running simulations of the trials using the various virtual subject response profiles defined.</p></li>
<li><p>On the Simulation Tab, the user controls and runs simulations and can view the simulation results.</p></li>
<li><p>On the Analysis tab, the user can use the design to analyze a specific data set and report the result of fitting the specified toxicity response model and the recommended dose for the next cohort.</p></li>
</ul>
<figure class="figure">
<img src="./2DCRM/media/image3.png" style="width:4.06065in;height:1.00819in" class="figure-img">
<figcaption>
<p>
Figure 4‑1 - Tab layout of FACTS
</p>
</figcaption>
</figure>
<p>Also on the menu bar, on the right hand side of the FACTS Window, is a button labeled “Notes”; clicking this button reveals a simple “notepad” window in which the user can maintain some simple notes that will be stored within the “.facts” file.</p>
<figure class="figure">
<img src="./2DCRM/media/image4.png" style="width:1.78125in;height:0.83823in" class="figure-img">
<figcaption>
<p>
Figure 4‑2 - The ‘Notes’ button
</p>
</figcaption>
</figure>
<figure class="figure">
<img src="./2DCRM/media/image5.png" style="width:3.00046in;height:2.22155in" class="figure-img">
<figcaption>
<p>
Figure 4‑3 - Example design notes
</p>
</figcaption>
</figure>
<p>The notepad window comes with two further buttons: one to change the window to a free floating one that can be moved away from the FACTCS window; and the other to close it.</p>
<p>The Notes field can be used for any text the user wishes to store with the file. Suggested uses are: to record the changes made in a particular version of a design and why; and to comment on the simulation results. This will help when coming back to work that has been set aside, to recall what gave rise to the different version of a design.</p>
</section>
<section id="the-standard-facts-menus" class="level1">
<h1>The Standard FACTS Menus</h1>
<section id="the-file-menu" class="level2">
<h2 class="anchored" data-anchor-id="the-file-menu">The ‘File’ Menu</h2>
<p>FACTS has a File menu with commands similar to those found in most Windows applications, but also some unique to FACTS. The commands are:</p>
<p>New Allows the user to select a trial design type and start a new design; if there are unsaved changes in the current design the user is prompted to save them first.</p>
<p>Open Allows the user to select an existing FACTS file and open it; if there are unsaved changes in the current design the user is prompted to save them first.</p>
<p>Save Saves the current changes in the design to the currently open FACTS file.</p>
<p>Save As Allows the current version of the design to be saved to a new FATCS file; this file is then the “currently open” FACTS file going forward.</p>
<p>Export Project Creates a “Zip” archive containing the current FACTS file and all the simulation results, so these can be easily archived, emailed, saved, etc.</p>
<p>Recent Projects Contains entries for the last ten FACTS files opened: selecting one re-opens it.</p>
<p>Recent Folders Contains entries for the folders that contain the last ten FACTS files opened: selecting one opens a file browser window on that folder allowing a ‘.facts’ file in that folder to be selected (or allowing the user to navigate to some different folder and select a ‘.facts’ file there).</p>
<p>Examples Contains example projects for the different design engines: selecting one opens it.</p>
<p>Close Closes the current FACTS file, returning the user to the FACTS introduction screen.</p>
<p>Exit Closes FACTS altogether.</p>
</section>
<section id="facts-settings-menu" class="level2">
<h2 class="anchored" data-anchor-id="facts-settings-menu">FACTS Settings Menu</h2>
<p>The “Settings” command menu allows the user to do 2 things:</p>
<ul>
<li><p>Set various FACTS options.</p></li>
<li><p>Reset the options to the installation default (those in the configuration file)</p></li>
<li><p>Load options from a supplied configuration file.</p></li>
<li><p>Enter a new or changed license key.</p></li>
</ul>
<section id="options" class="level3">
<h3 class="anchored" data-anchor-id="options">Options</h3>
<p>The FACTS Options dialog allows the user to:</p>
<ul>
<li><p>Test the web-service connection to the compute grid or set the grid share directory</p></li>
<li><p>Configure the link to R</p></li>
<li><p>Select how gamma distributions are parameterized</p></li>
</ul>
<section id="grid-configuration" class="level4">
<h4 class="anchored" data-anchor-id="grid-configuration">Grid Configuration</h4>
<p>FACTS access to the grid can be implemented using</p>
<ol type="1">
<li><p>A Network Shared drive, or</p></li>
<li><p>A bespoke FACTS Grid Web Service</p></li>
</ol>
<p>The correct grid interface should be selected for your organization, depending on which grid interface has been implemented, if any.</p>
<p>If using a Network Shared drive, the following should be specified:</p>
<ul>
<li><p>The location of the shared drive – this is usually a server name and folder name e.g.&nbsp;<a href="file://factsgrid/share">\factsgrid</a></p></li>
<li><p>Whether the grid is running the FACTS engines using Linux or Windows</p></li>
<li><p>The delay in seconds between each poll of the shared drive for simulation results once a job has been submitted.</p></li>
</ul>
<p>Once the settings have been entered there is a button that initiates a test to see if the shared drive specified is accessible.</p>
<figure class="figure">
<img src="./2DCRM/media/image6.png" style="width:2.998in;height:3.57426in" alt="Graphical user interface, text, application, email Description automatically generated" class="figure-img">
<figcaption>
<p>
Network Share configuration
</p>
</figcaption>
</figure>
<p>If using a Web Service interface:</p>
<ul>
<li><p>The location of the web service endpoint needs to be set.</p></li>
<li><p>Clicking on “Test Configuration” and FACTS will attempt to connect to the FACTS grid controller. The control will show which components of the connection are working up to the first that isn’t.</p></li>
</ul>
<p><img src="./2DCRM/media/image7.png" style="width:2.998in;height:3.57426in" alt="Graphical user interface, text, application Description automatically generated"></p>
<p>: Webservice Configuration</p>
</section>
<section id="reset-options" class="level4">
<h4 class="anchored" data-anchor-id="reset-options">Reset Options</h4>
<p>This simply restores all option settings to the users saved values (in the “user.config” file in the FACTS folder in the users AppData directory).</p>
</section>
<section id="load-options" class="level4">
<h4 class="anchored" data-anchor-id="load-options">Load Options</h4>
<p>This allows the options settings to be loaded from a supplied file, and saved as the user’s saved values.</p>
</section>
<section id="r-configuration" class="level4">
<h4 class="anchored" data-anchor-id="r-configuration">R Configuration</h4>
<p>In FACTS there are controls that make it simple to launch of R with simulation results loaded. To enable this to work the user must specify where the R executable is installed and (if there is more than one version of R installed) which version of R to use.</p>
<figure class="figure">
<img src="./2DCRM/media/image8.png" style="width:3.33643in;height:4.31408in" alt="Graphical user interface, text, application Description automatically generated" class="figure-img">
<figcaption>
<p>
R Configuration Dialog
</p>
</figcaption>
</figure>
<p>The dialog allows the user to Add, Edit, Test and Remove links to versions of R.</p>
<figure class="figure">
<img src="./2DCRM/media/image9.png" style="width:4.84059in;height:3.75973in" alt="Graphical user interface, text, application Description automatically generated" class="figure-img">
<figcaption>
<p>
Adding a link to R
</p>
</figcaption>
</figure>
<p>Clicking on “Add” opens a normal Windows directory browser window, the user must navigate to the location of an R installation (for example “C:Files.2”, select the file R.exe, and click “Open”. This adds a new entry on the R configuration dialog.</p>
<p>Clicking on “Edit” operates similarly to “Add” above, except the selected location replaces that currently selected entry on the R configuration dialog rather than adding a new one.</p>
<p>Clicking on “Test” checks whether the currently selected entry on the R configuration dialog is available, if it is not an error dialog is displayed:</p>
<p><img src="./2DCRM/media/image10.png" style="width:3.887in;height:1.44195in" alt="Graphical user interface, application Description automatically generated"></p>
<p>Clicking on “Remove” removes the currently selected location on the R configuration dialog.</p>
<p>The version of R to use by default is selected by clicking on the ‘Active’ check box of the version to use.</p>
</section>
<section id="gamma-distribution-parameters" class="level4">
<h4 class="anchored" data-anchor-id="gamma-distribution-parameters">Gamma Distribution Parameters</h4>
<p>In FACTS a number of parameters require inverse gamma distributions to be specified as priors for the parameter value. There are two different parameterization of the inverse gamma provided so that the user can select the form they find the most intuitive.</p>
<figure class="figure">
<img src="./2DCRM/media/image11.png" style="width:2.98653in;height:3.86165in" alt="A picture containing text Description automatically generated" class="figure-img">
<figcaption>
<p>
: The parameterisation of Inverse Gamma Distributions
</p>
</figcaption>
</figure>
<p>The first form uses parameters that are the mean of the distribution and the equivalent weight in terms of the equivalent number of observations. The second form uses an ‘Alpha’ and ‘Beta’ parameterization that some statisticians are familiar with and will find natural to use.</p>
</section>
</section>
<section id="enter-a-license-key" class="level3">
<h3 class="anchored" data-anchor-id="enter-a-license-key">Enter a license key</h3>
<p>If a new license key is required, this command can be used to enter one. There are two ways of entering a new license:</p>
<figure class="figure">
<img src="./2DCRM/media/image12.png" style="width:3.14768in;height:1.51608in" alt="A screenshot of a cell phone Description automatically generated" class="figure-img">
<figcaption>
<p>
: Enter FACTS License Key
</p>
</figcaption>
</figure>
<p>The key can be entered directly, along with the associated Organization name (and for limited licenses the name of the system FACTS is installed on), or by selecting a supplied license file.</p>
</section>
</section>
<section id="the-help-menu" class="level2">
<h2 class="anchored" data-anchor-id="the-help-menu">The Help Menu</h2>
<p>FACTS has a Help menu with commands to assist you with the use of FACTS, providing links to users guides, tutorial and training videos. The commands are:</p>
<p>User Guides Provides access to documents such as this one, with (mainly) one user guide to each design type within FACTS. Exceptions to this simple structure are:</p>
<ul>
<li><p>Core Design User Guide: A guide to the options under the ’Design” tab for FACTS Core for all endpoints.</p></li>
<li><p>Staged Design User Guide: As the staged design allows the design of one FACTS Core stage followed by a second, most of the interface is common to the basic FACTS Core. This guide describes the differences and additional aspects for all endpoints.</p></li>
<li><p>Dose Escalation User Guide: This covers all the Dose Escalation engines except for N-CRM and 2D-CRM that have their own. It thus covers the 3+3, mTPI, CRM(Toxicity), CRM(Ordinal), CRM(Efficacy) and bCRM engines.</p></li>
</ul>
<p>Tutorials Provides access to all the tutorial documents, which describes detailed examples of use of all the engines in FACTS and many of their options. The examples under the File &gt; Examples menu option largely correspond to the different tutorials described here.</p>
<p>Design Specifications These are technical documents that describe the mathematical models implemented in FACTS in detail.</p>
<p>Execution Guides The FACTS GUI can be run in command line mode so simulations can be run/re-run from scripts. With the simulation command line flag, and passed a directory rather than a file, FACTS will run simulations for every “.facts” file in that directory – and recurse into any sub-directories and simulate any “.facts” files there too. A full guide to command line mode can be found here. The FACTS simulation engines are also available in “command line executable” form. There are guides here that document their command line parameters and how to use them to analyse a data set – e.g.&nbsp;to perform an interim analysis whilst executing a trial designed with FACTS.</p>
<p>FACTS file XML Specs These guides describe the parameters in the “.facts” files, which are text files in XML format. For expert users understanding this format allows them to use scripts to generate versions of an initial “.facts” file with slight variations in the parameters such as stopping thresholds or priors. Modification of “.facts” files outside of FACTS needs to be done with care, errors may render the file unusable by FACTS.</p>
<p>Videos Provides access to links to the introductory, training and webinar videos that Berry Consultants has recorded and makes available over the internet to FACTS users.</p>
<p>View log… If an error has occurred in FACTS, often the FACTS log file can shed light on what is going wrong. The log file is hidden away in some unfashionable and hard to locate Windows folder; this command option provides easy access to it. Allowing you to email facts support with a description of what occurred, attaching a copy of this log file having saved it somewhere convenient such as your desktop.</p>
<p>Support Launch a simple editor for sending an email to our support account: facts@berryconsultants.net</p>
<p>About Displays a simple “about box” that includes the detailed version number of FACTS.</p>
</section>
</section>
<section id="the-study-tabs" class="level1">
<h1>The Study Tabs</h1>
<section id="study-info" class="level2">
<h2 class="anchored" data-anchor-id="study-info">Study Info</h2>
<p>On the Study Info tab the user can</p>
<ul>
<li><p>Specify the maximum trial size (in subjects not cohorts, as subjects tested in the run-on phase count to the overall total).</p></li>
<li><p>Specify the parameters of the target, the user specifies the boundaries between the different toxicity bands, and whether using overdose limits and if so which ones and what the overdosing thresholds are.</p></li>
</ul>
<figure class="figure">
<img src="./2DCRM/media/image13.png" style="width:6.00046in;height:4.26954in" class="figure-img">
<figcaption>
<p>
Figure 7‑1 Study info tab: 2D-CRM
</p>
</figcaption>
</figure>
</section>
<section id="treatment-arms" class="level2">
<h2 class="anchored" data-anchor-id="treatment-arms">Treatment Arms</h2>
<p>On the Treatment Arms tab the user specifies the names of the drugs, and the number, relative strength and names of the doses of each drug. The user can either click the ‘Add’ button the required number of times or use Auto generate doses, specifying the number of doses to create and initial dose level. Auto generate deletes all the pre-existing doses before generating the new ones.</p>
<p>After creating the desired number of entries the user can edit the strengths and names of the doses.</p>
<p>It is up to the user to ensure that the dose strengths are in monotonically increasing order.</p>
<p>It is now (FACTS 6.4.1 and later) possible to enter dose strengths of 0, to create dose combinations that are monotherapies. This is particularly useful for enabling prior information from monotherapy trials to be included in this design.</p>
<figure class="figure">
<img src="./2DCRM/media/image14.png" style="width:6.00046in;height:4.26954in" class="figure-img">
<figcaption>
<p>
Figure 7‑2 Treatment Arms tab
</p>
</figcaption>
</figure>
</section>
<section id="exclude" class="level2">
<h2 class="anchored" data-anchor-id="exclude">Exclude</h2>
<p>On the Study &gt; Exclude tab the user can specify dose combinations that cannot be used in the trial. By clicking on any square on the grid the corresponding dose combination is cycled through the following states: ‘Toxic’, ‘Not Available’, ‘Ineffective’ and ‘Available’. The initial state is ‘Available’ for all combinations.</p>
<p>If a combination is specified as ‘Toxic’ then all the combinations where both drugs are at the same or higher strength are also excluded.</p>
<p>If a combination is specified as ‘Ineffective’ then all combinations where both drugs are at the same or lower strength are also excluded.</p>
<p>If a combination is specified as ‘Not Available’ then just that combination is excluded with no consequences for the combinations around it.</p>
<p>If there are any combinations where, after transformation of the dose strengths, both drugs have a dose strength of less than 0.001 this must be excluded from the trial (mark them “ineffective” or “not available”). Any toxicities occurring on such a combination would be data that the model would have difficulty fitting.</p>
<figure class="figure">
<img src="./2DCRM/media/image15.png" style="width:6.00046in;height:4.26954in" class="figure-img">
<figcaption>
<p>
Figure 7‑3 The Exclude tab
</p>
</figcaption>
</figure>
</section>
</section>
<section id="the-virtual-subject-response-tabs" class="level1">
<h1>The Virtual Subject Response Tabs</h1>
<p>The Virtual Subject Response tabs are used to define the toxicity rates to use in simulating subjects responses. In each scenario a specific toxicity rate is specified for each dose combination. Thus a range of different scenarios is usually created that span the range of toxicities that are believed credible. As well as the absolute toxicities the scenarios should span the different rates at which its thought that the toxicity rates could change from dose to dose, and also span the different degrees of drug-drug interaction – both +ve and –ve that are believed credible.</p>
<p>There are two ways of specifying scenarios: Explicitly entering the rate to simulate for each combination, and Parametrically entering the parameters of a simple model from which the toxicity at every combination then derived.</p>
<section id="explicitly-defined" class="level2">
<h2 class="anchored" data-anchor-id="explicitly-defined">Explicitly Defined</h2>
<p>On the VSR &gt; Explicitly Defined tab, the user enters the toxicity rate to use when simulating subject responses, for every dose combination. The cells are colored according to the toxicity band coloring convention used in FACTS (under-dosing: blue, target: green, excess: orange, unacceptable: red) according to the toxicity rate entered.</p>
<figure class="figure">
<img src="./2DCRM/media/image16.png" style="width:4.99542in;height:3.79196in" class="figure-img">
<figcaption>
<p>
Figure 8‑1 VSR Explicitly Defined tab
</p>
</figcaption>
</figure>
<section id="parametric" class="level3">
<h3 class="anchored" data-anchor-id="parametric">Parametric</h3>
<p>On the VSR &gt; Parametric tab, the user enters the parameters for a model that generates a toxicity rate to use when simulating subject responses, for every dose combination. The cells are colored using toxic band coloring according to the toxicity rate of that dose combination.</p>
<p>The model used is the 5 parameter BLRM model that is used as the Toxicity response model on the Design &gt; Response Model tab, but the user can specify different ‘effective dose strength’ models from those used in the analysis.</p>
<figure class="figure">
<img src="./2DCRM/media/image17.png" style="width:6.04544in;height:4.59046in" alt="Graphical user interface, chart, table, treemap chart Description automatically generated" class="figure-img">
<figcaption>
<p>
Figure 8‑2 VSR &gt; Parametric tab
</p>
</figcaption>
</figure>
<p>For each profile the user specifies:</p>
<ul>
<li><p>For each drug the ‘effective dose strength’ model.</p>
<ul>
<li><p>The reference dose (where the effective dose strength is 1 and the toxicity rate due to that drug is given by the Alpha parameter alone).</p></li>
<li><p>Whether the effective dose strength is the ratio of dose strength to the reference dose or the exponential of the difference of the to dose strength from the reference dose.</p></li>
</ul></li>
<li><p>For each drug the values of the coefficients of the single drug models entered as ln(alpha) and ln(Beta)</p></li>
<li><p>The value of Eta, the drug-drug interaction term – Eta is the log-odds ratio between the interaction and the non-interaction model at the reference dose combination.</p></li>
</ul>
<p>It is perfectly reasonable to use the parametric models by simply varying the parameters using trial and error until the desired set of toxicity rates is achieved.</p>
</section>
</section>
</section>
<section id="the-design-tabs" class="level1">
<h1>The Design Tabs</h1>
<p>The Design tab allows the user to specify:</p>
<ul>
<li><p>Start-up: where the parameters of the run-in phase (if any) are specified.</p></li>
<li><p>Dose Escalation: where the ad hoc rules for limiting dose escalation and early stopping are specified.</p></li>
<li><p>Response Model: where the priors for the dose-toxicity model are specified.</p></li>
<li><p>Prior Toxicities: where any prior observations are specified.</p></li>
</ul>
<section id="start-up" class="level2">
<h2 class="anchored" data-anchor-id="start-up">Start-up</h2>
<p>The Start-up tab allows the user to specify what is commonly referred to as a single patient run-in, in the FACTS 2D-CRM it’s allowed to be a ’small cohort run in. (The paper <span class="citation" data-cites="ivanova2003improved">(<a href="#ref-ivanova2003improved" role="doc-biblioref">Ivanova et al. 2003</a>)</span> showed that smaller target toxicity rates benefited from larger cohort sizes in the run in).</p>
<p>On this tab the user can specify</p>
<ul>
<li><p>The scheme to used for the run-in: “None”, “Contour”, “Row by Row”, “Tri-axial” or “Custom”. These are described above (2.3.1) and in [Spec].</p>
<ul>
<li>If “None” is specified then the table for specifying specific dose combinations is used to specify the dose combination(s) to be assigned to the starting cohort(s). These will be the full sized cohorts used in the escalation phase.</li>
</ul></li>
<li><p>The cohort size to use in the run-in. A size of ‘1’ yields a ‘single patient run in’, but other values are possible and may give better results, (see <span class="citation" data-cites="ivanova2003improved">(<a href="#ref-ivanova2003improved" role="doc-biblioref">Ivanova et al. 2003</a>)</span>).</p></li>
<li><p>For the ‘Row by row’ run-in scheme, the number of drug 1 dose increments to back-off each time drug 2 is incremented.</p></li>
<li><p>The range of the run-in. If the user does not want the run-in to possibly run all the way up to the maximum dose strengths, even if no toxicities have been observed, it is possible to specify a rectangular area of dose combinations for the run-in to include by specifying the starting combination (the lower left corner of the rectangle) and the stopping dose (the upper right corner combination). Note that as you would expect, regardless of whether this feature is used or not, dose combinations that have been excluded from the study on the Stud &gt; Exclude tab are excluded from the Run-in.</p></li>
<li><p>The dose allocation scheme: (only applies to the Contour and Tri-axial Run-in schemes):</p>
<ul>
<li><p>allocate a single cohort;</p></li>
<li><p>allocate the cohort across the next possible dose combinations;</p></li>
<li><p>or allocate a cohort to each of the next dose combinations and optionally specify a maximum number of cohorts / dose combinations that can be tested at a single step.</p></li>
</ul></li>
</ul>
<blockquote class="blockquote">
<p>The Row by row and Custom run-ins only identify one dose combination to test next, and so use “single cohort” allocation regardless of the setting of this control.</p>
</blockquote>
<ul>
<li><p>Where to allocate after the end of the run-in it it ends due to observing toxicities, either:</p>
<ul>
<li><p>expand the allocation at the combinations where toxicity has been observed,</p></li>
<li><p>or at one dose increment below where toxicity has been observed.</p></li>
</ul></li>
</ul>
<blockquote class="blockquote">
<p>If the run-in ends because it has reached the end of the combinations to be tested during Run-in without seeing a toxicity, then dose escalation starts by expanding at the allocation of the maximum dose combination(s).</p>
</blockquote>
<ul>
<li>If use of a Custom run-in has been specified, then the sequence of dose combinations is specified.</li>
</ul>
<figure class="figure">
<img src="./2DCRM/media/image18.png" style="width:5.99542in;height:4.26472in" class="figure-img">
<figcaption>
<p>
Figure 9‑1 Design &gt; Start-up tab
</p>
</figcaption>
</figure>
</section>
<section id="dose-escalation" class="level2">
<h2 class="anchored" data-anchor-id="dose-escalation">Dose Escalation</h2>
<p>The Dose Escalation tab allows the user to specify the dose escalation and early stopping rules to use during the Dose Escalation phase.</p>
<p>On this tab the user can specify:</p>
<ul>
<li><p>The cohort size.</p></li>
<li><p>The minimum number of subjects: that must be have been tested at a combination before the trial can escalate to a higher dose combination (that is not excluded by the overdose control).</p></li>
<li><p>The maximum dose increment: in either drug that can be applied from a combination that has been tested, and where the minimum of subjects have been tested, to a higher dose combination.</p></li>
<li><p>The dose escalation scheme: “Contour”, “Walk”, “Tri-Axial” or “Allocate to MTT”. These are described in (2.3.2) and in [Spec].</p></li>
<li><p>The dose allocation scheme: (only applies to the “Contour” and “Tri-axial” schemes):</p>
<ul>
<li><p>allocate a single cohort;</p></li>
<li><p>allocate the cohort across the next possible doses;</p></li>
<li><p>or allocate a cohort to each of the next doses.</p></li>
</ul></li>
</ul>
<blockquote class="blockquote">
<p>The “Walk” and “Allocate to MTT” escalation schemes only identify one next combination, and so use “single cohort” allocation regardless of the setting of this control.</p>
<p>If “Multiple simultaneous cohorts” is specified, then it is possible to set a limit on the maximum number of cohorts / dose combinations tested in the next step.</p>
</blockquote>
<ul>
<li>Maximum subjects on MTT. This is the maximum number of subjects to allocate to a combination under Dose Escalation. In the “Contour”, “Walk”, “Tri-Axial” escalation schemes this is currently the only stopping rule. If all the targeted combinations have the maximum number of subjects on them, the trial stops.</li>
</ul>
<figure class="figure">
<img src="./2DCRM/media/image19.png" style="width:5.99542in;height:4.26472in" class="figure-img">
<figcaption>
<p>
Figure 9‑2n Design &gt; Dose Escalation tab
</p>
</figcaption>
</figure>
<p>All the escalation schemes stop if the maximum number of subjects has been allocated or all combinations are too toxic (the posterior probabilities of toxicity exceed the overdose threshold). The schemes other than “Allocate to MTT” can also stop when the maximum number of subjects on MTT is reached on all the target doses.</p>
<p>If the “Allocate to MTT” escalation scheme, is being used then additional stopping rules similar to those available in N-CRM can be enabled. If they are enabled, then the following may be specified:</p>
<ul>
<li><p>Minimum subjects on MTT: the trial can only stop with a combination selection if the combination to be allocated to have at least these number of subjects on them.</p></li>
<li><p>Stop when Posterior Probability of target Toxicity <span class="citation" data-cites="MTT">(<a href="#ref-MTT" role="doc-biblioref"><strong>MTT?</strong></a>)</span> is at least: the trial can stop with a combination selection when the combination to be allocated to has a posterior probability that its toxicity rate is in the Target Toxicity band is at least the specified amount.</p></li>
<li><p>Minimum cohort’s accrued: the trial can only stop with a combination selection if the specified minimum number of cohorts has been allocated and completed.</p></li>
<li><p>Minimum toxicities: the trial can only stop for all combinations too toxic if the required minimum number of toxicities have been observed. Whilst all combinations are too toxic but this minimum number of toxicities havs not been observed, subjects are allocated to the lowest dose combination.</p></li>
</ul>
</section>
<section id="response-model" class="level2">
<h2 class="anchored" data-anchor-id="response-model">Response Model</h2>
<p>The Response Model tab displays a description of the model and 4 other components:</p>
<ul>
<li>A panel where the prior distributions for the model parameters can be input. Unless prior toxicity information is also to be included, it is recommended that uninformative priors are not used as these tend to lead to a failure to re-escalate to a dose if just one toxicity has been observed there, due to overdose control.</li>
</ul>
<blockquote class="blockquote">
<p>Values that represent weakly informative priors are recommended instead. The prior mean and SD for each Alpha should represent the prior expectation (in log-odds) of toxicity at the reference dose for that drug in isolation. Having set Alpha the prior for Beta should be set to allow gradients that are as steep as plausible, but if set too high, or too broad it may cause problems of not being able to escalate to high doses because of overdose control (even with few toxicities at low doses the uncertainty of the model at higher doses where there is currently no data may mean the posterior estimates of toxicity at these doses exceed the overdose control thresholds). This can be checked looking at example simulations or manually by entering test data on the Analysis tab. The prior for the correlation should usually be zero or slightly negative. A positive prior for Rho means that if the value for Alpha is estimated as low (due to low toxicity being observed near the reference dose) then the value of Beta will be estimated as being low – and this may lead to too low an estimate of toxicity at higher doses. A very strongly negative prior for Rho can lead to the same problems as a too high or broad prior for Beta.</p>
</blockquote>
<ul>
<li>A panel where the transformations of the virtual dose strengths to values that can be used by the model is specified. This transformation is usually the dose ratio of each dose to the median dose of that drug. Options to use a linear transform and a different reference dose are available.</li>
</ul>
<blockquote class="blockquote">
<p>The recommended values for the reference dose are either the center of the dose range (the default “Median dose”) or the dose thought most likely to be in the middle of the target toxicity range for that drug alone.</p>
</blockquote>
<ul>
<li>Re-scaling the response model. The model estimates rates between 0 and 1 and works best when the observed rates are asymptotically 0 or 1. If the observed toxicity is known to have different minimum and maximum rates (0.1 and 0.5 say) then the model fits is much, much better if these are specified as the asymptotes in place of 0 and 1.</li>
</ul>
<blockquote class="blockquote">
<p><strong>If a dose combination of 0,0 is included in the design (even when excluded from be used in the trial, as it must be) the response model must be re-scaled with a minimum asymptote above 0, even if only very slightly (such as 0.0001).</strong></p>
</blockquote>
<ul>
<li>The last panel displays the values of the model at the dose combinations using the specified parameters.</li>
</ul>
<figure class="figure">
<img src="./2DCRM/media/image20.png" style="width:6.04923in;height:4.59334in" alt="Table Description automatically generated" class="figure-img">
<figcaption>
<p>
Figure 9‑3 Design &gt; Response Model tab
</p>
</figcaption>
</figure>
<p>Specifying the Priors: The priors for each pair of parameters (α,β) for the response model for each drug are specified via a bivariate normal distribution (as in the single drug N-CRM), with a separate mean and SD for α and β, and a correlation term ρ (Rho). The prior for the interaction term η (Eta) is the mean and Sd of a Normal distribution.</p>
<p>Specifying the dose transform: For both drugs the transformation of the dose strengths to a range of values suited to the model is specified. For each drug the transformations are relative to ‘reference’ dose, by default the median value in the dose range. The transformation can be linear log(d – d<sup>*</sup>) or the dose ratio ((d/d<sup>*</sup>))</p>
<p>Specifying the asymptotes: The model fits values in the range (0-1), asymptotically approaching either limit. If desired the range can be reduced by re-scaling so that it asymptotically approaches a specified lower limit &gt; 0 and upper limit &lt; 1.</p>
<p>Checking the prior: The influence of the prior on the model can be checked by viewing the results of sampling of the model parameters from the specified prior. Options are to view a) 100 samples of the 1-dimensional model for drug 1 or drug 2, or b) 1,000 samples of the 2-dimensional model over both drugs showing the 10%-ile, median or 90%-ile toxicities at each dose combination.</p>
<figure class="figure">
<img src="./2DCRM/media/image21.png" style="width:6.04517in;height:4.59025in" alt="Graphical user interface, application Description automatically generated" class="figure-img">
<figcaption>
<p>
Figure 9‑4 Design &gt; Response Model showing individual drug prior
</p>
</figcaption>
</figure>
<p>The individual drug graph plots the doses at the log of their transformed dose strength (“Log(X^)”), this enables the logits to be plotted linearly.</p>
<p>If there is a transformed dose strength of 0, this is plotted at some notional value that represents -infinity, and to see the plot at the other doses the “Plot excl. first dose” option should be checked.</p>
</section>
<section id="prior-toxicities" class="level2">
<h2 class="anchored" data-anchor-id="prior-toxicities">Prior Toxicities</h2>
<p>This tab allows prior information to be included with the data collected during the trial.</p>
<p>The user can specify, for any dose combinations a prior observed number of toxicities and number of observations. To allow the prior data to be down weighted, the user is allowed to enter fractional amounts.</p>
<p>The specified prior data is simply added to the observed data when fitting the model, but this is logically equivalent to fitting the model with the specified prior to the specified prior data and then using the resulting posterior estimate of the model parameters as the prior for fitting the model to the observed data.</p>
<p>Some idea of the effect of the prior data can be gained by using the “Analysis” tab, and performing an analysis on a dataset without any additional subject data.</p>
<p>If there is a combination where the transformed dose strengths of both drugs are below 0.001, there can be no prior observed toxicities for that combination (it would be impossible for the model to fit them).</p>
<figure class="figure">
<img src="./2DCRM/media/image22.png" style="width:5.00046in;height:3.4701in" class="figure-img">
<figcaption>
<p>
Figure 9‑5 Design &gt; Prior Toxicities
</p>
</figcaption>
</figure>
</section>
</section>
<section id="simulation-tab" class="level1">
<h1>Simulation Tab</h1>
<p>The Simulation tab allows the user to execute simulations for each of the scenarios specified for the study. The user may choose the number of simulations, whether to execute locally or on the Grid, and modify the random number seeds.</p>
<p>If completed results are available, the <em>actual</em> number of simulations run for each scenario is reported in one of the first columns of the results table. The value displayed in the “Number of Simulations” control is the number of simulations that <em>will be</em> run if the user clicks on the ‘Simulate’ button.</p>
<figure class="figure">
<img src="./2DCRM/media/image23.png" style="width:4.99542in;height:3.55339in" class="figure-img">
<figcaption>
<p>
Figure 11‑1 Simulation tab
</p>
</figcaption>
</figure>
<p>N.B. FACTS uses Markov Chain Monte Carlo methods in the generation of simulated patient response data and trial results. In order to exactly reproduce a statistical set of results, it is necessary to start the Markov Chain from an identical “Random Seed”. The initial random seed for FACTS simulations is set from the simulation tab, the first thing that FACTS does is to draw the random number seeds to use at the start of each simulation. It is possible to re-run a specific simulation, for example to have more detailed output files generated, by specifying ‘start at simulation’.</p>
<p>Say the 999<sup>th</sup> simulation out of a set displayed some unusual behavior, in order to understand why, one might want to see the individual interim analyses for that simulation (the “weeks” file), the sampled subject results for that simulation (the “Subjects” files) and possibly even the MCMC samples from the analyses in that simulation. You can save the .facts file with a slightly different name (to preserve the existing simulation results), then run 1 simulation of the specific scenario, specifying that the simulations start at simulation 999 and that at least 1 weeks file, 1 subjects file and the MCMC samples file (see the “MCMC settings” dialog) are output.</p>
<p>Even a small change in the random seed will produce different simulation results.</p>
<p>The same random number seed is used at the start of the simulation of each scenario. If two identical scenarios are specified then identical simulation results will be obtained. The same may happen if scenarios or designs only differ in ways that have no impact on the trials being simulated, for instance designs that have no adaptation, or scenarios that don’t trigger any adaptation (e.g.&nbsp;none of the simulations stop early).</p>
<p>The user can specify:</p>
<ul>
<li><p>the number of simulations for which ‘Cohorts’ files are written. ‘Cohorts’ files record the data, analysis and recommendation at each interim (after each cohort).</p></li>
<li><p>The parallelization packet size, this allows simulation jobs to be split into runs of no-more than the specified number of trials to simulate. If more simulations of a scenario are requested than can be done in one packet, the simulations are started as the requisite number of packets and the results combined and summarized when they are all complete – so the final results files look just as though all the simulations were run as one job or packet. When running simulations on the local machine FACTS enterprise version will process as many packets in parallel as there are execution threads on the local machine. The overhead of packetization is quite low so a packet size of 10 to 100 can help speed up the overall simulation process – threads used to simulate scenarios that finish quicker can pick up packets for scenarios that take longer, if the number of scenarios is no directly divisible by the number of threads packetization uses all threads until the last few packets have to be run and finally the “Simulations complete” figure can be updated at the end of each packet, so the small the packet the better FACTS can report the overall progress.</p></li>
</ul>
<section id="to-run-simulations" class="level2">
<h2 class="anchored" data-anchor-id="to-run-simulations">To run simulations</h2>
<p>Even before simulations have been run, FACTS displays a row for each possible combination of the ‘profiles’ that have been specified: - baseline response, dose response, longitudinal response, accrual rate and dropout rate. Each such combination is a ‘simulation scenario’.</p>
<p>The user clicks on the check box for each scenario to be simulated, or simply clicks on “Select All”, then clicks on the “Simulate” button.</p>
<p>During simulation, the user is prevented from modifying any parameters on any other tab of the application. This safeguard ensures that the simulation results reflect the parameters specified in the user interface.</p>
<p>When simulations are started, FACTS saves all the study parameters into the current “.facts” file, and when the simulations are complete all the simulation results are saved in a “_results” folder in the same directory as the “.facts” file. Within the “_results” folder there are sub-folders that holds the results for each scenario.</p>
</section>
<section id="mcmc-settings" class="level2">
<h2 class="anchored" data-anchor-id="mcmc-settings">MCMC Settings</h2>
<p>The first two values specify two standard MCMC parameters –</p>
<ul>
<li><p>The length of burn-in is the number of the initial iterations whose results are discarded, to allow the sampled values to settle down.</p></li>
<li><p>The number of samples is the number of subsequent iterations whose results are recorded in order to give posterior estimates of the values of interest (in this case α and β).</p></li>
</ul>
<p><strong>Number of samples per imputation</strong> (not used in 2D-CRM, the model does not include imputation)</p>
<p>If the <strong>Number of MCMC samples to output</strong> value is set to N, where N &gt; 0, then all the sampled values at each interim in the first N simulations are output in a file per simulation, allowing the user to check convergence.</p>
<p><strong>The MCMC output thinning parameter</strong> can be used to reduce the amount of data output to the MCMC file. It does not reduce the amount of MCMC samples used within the model fitting.</p>
<p>To obtain the MCMC sampled values for a particular simulation, keep the same Random number seed and use <strong>Start at simulation</strong> to specify the simulation in question and run just 1 simulation.</p>
<p>Figure 11‑2 Simulations tab: MCMC Settings</p>
</section>
<section id="how-many-simulations-to-run" class="level2">
<h2 class="anchored" data-anchor-id="how-many-simulations-to-run">How many simulations to run?</h2>
<ul>
<li><p>After first entering a design it is worth running just a small number of simulations such as 10 to check that the scenarios and design have been entered correctly. If all 10 simulations of a ‘null’ scenario are successful, or all 10 simulations of what was intended to be an effective drug scenario are futile, it is likely there has been a mistake or misunderstanding in the specification of the scenarios or the final evaluation or early stopping criteria.</p></li>
<li><p>Once the design and scenarios look broadly correct, it is usually worth quickly collecting rough estimates of the operating characteristics using around 100 simulations for each scenario. 100 simulations is enough to spot designs having very poor operating characteristics such as very high type-1 error, very poor power, a strong tendency to stop early for the wrong reason, or poor probability of selecting the correct target. 100 simulations is also usually sufficient to spot problems with the data analysis such as poor model fits and significant bias in the posterior estimates.</p></li>
<li><p>Typically 1,000 simulations of each scenario of interest is required to get estimates of the operating characteristics precise enough to compare designs and tune the parameters. (Very roughly rates of 5% (such as type-1 error) can be estimated to about +/-1.5% and rates of around 80% (such as power) estimated +/- 2.5%)</p></li>
<li><p>Finally around 10,000 simulations of the scenarios of interest is required to give confidence in operating characteristics of a design and possibly to select between the final shortlisted designs (Approximately rates of 5% can be estimated to about +/-0.5% and rates of around 80% estimated +/- 1%).</p></li>
</ul>
<p>There may be many operating characteristics need to be compared over a number of scenarios, such as expected sample size, type-1 error, power, probability of selecting a good dose as the target and quality of estimation of the dose-response.</p>
<p>However frequently these will be compared over a range of scenarios, it may not be necessary to run very large number of simulations for each scenario if a design shows a consistent advantage on the key operating characteristics over the majority of the scenarios.</p>
</section>
<section id="simulation-results" class="level2">
<h2 class="anchored" data-anchor-id="simulation-results">Simulation results</h2>
<p>In the main screen the summary results that are usually of principal interest are displayed, the results summarised by scenario.</p>
<ul>
<li><p><strong>Show other columns</strong>: Allows the user to open additional windows on the simulation results, the windows available are:</p>
<ul>
<li><p><strong>All</strong>: A window containing all the summary results columns</p></li>
<li><p><strong>Highlights</strong>: a separate window with the results shown on the main tab</p></li>
<li><p><strong>Allocation, Observed</strong>: summary results of the number of subjects allocated, the number allocated to each dose, the number of toxicities observed and the number of toxicities observed per dose</p></li>
<li><p><strong>Fitted toxicity</strong>: summary results of the estimates of the model parameters and the dose-toxicity.</p></li>
<li><p><strong>Pr(MTD) etc</strong>: summary results of the posterior probabilities of the properties of interest</p></li>
<li><p><strong>Simulation Results</strong>: a window displaying the individual simulation results for each simulation of the currently selected scenario</p></li>
</ul></li>
<li><p><strong>View Graph</strong>: opens the FACTS built in graph utility displaying the results for the currently selected scenario. See <strong>Error! Reference source not found.</strong> below for a description of the graphs.</p></li>
<li><p><strong>Aggregate</strong>: opens a control that allows the user create aggregated results files from all the scenarios. The user can select which scenarios to include, and whether the results should be pivoted by dose. The resulting files are stored in the simulation results folder.</p></li>
<li><p><strong>Open in R</strong>: If aggregated files have been created then clicking this button on the simulations tab will open control that allows the user to select which aggregations to load into data frames as R is opened. Otherwise it will offer to open R using the files in the currently selected scenario.</p></li>
<li><p><em>Right Click Menu:</em> right clicking the mouse on a row of results in the simulation tab brings up a ‘local’ menu of options:</p>
<ul>
<li><p><strong>Open results folder</strong>: Opens a file browser in the results folder of the scenario, allowing swift access to any of the results files.</p></li>
<li><p><strong>Simulation results</strong>: Opens a window displaying the individual simulation results for each simulation of the currently selected scenario</p></li>
<li><p><strong>Open in R</strong>: opens a control that will launch R, first loading the selected files in the results folder as data frames.</p></li>
<li><p><strong>Show Graphs</strong>: launches the graph viewer to view the results of the currently selected scenario.</p></li>
</ul></li>
</ul>
</section>
<section id="facts-grid-simulation-settings" class="level2">
<h2 class="anchored" data-anchor-id="facts-grid-simulation-settings">FACTS Grid Simulation Settings</h2>
<p>If you have access to a computational grid, you may choose to have your simulations run on the grid instead of running them locally. This frees your computer from the computationally intensive task of simulating so you can continue other work or even shutdown your PC or laptop. In order to run simulations on the grid, it must first be configured, this is normally done via a configuration file supplied with the FACTS installation by the IT group responsible for the FACTS installation.</p>
</section>
<section id="detailed-simulation-results" class="level2">
<h2 class="anchored" data-anchor-id="detailed-simulation-results">Detailed Simulation Results</h2>
<p>After simulation has completed and simulation results have been loaded, the user may examine detailed results for any scenario with simulation data in the table by double-clicking on the row. A separate window (as in Figure 11‑4) shows the results simulation by simulation. Like the summary results – the initial window hold “highlights”, right clicking on the window displays a menu with options for viewing the “Fitted Toxicity”, “Observed Toxicity” or “All” Columns.</p>
<figure class="figure">
<img src="./2DCRM/media/image25.png" style="width:5.10401in;height:3.53503in" class="figure-img">
<figcaption>
<p>
Figure 11‑3 Detailed Simulation Results (Highlights)
</p>
</figcaption>
</figure>
</section>
<section id="cohort-simulation-results" class="level2">
<h2 class="anchored" data-anchor-id="cohort-simulation-results">Cohort Simulation Results</h2>
<p>After viewing individual simulation results, the user may examine detailed results for any simulation with per-cohort data in the table by right-clicking on the row and selecting “Cohort Results”. A separate window opens, showing the result for the selected simulation cohort by cohort. Like the summary and simulation results the initial window displays “highlights” columns, right clicking on the window displays a menu with options for viewing the “Fitted Toxicity”, “Observed Toxicity” or “All” Columns.</p>
<figure class="figure">
<img src="./2DCRM/media/image26.png" style="width:4.93292in;height:2.53768in" class="figure-img">
<figcaption>
<p>
Figure 11‑4 Cohort Simulation Results (Highlights)
</p>
</figcaption>
</figure>
</section>
<section id="aggregation" class="level2">
<h2 class="anchored" data-anchor-id="aggregation">Aggregation</h2>
<p>Aggregation combines the csv output from multiple scenarios into fewer csv files. The Aggregate… button displays a dialog which allows the user to select what to aggregate.</p>
<p><img src="./2DCRM/media/image27.png" style="width:5.07835in;height:4.2394in"></p>
<p>The default location for the aggregated files is the results directory for the study, but this can be changed.</p>
<p>In other design engines there is the option to pivot the results by dose, this is more complicated in 2D-CRM and the option is not available.</p>
<p>The default is to aggregate all scenarios, but any combination may be selected.</p>
<p>Pressing “Aggregate” generates the aggregated files.</p>
<p>Each type of csv file is aggregated into a separate csv file whose name begins agg_, so agg_summary.csv will contain the rows from each of the summary.csv files, cohortsNNN.csv files are aggregated into a single agg_cohorts.csv file. Doses.csv is identical for all scenarios and so is not aggregated.</p>
<p>Each aggregated file begins with the following extra columns, followed by the columns from the original csv file:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Column Name</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Scenario ID</td>
<td>Index of the scenario</td>
</tr>
<tr class="even">
<td>Toxicity Profile</td>
<td>A series of columns containing the names of the various profiles used to construct the scenario. Columns that are never used are omitted (e.g External Subjects Profile if there are no external scenarios)</td>
</tr>
<tr class="odd">
<td>External Subjects Profile</td>
<td></td>
</tr>
<tr class="even">
<td>Agg Timestamp</td>
<td>Date and time when aggregation was performed</td>
</tr>
<tr class="odd">
<td>Sim</td>
<td>Simulation number. Only present in the cohorts file.</td>
</tr>
<tr class="even">
<td>Dose</td>
<td>Only present if pivoted</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="the-summary-results-columns" class="level1">
<h1>The Summary Results Columns</h1>
<p>The simulation results are grouped into 4 tables; these tables can be opened by clicking the “Show Other Columns” button.</p>
<ul>
<li><p>Highlights: these are the columns displayed in table on the Simulation tab.</p></li>
<li><p>Fitted Toxicity</p></li>
<li><p>Observed Toxicity</p></li>
<li><p>All – the combination of all the above.</p></li>
</ul>
<p>The columns displayed in the first three tables are described in the subsections below.</p>
<p>Right clicking on any summary results table brings up a menu that allows the user to:</p>
<ul>
<li><p>Open the results folder for the scenario line that the cursor is on</p></li>
<li><p>Open a window with the per simulation results</p></li>
<li><p>Open R and load the results as data frames</p></li>
<li><p>Open the FACTS graph display widow for the currently selected scenario.</p></li>
</ul>
<p><img src="./2DCRM/media/image28.png" style="width:1.45844in;height:0.76275in"></p>
<section id="highlights" class="level2">
<h2 class="anchored" data-anchor-id="highlights">Highlights</h2>
<p>These are the columns displayed on the simulations tab after simulations are completed, the can also be displayed in the separate “Highlights” results window.</p>
<p>These results are in the ‘summar.csv’ files in each scenario results folder.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>Column Title</strong></td>
<td style="text-align: center;"><strong>Number of columns</strong></td>
<td style="text-align: center;"><strong>Description</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Select</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">Not an output column, this column contains check box to allow the user to select which scenario to simulate. The ‘Select All’ button causes them all to be checked.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Status</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">This column reports on the current status of simulations: Completed, Running, No Results, Out of date, Error. It is updated automatically.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Scenario</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">This gives the name of the scenario. In the N-CRM this is simply the name of the Toxicity response profile to be simulated (in other Design Engines the scenario may be a combination of a number of profiles – e.g.&nbsp;one for the toxicity response and one for the efficacy response).</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Num Sims</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The number of simulations that are being summarised</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mean subjects</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The mean number (over the simulations) of subjects randomized</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Ppn Toxic</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The mean (over the simulations) proportion of the randomized subjects that had a toxic outcome</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Sd Ppn Toxic</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The standard deviation (over the simulations) of the proportion of subjects that had a toxic outcome.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Mean true toxicity</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The mean (over the simulations) of the true probabilities of toxicity that subjects have been exposed to.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Duration</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The mean duration of the simulations in weeks</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Sd Duration</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The standard deviation of the durations of the simulations</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Ppn All Toxic</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The proportion of the simulations that stopped because all combinations were judged too toxic (exceeded the overdose control limit).</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Ppn Early Succ</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The proportion of the simulations that stopped because the stopping condition(s) had been satisfied.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Ppn Reached Cap</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The proportion of the simulations that stopped because the maximum nmber of subjects had been reached.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Ppn MTT Under</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The proportion of the dose combinations selected as MTT that actually had a toxicity rate in the “under-dosing” range.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Ppn MTT Target</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The proportion of the dose combinations selected as MTT that actually had a toxicity rate in the “target” range.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Ppn MTT Excess</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The proportion of the dose combinations selected as MTT that actually had a toxicity rate in the “excess” range.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Ppn MTT Unacceptable</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The proportion of the dose combinations selected as MTT that actually had a toxicity rate in the “unacceptable” range.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Ppn Correct Under</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The proportion of the dose combinations that have a true toxicity rate in the “under-dosing” band over all the simulations that are determined to be “under-dosing”. That is the posterior probability at the end of the simulation that the toxicity rate of that dose combination of being in the “under-dosing” band is greater than the probabilities of being in the “target” band or the combined “excess” and “unacceptable” toxicity bands, and the combination is not excluded by the overdose control conditions.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Ppn Correct Target</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The proportion of the dose combinations that have a true toxicity rate in the “target” band over all the simulations that are determined to be “target”. That is the posterior probability at the end of the simulation that the toxicity rate of that dose combination of being in the “target” band is greater than the probabilities of being in the “under-dosing” band or the combined “excess” and “unacceptable” toxicity bands, and the combination is not excluded by the overdose control conditions.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Ppn Excess+Unacc</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">The proportion of the dose combinations that have a true toxicity rate in the “excess” or “unacceptable” bands over all the simulations that are determined to be “excess” or “unacceptable”. That is the posterior probability at the end of the simulation that the toxicity rate of that dose combination of being in the “excess” or “unacceptable” bands is greater than the probabilities of being in the “under-dosing” band or the “target band”, or the combination is excluded by the overdose control conditions.</td>
</tr>
</tbody>
</table>
</section>
<section id="fitted-toxicity" class="level2">
<h2 class="anchored" data-anchor-id="fitted-toxicity">Fitted Toxicity</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>Column Title</strong></td>
<td style="text-align: center;"><strong>Number of columns</strong></td>
<td style="text-align: center;"><strong>Description</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Status</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">This column reports on the current status of simulations: Completed, Running, No Results, Out of date, Error. It is updated automatically.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Scenario</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">This gives the name of the scenario. In the N-CRM this is simply the name of the Toxicity response profile to be simulated (in other Design Engines the scenario may be a combination of a number of profiles – e.g.&nbsp;one for the toxicity response and one for the efficacy response).</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mean Tox Coeffs</strong></td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">The mean (over the simulations) of the estimate of the 5 parameters of the BLRM Dose-Toxicity model</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Sd Tox Coeffs</strong></td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">The standard deviation (over the simulations) of the estimate of the 5 parameters of the BLRM Dose-Toxicity model</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Pr(Under): &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The mean (over the simulations) of the posterior probability of being under the target toxicity at each dose combination.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Pr(Target): &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The mean (over the simulations) of the posterior probability of being in the target toxicity band at each dose combination</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Pr(Excess): &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The mean (over the simulations) of the posterior probability of being in the excess toxicity band at each dose combination</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Pr(Unacc): &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The mean (over the simulation) of the posterior probability of being in the unacceptable toxicity band at each dose combination</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Pr(Sel-MTT): &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The proportion of times that each dose combination was selected as the combination with the MTT (Maximum Target Toxicity). Some methods may select more than one such combination so that these proportions sum to more than one for each scenario.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Mean Fitted Tox: &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The mean (over the simulations) of the estimate of the toxicity rate at each dose combination.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Sd Fitted Tox: &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The standard deviation (over the simulations) of the toxicity rate at each dose combination.</td>
</tr>
</tbody>
</table>
</section>
<section id="observed-toxicity" class="level2">
<h2 class="anchored" data-anchor-id="observed-toxicity">Observed Toxicity</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>Column Title</strong></td>
<td style="text-align: center;"><strong>Number of columns</strong></td>
<td style="text-align: center;"><strong>Description</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Status</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">This column reports on the current status of simulations: Completed, Running, No Results, Out of date, Error. It is updated automatically.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Scenario</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">This gives the name of the scenario. In the N-CRM this is simply the name of the Toxicity response profile to be simulated (in other Design Engines the scenario may be a combination of a number of profiles – e.g.&nbsp;one for the toxicity response and one for the efficacy response).</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mean Subjects: &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The mean (over the simulations) of the number of subjects allocated to each dose combination.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Sd Subjects: &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The standard deviation (over the simulations) of the number of subjects allocated to each dose combination.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mean Obs Tox: &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The mean (over the simulations) of the number of observed toxicities at each dose combination.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Sd Obs Tox: &lt;Dose&gt;, &lt;Dose&gt;</strong></td>
<td style="text-align: center;">I*J</td>
<td style="text-align: center;">The standard deviation (over the simulations) of the number of observed toxicities at each dose combination.</td>
</tr>
</tbody>
</table>
</section>
<section id="the-per-simulation-results" class="level2">
<h2 class="anchored" data-anchor-id="the-per-simulation-results">The Per-Simulation Results</h2>
<p>Double clicking on any row in the simulation results table, opens a window displaying the individual simulation results. This table shows the individual results that are averaged in the summary table.</p>
<p>These values are in the ‘simulations.csv’ for each scenario in the scenario results folder.</p>
<p>Like the summary results, the per-simulation results are organized into ‘Highlights’, ‘Fitted Toxicity’ and ‘Observed Toxicity’ tables, with the corresponding columns.</p>
<p>Right clicking on any summary results table brings up a menu that allows the user to:</p>
<ul>
<li><p>Open the per-simulations results window with all columns</p></li>
<li><p>Open the per-simulations results window with the highlights columns</p></li>
<li><p>Open the per-simulations results window with the fitted toxicity columns</p></li>
<li><p>Open the per-simulations results window with the observed toxicity columns</p></li>
<li><p>Open the results folder for the scenario line that the cursor is on</p></li>
<li><p>Open the cohort results widow for the currently selected simulation.</p></li>
</ul>
<p><img src="./2DCRM/media/image29.png" style="width:1.83806in;height:1.14058in"></p>
</section>
</section>
<section id="graphs" class="level1">
<h1>Graphs</h1>
<p>There are 7 “overall” graphs that show means over the simulations and 5 graphs that show results per simulation or per cohort per simulation and one graph that shows the “true” toxicity – that is the toxicity rates being simulated for each dose combination in the scenario. The per cohort graphs can only be displayed for those simulations with “full results” (the number of these is specified on the “Advanced” dialog window on the Simulations tab), that is a “cohortsNNNN.csv” file has been written out for that simulation (where “NNNN” is replaced by the simulation number).</p>
<p>The 7 Overall graphs are:</p>
<ol type="1">
<li><p>Fitted Ppn(Toxicity) – Displays the mean of the fitted mean toxicity rates at each dose combination, the cells are colored according to the fitted rate, also shows the mean observed number of toxicities and mean number of subjects exposed at each dose combination.</p></li>
<li><p>Ppn Toxicity Bands – Displays the mean of the posterior probabilities that the toxicity rate lies in the selected toxicity band at each dose combination, also shows the mean observed number of toxicities and mean number of subjects exposed at each dose combination.</p></li>
<li><p>Toxicity Summary Graph – Displays a small histogram for each dose combination, plotting the mean probability that the toxicity rate lies in each of the toxicity bands, also highlights those dose combinations that would be exclude based on applying the overdose control rules to the mean probabilities.</p></li>
<li><p>Mean Pr(Selected MTT) – Displays the ppn of times each dose combination was selected as MTT (Maximum probability of being in the Target Toxicity band) (depending on the Dose Escalation method employed, there may be more than one combination selected as MTT at the end of each simulation).</p></li>
<li><p>Mean Subject Allocation – Displays the mean number of subjects allocated to each dose combination.</p></li>
<li><p>Mean Observed Toxicity – Displays the mean of the fitted mean toxicity rates at each dose combination, also shows the mean observed number of toxicities and mean number of subjects exposed at each dose combination. The cells are colored according to the observed toxicity ratio.</p></li>
<li><p>Study Sizes and Outcomes – Displays a histogram of the Ppn of simulations that completed at different sample sizes, colored to indicate their reason for stopping.</p></li>
</ol>
<p>The 5 per-simulation and per-cohort graphs are</p>
<ol type="1">
<li><p>Fitted Pr(Toxicity) – Displays fitted mean toxicity rate at each dose combination, the cells are colored according to the fitted rate, also shows the observed number of toxicities and the number of subjects exposed at each dose combination.</p></li>
<li><p>Pr(Toxicity Band) - Displays the posterior probability that the toxicity rate lies in the selected toxicity band at each dose combination, also shows the observed number of toxicities and number of subjects exposed at each dose combination.</p></li>
<li><p>Summary graph - Displays a small histogram for each dose combination, plotting the probability that the toxicity rate lies in each of the toxicity bands, also highlights those dose combinations that are excluded based on applying the overdose control rules to the probabilities.</p></li>
<li><p>Subject Allocation - Displays the number of subjects allocated to each dose combination.</p></li>
<li><p>Observed Pr(Toxicity) - Displays the fitted mean toxicity rate at each dose combination, also shows the observed number of toxicities and the number of subjects exposed at each dose combination. The cells are colored according to the observed toxicity ratio. The dose combinations selected as MTT / next combinations to allocate to are indicated.</p></li>
</ol>
<section id="fitted-ppntoxicity" class="level2">
<h2 class="anchored" data-anchor-id="fitted-ppntoxicity">Fitted Ppn(Toxicity)</h2>
<p>The Fitted Ppn(Toxicity) graph shows the average mean posterior estimate of the toxicity at each combination, with the cells colored in increasing intensity the higher the fitted toxicity. In addition in each cell the average number of observed toxicities and average total observations is reported.</p>
<p>The format is:</p>
<p>Fit: &lt;Average Mean estimate of toxicity&gt;</p>
<p>Obs: &lt;Mean toxicity observations&gt; / &lt;Mean total observations&gt;</p>
<p><img src="./2DCRM/media/image30.png" style="width:4.72734in;height:2.77636in"></p>
</section>
<section id="ppntoxicity-bands" class="level2">
<h2 class="anchored" data-anchor-id="ppntoxicity-bands">Ppn(Toxicity Bands)</h2>
<p>The Ppn(Toxicity Bands) graph shows the average mean posterior estimate that the toxicity falls in one of the defined toxicity bands, with the cells colored from faint to intense the higher the probability. The color used depends on the band being displayed: blue for under-dosing, green for target, orange for excess and red for unacceptable.</p>
<p>In addition in each cell the average number of observed toxicities and average total observations is reported.</p>
<p>The format is:</p>
<p>Prob: &lt;Average Posterior Probability&gt;</p>
<p>Obs: &lt;Mean toxicity observations&gt; / &lt;Mean total observations&gt;</p>
<p><img src="./2DCRM/media/image31.png" style="width:4.99542in;height:2.9338in"></p>
</section>
<section id="toxicity-summary-graph" class="level2">
<h2 class="anchored" data-anchor-id="toxicity-summary-graph">Toxicity Summary Graph</h2>
<p>The Toxicity Summary Graph displays a small histogram for each dose combination. In each histogram it shows for that dose combination the posterior probability its toxicity rate is in each of the four toxicity bands.</p>
<p>If the posterior probabilities are such that the dose combination is excluded by the overdose control rules, then the background of the histogram is in pink to highlight it.</p>
<p><img src="./2DCRM/media/image32.png" style="width:5.15513in;height:3.0276in"></p>
</section>
<section id="mean-prselected-mtt" class="level2">
<h2 class="anchored" data-anchor-id="mean-prselected-mtt">Mean Pr(Selected MTT)</h2>
<p>The Mean Pr(Selected MTT) graph shows the average number of times each combination was selected as the, or one of the, combinations with Maximum Target Toxicity. The cells are colored more intensely the greater the Ppn of simulations that the dose combination was selected as MTT.</p>
<p>The ‘Selected as MTT’ dose combination is the one with the maximum posterior probability of having a toxicity rate in the target band and not excluded by overdose control. The ‘Walk’ and ‘Allocate to MTT’ dose escalation methods select a single MTT at the end of a trial, but the ‘Contour’ and ‘Tri-Axial’ can select multiple MTTs so when using these dose escalation methods these probabilities can sum to more than 1.</p>
<p>The format is:</p>
<p>&lt;PPn of simulations this combination selected as MTT&gt;</p>
<p><img src="./2DCRM/media/image33.png" style="width:4.99542in;height:2.9338in"></p>
</section>
<section id="mean-subject-allocation" class="level2">
<h2 class="anchored" data-anchor-id="mean-subject-allocation">Mean Subject Allocation</h2>
<p>The Mean Subject Allocation graph shows the average number of subjects allocated to each combination over all the simulations, with the cells colored from white to dark blue the greater the number allocated.</p>
<p>The format is:</p>
<p>&lt;Number of subjects allocated to this combination&gt;</p>
<p><img src="./2DCRM/media/image34.png" style="width:4.99542in;height:2.9338in"></p>
</section>
<section id="mean-observed-prtoxicity" class="level2">
<h2 class="anchored" data-anchor-id="mean-observed-prtoxicity">Mean Observed Pr(Toxicity)</h2>
<p>The Mean Observed Pr(Toxicity) graph shows the average number of observations and number of toxicities along with the mean fitted toxicity across all the simulations. The color intensity reflects the fraction of observations that resulted in toxicity, with the color more intense the closer that fraction gets to 1..</p>
<p>The format is:</p>
<p>Fit: &lt;Average Mean Estimate of Toxicity&gt;</p>
<p>Obs: &lt;Mean toxicity observations&gt; / &lt;Mean total observations&gt;</p>
<p><img src="./2DCRM/media/image35.png" style="width:4.99542in;height:2.9338in"></p>
</section>
<section id="study-sizes-and-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="study-sizes-and-outcomes">Study Sizes and Outcomes</h2>
<p>The Study Sizes and Outcomes graph plots a histogram, of the sample sizes of the simulations. The bars are colored to show why the simulated trial stopped:</p>
<ul>
<li><p>Because all dose combinations were too toxic (barred by the overdose control rules)</p></li>
<li><p>Because defined stopping rule had been met.</p></li>
<li><p>Because the trial maximum sample size had been reached.</p></li>
</ul>
<p><img src="./2DCRM/media/image36.png" style="width:5.99542in;height:3.5211in"></p>
</section>
<section id="fitted-prtoxicity-per-simulationper-cohort" class="level2">
<h2 class="anchored" data-anchor-id="fitted-prtoxicity-per-simulationper-cohort">Fitted Pr(Toxicity) per simulation/per cohort</h2>
<p>The Fitted Ppn(Toxicity) graph shows the mean posterior estimate of the toxicity at each combination for each simulation, with the cells colored from beige to intense red the higher the toxicity. In addition in each cell the number of observed toxicities and total observations is reported.</p>
<p>For simulations for which a “cohortNNNN.csv” file was output, the graph can be viewed for the result of the analysis after each cohort – allowing the trial to be “stepped through” a cohort at a time.</p>
<p>The format is:</p>
<p>Fit: &lt;Mean estimate of toxicity&gt;</p>
<p>Obs: &lt; Toxicity observations&gt; / &lt;Total observations&gt;</p>
<p><img src="./2DCRM/media/image37.png" style="width:5.05792in;height:2.97051in"></p>
</section>
<section id="prtoxicity-band-per-simulationper-cohort" class="level2">
<h2 class="anchored" data-anchor-id="prtoxicity-band-per-simulationper-cohort">Pr(Toxicity Band) per simulation/per cohort</h2>
<p>The Ppn(Toxicity Bands) graph shows the posterior estimate that the toxicity falls in one of the defined toxicity bands for each simulation, with the cells colored from faint to intense the higher the probability. The color used depends on the band being displayed: blue for under-dosing, green for target, orange for excess and red for unacceptable.</p>
<p>In addition in each cell the number of observed toxicities and total observations is reported.</p>
<p>For simulations for which a “cohortNNNN.csv” file was output, the graph can also be viewed for the result of the analysis after each cohort – allowing the trial to be “stepped through” a cohort at a time.</p>
<p>The format is:</p>
<p>Prob: &lt;The Posterior Probability&gt;</p>
<p>Obs: &lt;The number toxicity observations&gt; / &lt;The number of total observations&gt;</p>
<p><img src="./2DCRM/media/image38.png" style="width:4.99542in;height:2.9338in"></p>
</section>
<section id="summary-graph-per-simulationper-cohort" class="level2">
<h2 class="anchored" data-anchor-id="summary-graph-per-simulationper-cohort">Summary Graph per simulation/per cohort</h2>
<p>The Summary graph shows the posterior estimate that the toxicity falls into each of the defined toxicity bands as a small histogram for each dose combination</p>
<p>In addition in the cells where the dose combination is excluded by the overdose rules are highlighted with a pink background.</p>
<p><img src="./2DCRM/media/image39.png" style="width:4.99542in;height:2.9338in"></p>
</section>
<section id="subject-allocation-per-simulationper-cohort" class="level2">
<h2 class="anchored" data-anchor-id="subject-allocation-per-simulationper-cohort">Subject Allocation per simulation/per cohort</h2>
<p>The Subject Allocation graph shows the number of subjects allocated to each combination in a particular simulation with the cells colored from white to dark blue the greater the number allocated.</p>
<p>For simulations for which a “cohortNNNN.csv” file was output, the graph can also be viewed for the subject allocation after each cohort – allowing the trial to be “stepped through” a cohort at a time.</p>
<p>The format is:</p>
<p>&lt;Number of subjects allocated to this combination&gt;</p>
<p><img src="./2DCRM/media/image40.png" style="width:4.99542in;height:2.9338in"></p>
</section>
<section id="observed-prtoxicity-per-simulationper-cohort" class="level2">
<h2 class="anchored" data-anchor-id="observed-prtoxicity-per-simulationper-cohort">Observed Pr(Toxicity) per simulation/per cohort</h2>
<p>The Observed Pr(Toxicity) graph shows the number of observations and number of toxicities for each combination, for each the simulation. The color intensity reflects the fraction of observations that resulted in toxicity, with the color more intense the closer that fraction gets to 1.The size of the colored square is proportional to the number of observations.</p>
<p>For simulations for which a “cohortNNNN.csv” file was output, the graph can also be viewed for the subject allocation after each cohort – allowing the trial to be “stepped through” a cohort at a time.</p>
<p>The format is:</p>
<ul>
<li><p>Obs: &lt;Mean toxicity observations&gt; / &lt;Mean total observations&gt;</p></li>
<li><p><label><input type="checkbox" checked="">signifies the combination that is (one of) the combination(s) selected for allocation to for the next cohort. At the end of the simulation, these are the combinations that are selected as the MTT.</label></p></li>
<li><p>Cells excluded by the overdose control rules are marked with a “*”.</p></li>
</ul>
<p><img src="./2DCRM/media/image41.png" style="width:4.99542in;height:2.9338in"></p>
</section>
<section id="true-prtoxicity" class="level2">
<h2 class="anchored" data-anchor-id="true-prtoxicity">True Pr(Toxicity)</h2>
<p>The True Ppn(Toxicity) graph shows the toxicity rate simulated at each combination for all the simulations, with the cells colored from beige to intense red the higher the toxicity.</p>
<p>The format is:</p>
<p>&lt;Simulated toxicity rate&gt;</p>
<p><img src="./2DCRM/media/image42.png" style="width:5.05792in;height:3.22527in"></p>
</section>
</section>
<section id="analysis-tab" class="level1">
<h1>Analysis Tab</h1>
<p>Initially the Analysis tab just displays a “Use Design to Analyze Data” button.</p>
<p><img src="./2DCRM/media/image43.png" style="width:4.87042in;height:2.64579in"></p>
<p>After clicking the button the tab becomes active,</p>
<p><img src="./2DCRM/media/image44.png" style="width:4.98629in;height:3.78503in"></p>
<p>and an “Analysis” folder is created alongside the folder that hold the simulation results.</p>
<p><img src="./2DCRM/media/image45.png" style="width:5.05792in;height:2.92026in"></p>
<p>In the “…_Results” folder there an empty “subject.csv file will have been created</p>
<p>This is the file that should be edited to contain the data to be analyzed, or the data can be added via the FACTS User Interface through the Analysis &gt; Subject Data tab.</p>
<p><img src="./2DCRM/media/image46.png" style="width:4.02538in;height:3.78503in"></p>
<p>The file format is a comma separated text file. The file must contain the following fields/columns:</p>
<ul>
<li>Subject ID: the id of the subject. This should simply be a numeric value. It is unused by the 2D-CRM engine, it is provided as an aid to linking the record to actual patient data (if that is what is being used). It is useful to give each subject a different Id as errors in the file are reported by 2D-CRM using the Subject ID Num:</li>
</ul>
<blockquote class="blockquote">
<p><img src="./2DCRM/media/image47.png" style="width:1.45787in;height:1.08068in"></p>
</blockquote>
<ul>
<li><p>Cohort ID: the number of the cohort the subject was treated in. This should be a simple increasing integer, but of course several subjects will belong to the same cohort.</p></li>
<li><p>Dose 1, Dose 2: these should be the <strong>strength</strong> of the dose of Drug 1 and Drug 2 that the subject was treated with, doses are indexed 1, 2, 3, …. Max dose.</p></li>
<li><p>Toxicity: this value indicates whether the subject had a dose limiting toxicity or not. It should be 0 (to indicate no toxicity) or 1 (to indicated toxicity).</p></li>
<li><p>Efficacy: This value is included for future expansion to additionally taking an efficacy response into account. It should be 0 or 1. The value is currently ignored.</p></li>
</ul>
<p>After entering the above into the subjects.csv and then clicking on “Reload Data”, the Analysis tab looks like this:</p>
<p><img src="./2DCRM/media/image48.png" style="width:5.99542in;height:4.55104in"></p>
<p>We can see that the data has been correctly loaded – 4 subjects with no toxicity on combination (3mg,400mg), 6 subjects with 2 toxicity on combination (3mg,800mg) and 6 subjects with 1 toxicity on combination (6mg,400mg). But as yet no analysis has been run. To run an analysis on this data, click on “Run Analysis”.</p>
<p>Once the analysis has completed, the screen looks like this …</p>
<p><img src="./2DCRM/media/image49.png" style="width:4.99542in;height:3.79196in"></p>
<p>We can see that the next recommended combinations are (4.5mg,600mg)</p>
<p>In the simulation of the design that has been entered, all the combinations recommended would be tested by allocating a cohort to each combination in the next round. In practice the clinical team would review these recommendations, the results of the model fit and possibly other data such as minor toxicities observed to form a view as to which combinations should be tested.</p>
<section id="analysis-tab-graphs" class="level2">
<h2 class="anchored" data-anchor-id="analysis-tab-graphs">Analysis tab graphs</h2>
<p>After the analysis the graph shown by default is the “Observed Toxicities” graphs (shown above).</p>
<p>The other three graphs available are similar to the “per cohort” graphs available for simulations, namely:</p>
<ul>
<li><p>Fitted Pr(Toxicity)</p></li>
<li><p>Pr(Toxicity band)</p></li>
<li><p>Band Summary Graph</p></li>
</ul>
<section id="fitted-prtoxicity" class="level3">
<h3 class="anchored" data-anchor-id="fitted-prtoxicity">Fitted Pr(Toxicity)</h3>
<p>This graph shows the mean fitted toxicity rate at each combination, colored with increasing intensity the higher the rate, and a summary of the observed data:</p>
<p><img src="./2DCRM/media/image50.png" style="width:5.01075in;height:3.80359in"></p>
</section>
<section id="prtoxicity-band" class="level3">
<h3 class="anchored" data-anchor-id="prtoxicity-band">Pr(Toxicity Band)</h3>
<p>This graph shows the posterior probability of being in a particular toxicity band at each combination, colored with increasing intensity the higher the probability, and a summary of the observed data:</p>
<p><img src="./2DCRM/media/image51.png" style="width:4.99542in;height:3.79196in"></p>
<p>There is a control to select for which toxicity band the probabilities are shown.</p>
</section>
<section id="band-summary-graph" class="level3">
<h3 class="anchored" data-anchor-id="band-summary-graph">Band Summary Graph</h3>
<p>This graph shows the posterior probability of being in each toxicity band at each combination as a simple histogram. Common y-axis range of 0-1 is used for all the histograms. The background of the histograms is white if the combination is within the overdose control rules and pink if the combination is excluded by the overdose control rules. At the top of each histogram is a summary of the observed data (toxicities / total observed):</p>
<p><img src="./2DCRM/media/image52.png" style="width:5.08901in;height:3.863in"></p>
</section>
</section>
</section>
<section id="the-output-files" class="level1">
<h1>The output files</h1>
<p>For a description of the contents of the simulation results files, see the specification document [Spec]</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-ivanova2003improved" class="csl-entry" role="listitem">
Ivanova, Anastasia, Aliakbar Montazer-Haghighi, Sri Gopal Mohanty, and Stephen D. Durham. 2003. <span>“Improved up-and-down Designs for Phase i Trials.”</span> <em>Statistics in Medicine</em> 22 (1): 69–82.
</div>
<div id="ref-neuenschwander2008critical" class="csl-entry" role="listitem">
Neuenschwander, Beat, Michael Branson, and Thomas Gsponer. 2008. <span>“Critical Aspects of the Bayesian Approach to Phase i Cancer Trials.”</span> <em>Statistics in Medicine</em> 27 (13): 2420–39.
</div>
</div></section></div></main> <!-- /main -->
<footer style="display: flex; justify-content: space-between; align-items: center;">
  <!-- Left side: Copyright -->
  <p style="margin: 0;">
    © <span id="year"></span>
    <a href="https://www.berryconsultants.com">Berry Consultants</a>
  </p>

  <!-- Right side: Relative link -->
  <p style="margin: 0;">
    <a href="../../../introduction/citation.html">How to Cite</a>
  </p>
</footer>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>