<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Quantities of Interest (QOI) Tab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<link href="../../../../media/FACTS_icon.png" rel="icon" type="image/png">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">

<!-- Roboto Serif -->
<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:wght@400;700&amp;display=swap" rel="stylesheet">

<!-- Roboto Sans -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet">
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WLMVE7GR4S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WLMVE7GR4S');
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../media/FACTSLogo.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../introduction/index.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../../../documentation/index.html" aria-current="page"> 
<span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../concepts/index.html"> 
<span class="menu-text">Concepts</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../versions/index.html"> 
<span class="menu-text">Versions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../get/index.html"> 
<span class="menu-text">Get FACTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../contact/index.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Version 7.1</li><li class="breadcrumb-item"><a href="../../../../documentation/v71/userguides/core/index.html">User Guides</a></li><li class="breadcrumb-item"><a href="../../../../documentation/v71/userguides/core/index.html">FACTS Core Designs</a></li><li class="breadcrumb-item"><a href="../../../../documentation/v71/userguides/core/qois.html">Quantities of Interest (QOI) Tab</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Documentation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Version 7.1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">User Guides</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../documentation/v71/userguides/core/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS Core Designs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Study</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/study/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/study/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/study/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../documentation/v71/userguides/core/vsr/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Virtual Subject Response</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/vsr/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/vsr/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/vsr/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/execution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Execution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/qois.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Quantities of Interest (QOI) Tab</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../documentation/v71/userguides/core/design/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Design</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/design/doseresponse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dose Response Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/design/frequentistanalysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frequentist Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../documentation/v71/userguides/core/longitudinalmodels/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Longitudinal Models</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth5 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/longitudinalmodels/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/longitudinalmodels/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/longitudinalmodels/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/design/allocation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Allocation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/design/interims.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interims</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/design/successfutility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Success/Futility Criteria</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../documentation/v71/userguides/core/simulation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simulation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/simulation/contanddichot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous/Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/simulation/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/core/analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/crm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS Model-Based Dose Escalation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS Rule-Based Dose Escalation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/FACTSfromR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Calling FACTS from R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/flfll.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS Linux File Loader Light - FLFLL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/userguides/platform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS Platform Trial User Guide</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Examples</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false">
 <span class="menu-text">CRM</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/examples/CRM/example1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/examples/CRM/example2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example 2</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false">
 <span class="menu-text">Staged</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/examples/Staged/example1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/examples/Staged/example2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example 2</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../documentation/v71/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#default-posterior-probabilities" id="toc-default-posterior-probabilities" class="nav-link active" data-scroll-target="#default-posterior-probabilities">Default Posterior Probabilities</a></li>
  <li><a href="#default-predictive-probabilities" id="toc-default-predictive-probabilities" class="nav-link" data-scroll-target="#default-predictive-probabilities">Default Predictive Probabilities</a></li>
  <li><a href="#default-target-doses" id="toc-default-target-doses" class="nav-link" data-scroll-target="#default-target-doses">Default Target Doses</a></li>
  <li><a href="#posterior-probabilities" id="toc-posterior-probabilities" class="nav-link" data-scroll-target="#posterior-probabilities">Posterior Probabilities</a>
  <ul>
  <li><a href="#notes-on-setting-deltas" id="toc-notes-on-setting-deltas" class="nav-link" data-scroll-target="#notes-on-setting-deltas">Notes on setting Deltas</a></li>
  <li><a href="#p-value-deltas" id="toc-p-value-deltas" class="nav-link" data-scroll-target="#p-value-deltas">P-value Delta’s</a></li>
  <li><a href="#p-value-comparisons-with-no-control-arm" id="toc-p-value-comparisons-with-no-control-arm" class="nav-link" data-scroll-target="#p-value-comparisons-with-no-control-arm">P-value Comparisons with No Control Arm</a></li>
  </ul></li>
  <li><a href="#predictive-probabilities" id="toc-predictive-probabilities" class="nav-link" data-scroll-target="#predictive-probabilities">Predictive Probabilities</a>
  <ul>
  <li><a href="#bayesian-predictive-probabilities" id="toc-bayesian-predictive-probabilities" class="nav-link" data-scroll-target="#bayesian-predictive-probabilities">Bayesian predictive probabilities</a>
  <ul class="collapse">
  <li><a href="#current-trial-bayesian-predictive-probabilities" id="toc-current-trial-bayesian-predictive-probabilities" class="nav-link" data-scroll-target="#current-trial-bayesian-predictive-probabilities">Current Trial Bayesian Predictive Probabilities</a></li>
  <li><a href="#current-trial-bayesian-predictive-probabilities-time-to-event" id="toc-current-trial-bayesian-predictive-probabilities-time-to-event" class="nav-link" data-scroll-target="#current-trial-bayesian-predictive-probabilities-time-to-event">Current Trial Bayesian Predictive Probabilities – Time-to-Event</a></li>
  <li><a href="#future-trial-bayesian-predictive-probabilities" id="toc-future-trial-bayesian-predictive-probabilities" class="nav-link" data-scroll-target="#future-trial-bayesian-predictive-probabilities">Future Trial Bayesian Predictive Probabilities</a></li>
  </ul></li>
  <li><a href="#conditional-power" id="toc-conditional-power" class="nav-link" data-scroll-target="#conditional-power">Conditional Power</a>
  <ul class="collapse">
  <li><a href="#current-trial-conditional-power" id="toc-current-trial-conditional-power" class="nav-link" data-scroll-target="#current-trial-conditional-power">Current Trial Conditional Power</a></li>
  <li><a href="#future-trial-conditional-power" id="toc-future-trial-conditional-power" class="nav-link" data-scroll-target="#future-trial-conditional-power">Future Trial Conditional Power</a></li>
  <li><a href="#technical-aspects-of-conditional-power-calculations" id="toc-technical-aspects-of-conditional-power-calculations" class="nav-link" data-scroll-target="#technical-aspects-of-conditional-power-calculations">Technical Aspects of Conditional Power Calculations</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#p-values" id="toc-p-values" class="nav-link" data-scroll-target="#p-values">P-values</a>
  <ul>
  <li><a href="#p-values-when-there-is-no-control-arm" id="toc-p-values-when-there-is-no-control-arm" class="nav-link" data-scroll-target="#p-values-when-there-is-no-control-arm">P-values when there is no control arm</a></li>
  <li><a href="#fisher-exact-test" id="toc-fisher-exact-test" class="nav-link" data-scroll-target="#fisher-exact-test">Fisher-Exact Test</a></li>
  </ul></li>
  <li><a href="#target-doses" id="toc-target-doses" class="nav-link" data-scroll-target="#target-doses">Target Doses</a></li>
  <li><a href="#decision-quantities" id="toc-decision-quantities" class="nav-link" data-scroll-target="#decision-quantities">Decision Quantities</a></li>
  <li><a href="#standard-evaluation-variables" id="toc-standard-evaluation-variables" class="nav-link" data-scroll-target="#standard-evaluation-variables">Standard Evaluation Variables</a>
  <ul>
  <li><a href="#the-direction-of-comparison-for-default-qois" id="toc-the-direction-of-comparison-for-default-qois" class="nav-link" data-scroll-target="#the-direction-of-comparison-for-default-qois">The direction of comparison for default QOIs</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Version 7.1</li><li class="breadcrumb-item"><a href="../../../../documentation/v71/userguides/core/index.html">User Guides</a></li><li class="breadcrumb-item"><a href="../../../../documentation/v71/userguides/core/index.html">FACTS Core Designs</a></li><li class="breadcrumb-item"><a href="../../../../documentation/v71/userguides/core/qois.html">Quantities of Interest (QOI) Tab</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Quantities of Interest (QOI) Tab</h1>
<p class="subtitle lead">Description of the available quantities of interest.</p>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<p>The quantities of interest tab allows the user to specify the Bayesian posterior quantities and frequentist p-values that are eligible to be used to make decisions in the trial as well as being output to the simulations results files.</p>
<p>There are 3 classes of QOI:</p>
<ol type="1">
<li><p>A probability calculated independently <strong>for each dose</strong>. There are 3 types of comparison:</p>
<ol type="a">
<li><p>The posterior probability that the estimate of the response of the subjects on that dose is better/worse than an absolute value or the estimate of response of the subjects on a reference dose, such as Control.</p></li>
<li><p>The predictive probability/conditional power of success (achieving frequentist statistical significance) in the current trial or a future trial comparing the estimate of response on the dose against that on the Control arm.</p></li>
<li><p>P-values for each dose comparing the estimate of response on that dose against that on the Control arm.</p></li>
</ol></li>
<li><p>Probabilities calculated across the doses for which dose is most likely to satisfy a specified <strong>target dose</strong> criteria. The target dose criteria can be to determine the dose with the maximum effect (QOI is called <span class="fake-code-block">Pr(Max)</span>), the minimum dose that achieves some known minimum effect (called <span class="fake-code-block">Pr(MED …)</span>), or that it is the minimum dose that achieves some percentago of the effect estimated for the most effective dose (called <span class="fake-code-block">Pr(EDq …)</span> where <span class="math inline">\(q\)</span> is the effect percentage).</p></li>
<li><p>A <strong>decision quantity</strong> – which is the value of either of the other types of QOIs at a specific dose level. The method of choosing the dose level that should be used for decision QOI is specified at the time of creating the decision QOI. As an example: a QOI may be created that calculates the Probability that each dose is superior to the control arm - <span class="fake-code-block">Pr(PBO)</span>. Additionally, a target QOI can be created that calculates the probability that each dose is the ED90 - <span class="fake-code-block">Pr(EDq relative to Control: Quantile=0.9)</span>. Then, a decision quantity could be created that is a scalar value representing the probability that the dose that is the most likely to be the ED90 is superior to control - <span class="fake-code-block">Pr(<span class="math inline">\(\theta_d&gt;\theta_{Control}\)</span>); d=Greatest Pr(EDq relative to Control: Quantile=0.9)</span>. It is also easy to create a decision QOI that is simply the largest (or smallest) value of the dose specific QOI. An example of this would be the p-value of the dose with the smallest p-value.</p></li>
</ol>
<p>Trial decisions at interim analyses or the final analysis are made based on decision quantities, but adaptations like adaptive allocation can be based on posterior probabilities, predictive probabilities, and target probabilities.</p>
<p>Note that to creating a QOI for early stopping or final evaluation decisions will involve using 2 or 3 QOIs:</p>
<ol type="1">
<li><p>The probability to be tested e.g.&nbsp;the probability of being better than the Control by a clinically significant difference.</p></li>
<li><p>The target dose criteria for selecting the dose that is to be used in the test – e.g.&nbsp;the ED90. This step is not always necessary.</p></li>
<li><p>The decision quantity that combines 1 &amp; 2 – e.g.&nbsp;the probability that the ED90 is better than Control by a clinically significant difference.</p></li>
</ol>
<p>There are a number of pre-defined, default QOIs which simplifies the specification of the most commonly used decision quantities, and the importation of past FACTS designs. These are:</p>
<section id="default-posterior-probabilities" class="level4">
<h4 class="anchored" data-anchor-id="default-posterior-probabilities">Default Posterior Probabilities</h4>
<ul>
<li><p>The probability of being better than the control arm: <span class="fake-code-block">Pr(<span class="math inline">\(\theta_d &gt; \theta_{Control}\)</span>)</span>, previously referred to as <span class="fake-code-block">Pr(<span class="math inline">\(\theta_d – \theta_0\)</span>)</span>, <span class="fake-code-block">Pr(Pbo)</span> and <span class="fake-code-block">Prob. Beats Ctrl</span> in earlier versions of FACTS.</p></li>
<li><p>The probability of being better than the control arm by a clinically significant difference <span class="fake-code-block">Pr(<span class="math inline">\(\theta_d - \theta_{Control} &gt; \delta^*\)</span>)</span>”, previously referred to as <span class="fake-code-block">Pr(<span class="math inline">\(\theta_d – \theta_0 &gt;\)</span> CSD)</span>, <span class="fake-code-block">Pr(CSD)</span> and <span class="fake-code-block">Prob. Beats CSD</span> in earlier versions of FACTS. The value for the <span class="math inline">\(\delta^*\)</span> is the CSD, which is set in the “Standard Evaluation Variables” panel at the bottom of the QOI tab.</p></li>
</ul>
</section>
<section id="default-predictive-probabilities" class="level4">
<h4 class="anchored" data-anchor-id="default-predictive-probabilities">Default Predictive Probabilities</h4>
<ul>
<li>The probability of success in a future trial <span class="fake-code-block">Pr(Succ. Future Trial): N=<span class="math inline">\(N_{Future}\)</span>, <em>Sup/Noninf</em>, <span class="math inline">\(\alpha=\alpha^*\)</span>; <span class="math inline">\(\delta=\delta^*\)</span></span>, previously referred to as <span class="fake-code-block">Pr(S Phase III)</span> and <span class="fake-code-block">Prob. Stat Sig</span> in earlier versions of FACTS. The parameters for the future trial can be modified from the default by clicking on the QOI’s row in the table.</li>
</ul>
</section>
<section id="default-target-doses" class="level4">
<h4 class="anchored" data-anchor-id="default-target-doses">Default Target Doses</h4>
<ul>
<li><p>The probability for each dose that it is the dose with the maximum response, <span class="fake-code-block">Pr(Max)</span>, previously referred to as <span class="fake-code-block"><span class="math inline">\(d_{max}\)</span></span> and <span class="fake-code-block">Ppn Max</span> in earlier versions of FACTS. When used to select a dose in a decision quantity the label <span class="fake-code-block">p… <span class="math inline">\(d\)</span> = Greatest Pr(MAX)</span> is used.</p></li>
<li><p>The probability for each dose that it is the minimum dose that is better than Control by the specified CSD, <span class="fake-code-block">Pr(MED relative to Control: Delta = <span class="math inline">\(\delta^*\)</span></span>, previously referred to as <span class="fake-code-block">Ppn (MED)</span> in earlier versions of FACTS. The CSD used for comparison is specified in the Evaluation Variables panel at the bottom of the QOI tab. When used to select a dose in a decision quantity the label <span class="fake-code-block"><span class="math inline">\(d\)</span>= Greatest Pr(MED relative to <em>Control/Active Comparator</em>: Delta = <span class="math inline">\(\delta^*\)</span>)</span> is used.</p></li>
<li><p>The minimum dose that gives a certain proportion of the maximum estimated response <span class="fake-code-block">Pr(EDq relative to Control: Quantile=<span class="math inline">\(Q\)</span>)</span>, previously referred to as <span class="fake-code-block">$d_{EDx}</span> and <span class="fake-code-block">Ppn(EDx)</span> in earlier versions of FACTS. The Effective Dose quantile to use can be modified by the clicking on QOI’s row in the table. When used to select a dose in a decision quantity <span class="fake-code-block">… <span class="math inline">\(d\)</span>=Greatest Pr(EDq relative to Control: Quantile=<span class="math inline">\(Q\)</span>)</span> is used.</p></li>
</ul>
<div id="fig-qois" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-qois-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image5.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-qois-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Execution &gt; Quantities of Interest tab overview.
</figcaption>
</figure>
</div>
<p>In each panel for each type of quantity, existing quantities can be deleted by clicking on the <img src="coreUGattachments/CoreUserGuide/media/image6.png" style="width:0.32292in;height:0.23958in"> at the end of the corresponding row. Each quantity’s definition can be displayed and edited (only edited for the default QOIs) by clicking on the row displaying the quantity’s definition. A new quantity can be defined by clicking on the bottom row of the corresponding panel labelled “Add…”.</p>
</section>
<section id="posterior-probabilities" class="level2">
<h2 class="anchored" data-anchor-id="posterior-probabilities">Posterior Probabilities</h2>
<p>These are Bayesian quantities to be calculated at each interim and at the final analysis.</p>
<div id="fig-addpostprob" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-addpostprob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image7.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-addpostprob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Add dichotomous posterior probabilities page.
</figcaption>
</figure>
</div>
<p>A Posterior Probability is specified by providing a value for each of the following:</p>
<ul>
<li><p>Compare:</p>
<ul>
<li><p>Continuous: Means</p></li>
<li><p>Dichotomous: Rates or Log-odds</p></li>
<li><p>Time-to-Event: Hazard Ratio or Hazard Rates.</p></li>
</ul></li>
<li><p>Condition: “&gt;” or “&lt;” a comparison value.</p></li>
<li><p>Relative to an absolute value or relative to the response on a <em>specific</em> dose.</p></li>
<li><p>The comparison can include a delta, which is the absolute value to be compared against if t the difference relative to the comparison arm is compared to. he comparison is absolute, or a value that</p></li>
</ul>
<p>The QOI will be given a “name” derived from these details and a short or Alternative name that will be used in the output files to allow easier access from other software, e.g.&nbsp;from within R.</p>
<p>If the endpoint is TTE and the design includes a predictor endpoint, then the definition of the QOI includes the specification of which endpoint it applies to.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Special Qualities of Posterior Probabilities in Time-to-Event
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>There are a couple of aspects of posterior probabilities that are slightly different for posterior probability QOIs.</p>
<p>First, in FACTS Core TTE a Posterior Probability QOI (a Bayesian comparison of estimates of response) can be used to compare Hazard Ratios or Hazard Rates. In their descriptions Hazard Ratio QOIs use “HR” (e.g. “HR<sub>d</sub> &lt; 1”) and Hazard Rate QOIs use <span class="math inline">\(\lambda\)</span> (e.g.&nbsp;“<span class="math inline">\(\lambda_d\)</span> &lt; <span class="math inline">\(\lambda_{control}\)</span>”). If there are hazard rate QOIs defined, then FACTS restricts the hazard model (defined on the Design &gt; Hazard Model tab) to use just a single segment (so that there is just one lambda to compare). This is set in the “Com are” box of the QOI definition window:</p>
<div id="fig-hazratesQOI" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hazratesQOI-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/tte/media/image38.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hazratesQOI-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Specifying a posterior probability QOI based on hazard rate.
</figcaption>
</figure>
</div>
<p>Additionally, in FACTS Core TTE when defining a Posterior Probability QOI (a Bayesian comparison of estimates of response) or a Target QOI (a Bayesian assessment of which treatment arm is most likely to fulfill a ‘target’ criteria) – the user can select whether the evaluation uses the Final Event endpoint, or the Predictor.</p>
<div id="fig-predictorposteriorprob" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-predictorposteriorprob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/tte/media/image39.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-predictorposteriorprob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Specifying a posterior probability QOI based on the predictor endpoint.
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<section id="notes-on-setting-deltas" class="level3">
<h3 class="anchored" data-anchor-id="notes-on-setting-deltas">Notes on setting Deltas</h3>
<p>For the three endpoint types, delta’s are defined as:</p>
<dl>
<dt>Continuous</dt>
<dd>
A CSD (Clinically Significant Difference) in the estimates of the mean response.
</dd>
<dt>Dichotomous</dt>
<dd>
A CSD in the estimate of the response rates if Rates is selected in the QOI, and of log-odds of the response rate if Log-odds is selected in the QOI.
</dd>
<dt>Time-to-Event</dt>
<dd>
A CSHRD (Clinically Significant Hazard Ratio Difference) in the estimate of the Hazard Ratio
</dd>
</dl>
<p>A standard hypothesis test for demonstrating superiority to control uses a delta of 0. Testing for superiority with a non-zero delta is different, and the implications need to be <span class="custom-tooltip"> carefully understood <span class="tooltip-text">Simulating its use in FACTS is a good way to achieve that understanding!</span> </span>. Where the term CSD is used in this document, it should be taken to refer to CSHRD as well unless it is specifically stated otherwise.</p>
<p>When setting a target treatment difference from control for the study to beat, it is also common to require a degree of confidence that the target has been beaten. To achieve posterior probabilities of &gt;50% that the target has been beaten, the estimated mean difference will have to be <strong>greater</strong> than the target difference.</p>
<p>Thus, when setting a delta, we are setting up two hurdles the study drug must beat, first the delta and then on top of that an additional margin to give a &gt;50% confidence that the margin has been beaten. Thus, it is necessary to avoid setting the target delta too large. A common mistake is to set the delta to the ‘expected difference’ (the value that might have been used in a conventional sample size calculation). In scenarios where the simulated response is equal to the ‘expected difference’ and hence the CSD this will give probabilities of being better than control by the delta of 50% on average, regardless of the sample size.</p>
<p>It is inadvisable to require a posterior probability of 50% that the response is better than the Control by the delta margin as this turns the test into one that simply depends on whether the point estimate of the response is better.</p>
<p>It is inadvisable to require posterior probability of less than 50% for success, as such criteria have the undesirable characteristic that they can be met in circumstances where it can be seen that if further data was gathered consistent with what has already been seen, it would lead the threshold no longer being met! The posterior distribution would shrink so that there was no longer sufficient of the tail above the CSD.</p>
<p>It is better therefore to use a delta that is less than the expected difference that it is hoped to achieve, somewhat like having a non-inferiority margin around the target. So, when the design is simulated with a response at the expected difference the target will be clearly exceeded. A useful default value to use for a delta is half the ‘expected difference’. This usually yields “comprehensible” probability thresholds for both success and futility.</p>
<p>Using a delta has benefits however – simply being better than control but for very small difference can be established simply by having large sample sizes. Being better than control by a delta establishes some confidence that there is some patient benefit. Use of a delta is also useful if otherwise success thresholds “well out in the tail” (e.g.&nbsp;&gt; 0.99) are required such as the equivalent of an early look in a conservative Group Sequential design. Though the use of a delta does mean that there is a less direct equivalence to a p-value.</p>
</section>
<section id="p-value-deltas" class="level3">
<h3 class="anchored" data-anchor-id="p-value-deltas">P-value Delta’s</h3>
<p>Separately from the CSD/CSHRD delta, with a continuous or dichotomous endpoint (but not time-to-event), a frequentist super-superiority/non-inferiority delta can be specified.</p>
<p>These use the same selection of super-superiority/non-inferiority as the CSD</p>
<div id="fig-bottomofqoi" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bottomofqoi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image8.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bottomofqoi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: The “Standard Evaluation Variables” options at the bottom of the QOI page.
</figcaption>
</figure>
</div>
<p>Currently, unlike the CSD delta that is only applied to the default posterior probability QOI and MED target QOI, the p-value delta is applied to <strong>all</strong> the p-value QOIs and it cannot be overridden.</p>
<p>The value of the p-value delta is constrained to be 0 or positive. The ‘direction’ of the delta depends then on the direction of the endpoint (whether “higher/lower is better” or “a response is a positive/negative outcome”).</p>
<table class="table">
<caption>
<p>
Super superiority and non-inferiority margin directions.
</p>
</caption>
<colgroup>
<col style="width: 25%">
<col style="width: 37%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>
</th>
<th>
Higher is better / Response is positive
</th>
<th>
Lower is better / Response is negative
</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>
Super-Superiority
</td>
<td>
Trt – Control &gt; delta
</td>
<td>
Trt – Control &lt; -delta
</td>
</tr>
<tr class="even">
<td>
Non-inferiority
</td>
<td>
Trt – Control &gt; -delta
</td>
<td>
Trt – Control &lt; delta
</td>
</tr>
</tbody>
</table>
</section>
<section id="p-value-comparisons-with-no-control-arm" class="level3">
<h3 class="anchored" data-anchor-id="p-value-comparisons-with-no-control-arm">P-value Comparisons with No Control Arm</h3>
<p>If no control arm is included p-values, with a continuous or dichotomous endpoint, the treatment response is compared to a fixed value. The fixed value is specified as “Frequentist <em>response/rate</em> to compare to for p-value QOIs:” in the Standard Evaluation Variables section at the bottom of the QOIs tab. It is not currently possible to compare different p-value QOIs to different fixed responses or rates.</p>
</section>
</section>
<section id="predictive-probabilities" class="level2">
<h2 class="anchored" data-anchor-id="predictive-probabilities">Predictive Probabilities</h2>
<p>There are two types of predictive probabilities –</p>
<ol type="1">
<li><p>Bayesian predictive probabilities, which are Bayesian predictions of frequentist outcomes and take into account the uncertainty around a set of parameters, and</p></li>
<li><p>Conditional Power, which aims to calculate the frequentist probability of success assuming a set of parameters to be true.</p></li>
</ol>
<p>The primary difference between the Bayesian predictive probabilities and the conditional power calculations is that the Bayesian predictive probabilities are calculated taking the variability around the estimated treatment effect into account, while the conditional power calculations assume that the observed test statistic of past data is the exact effect that future data will be generated from.</p>
<p>For both Bayesian predictive probabilities and conditional power, we differentiate two types, predicting the outcome in the current trial and predicting the outcome in a future trial.</p>
<section id="bayesian-predictive-probabilities" class="level3">
<h3 class="anchored" data-anchor-id="bayesian-predictive-probabilities">Bayesian predictive probabilities</h3>
<section id="current-trial-bayesian-predictive-probabilities" class="level4">
<h4 class="anchored" data-anchor-id="current-trial-bayesian-predictive-probabilities">Current Trial Bayesian Predictive Probabilities</h4>
<p>In the current trial, the outcome can be predicted under one of two assumptions:</p>
<ol type="1">
<li><p>That no new subjects are recruited, but all those who have been recruited are followed up until they are complete.</p></li>
<li><p>That the trial continues recruiting using the current allocation ratios until the trial maximum sample size is reached, and all subjects recruited are followed up until complete.</p></li>
</ol>
<p>Predictive probabilities currently can only predict outcomes based on p-values. Note that since p-values are only calculated as comparisons against a control arm, predictive probabilities of success in the current trial are only available if the current trial includes a control arm.</p>
<div id="fig-addpredprob" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-addpredprob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image9.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-addpredprob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Add dichotomous predictive probability of current trial.
</figcaption>
</figure>
</div>
<p>The user specifies how missingness is handled in the final analysis, the p-value test type – unadjusted, Bonferroni or <a href="#dunnett" title="Dunnett CW. A multiple comparison procedure for comparing several treatments with a control. Journal of the American Statistical Association. 1955; 50: 1096-1121.">Dunnett’s</a> and the (one sided) alpha level for the significance test. The QOI assumes that the specified default p-value delta is used in the final test.</p>
<p>The predictive probability of the current trial at the maximum sample size is only available:</p>
<ul>
<li>If the allocation is either fixed, or fixed with arm dropping, but not adaptive allocation.</li>
</ul>
<p>The predictive probability is calculated by simulating the remaining subjects, assuming their allocated at the current probabilities of allocation and simulating their final response based on the rate of response or (Normal) distribution of responses observed so far for each arm.</p>
<ul>
<li><p>Ignoring the possibility of the trial stopping or dropping an arm at a future interim</p></li>
<li><p>Ignoring the possibility of future subject drop-outs.</p></li>
</ul>
<p>There is one simulation of the remaining data per MCMC loop, potentially significantly increasing the time to perform the overall simulation of the trial.</p>
<p>If there is no data available on the arms involved in the Bayesian predictive probability calculation, FACTS will still perform the simulation of future subject outcomes based on posterior distribution. The posterior distribution for the arms with no available data will be the same as the user specified prior distribution.</p>
</section>
<section id="current-trial-bayesian-predictive-probabilities-time-to-event" class="level4">
<h4 class="anchored" data-anchor-id="current-trial-bayesian-predictive-probabilities-time-to-event">Current Trial Bayesian Predictive Probabilities – Time-to-Event</h4>
<p>Unlike the Continuous and Dichotomous endpoints, to predict the probability of success at full enrollment with a Time-to-Event endpoint, it is also necessary to simulate the accrual rate (and hence how many events might be observed).</p>
<div id="fig-addpredprobtte" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-addpredprobtte-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image10.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-addpredprobtte-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Add time-to-event predictive probability of current trial.
</figcaption>
</figure>
</div>
<p>For TTE, for a Predictive Probability of Success at Full Enrollment, there are new parameters to determine how accrual is modeled. There are 3 models for accrual</p>
<ul>
<li><p>Fixed Rate, the parameters for this are:</p>
<ul>
<li>The fixed (mean) accrual rate per week to simulate.</li>
</ul></li>
<li><p>Estimated from the Last ‘W’ Weeks accrual data, using a Poisson distribution, with a Gamma prior. The parameters for this are</p>
<ul>
<li><p>The number of past weeks W to use the accrual data from.</p></li>
<li><p>The prior mean for the model of the accrual rate</p></li>
<li><p>The weight of the prior</p></li>
</ul></li>
<li><p>Estimated from all the accrual data from the start of the trial, using a Poisson distribution, with a Gamma prior, the parameters for this are:</p>
<ul>
<li><p>The prior mean for the model of the accrual rate</p></li>
<li><p>The weight of the prior</p></li>
</ul></li>
</ul>
</section>
<section id="future-trial-bayesian-predictive-probabilities" class="level4">
<h4 class="anchored" data-anchor-id="future-trial-bayesian-predictive-probabilities">Future Trial Bayesian Predictive Probabilities</h4>
<p>For predictive probabilities for a future trial, a predictive probability of success in a subsequent phase 3 trial is estimated during the current trial. The probability of success in phase 3 is calculated for each study arm, based on the specification of the phase 3 trial given here of:</p>
<ul>
<li><p>whether the aim is to show superiority or non-inferiority,</p></li>
<li><p>the sample size per arm,</p></li>
<li><p>the required one-sided alpha,</p></li>
<li><p>and the super-superiority margin or non-inferiority margin (if any).</p></li>
</ul>
<p>Given these criteria, FACTS calculates the predicted probability of success of the subsequent trial for that endpoint assuming the estimate of the response on that endpoint, integrated over the uncertainty in those estimates. The conventional expected power of the specified future trial is calculated for the treatment effect in each MCMC sample and then averaged. This predicted probability of success can then be used in the stopping criteria and final evaluation criteria for the current trial.</p>
<p>This QOI is an extension of the “probability of success in phase 3” in earlier versions of FACTS – the difference now is that multiple different possible future trials can be specified in different QOIs and used for different decisions.</p>
<div id="fig-addpredprobfuture" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-addpredprobfuture-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image11.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-addpredprobfuture-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Add predictive probability of future trial non-inferiority.
</figcaption>
</figure>
</div>
<p>This predictive probability has the following parameters that must be specified:</p>
<ul>
<li><p>Whether the future trial will be for Superiority or Non-inferiority.</p></li>
<li><p>The size of the future trial in terms of the number of subjects on each arm.</p></li>
<li><p>The (one sided) alpha level that will be used to determine the significance of the trial.</p></li>
<li><p>The Super-superiority margin (if any) or the non-inferiority margin. The default p-value delta is <strong>not</strong> used for this QOI it is specified as part of the QOI and can be different from the default.</p></li>
</ul>
<p>As with all QOIs, the future trial predictive probability QOI will be given an alternative shorter name that can be used when accessing the output files from other software such as R.</p>
<p>If there is no data available on the arms involved in the Bayesian predictive probability calculation, FACTS will still calculate the predictive probability of the future trial being a success based on the estimated posterior distribution. The posterior distribution for the arms with no available data will be the same as the user specified prior distribution.</p>
</section>
</section>
<section id="conditional-power" class="level3">
<h3 class="anchored" data-anchor-id="conditional-power">Conditional Power</h3>
<p>Conditional power is currently available for Continuous and Dichotomous endpoints in Core and Staged Designs.</p>
<p>When creating a Conditional Power QOI, the first specification that must be made is whether the conditional power should be calculated for the current trial or for a hypothetical future trial. The two selections are fundamentally different.</p>
<p>The Current Trial conditional power takes the information collected in the trial so far, and assumes that for the remainder of the current trial the data collected has an effect equal to the point estimate of the already collected data. The previously collected trial data is then combined with hypothetical future data and weighted based on the amount of information that has been and will be observed by the end of the trial. The result is the probability that the current trial will reject the null hypothesis at a provided alpha level under the assumption that the future patients are generated from a population having a treatment effect exactly equal to the past data’s test statistic.</p>
<p>The Future Trial conditional power also uses the information accrued in the trial so far to calculate the assumed treatment effect moving forward, but assumes that a new study would be started that does not use the data from the current trial in its analysis. The new study is assumed to be a 1:1 randomized study if there is a control arm, and a single arm study if no control, with a sample size per arm, objective, and alpha level specified at the time of QOI creation.</p>
<p>If a conditional power is ever calculated for an arm with no final response data or against a control arm with no final response data, the conditional power will be called missing (-9999 in FACTS).</p>
<section id="current-trial-conditional-power" class="level4">
<h4 class="anchored" data-anchor-id="current-trial-conditional-power">Current Trial Conditional Power</h4>
<p>When creating a current trial conditional power, the missingness strategy, multiplicity adjustment, final sample size, and alpha level for the significance test must be specified.</p>
<div id="fig-condpowercurrent" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-condpowercurrent-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image12.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-condpowercurrent-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: Add a conditional power of the current trial QOI.
</figcaption>
</figure>
</div>
<section id="handle-missingness-using" class="level5">
<h5 class="anchored" data-anchor-id="handle-missingness-using">Handle missingness using:</h5>
<p>Missingness handling for a continuous endpoint can be specified as:</p>
<ul>
<li><p><strong>Ignore:</strong> subjects that are known dropouts are not included in the current or final sample size, and are not used to estimate the treatment effect.</p></li>
<li><p><strong>Last Observation Carried Forward (LOCF):</strong> subjects that are known dropouts have their last observed endpoint value assumed to be their final endpoint. Subjects with no early observed data are ignored. Subjects that have data to carry forward are considered complete, and are used to estimate the current treatment effect.</p></li>
<li><p><strong>Baseline Observation Carried Forward (BOCF):</strong> subjects that are known dropouts have their baseline value assumed to be their final endpoint. They are included in the current information as complete subjects and are used to estimate the current treatment effect. BOCF is only available for the continuous endpoint and when simulating baseline for subjects.</p></li>
<li><p><strong>Failure:</strong> subjects that are known dropouts are assumed to have a negative outcome at their final visit. If responses are good, the subject is a non-response, and if responses are bad, the subject is a responder. Failure is only available for dichotomous endpoints.</p></li>
</ul>
</section>
<section id="test-type" class="level5">
<h5 class="anchored" data-anchor-id="test-type">Test Type</h5>
<p>The test type can either be Unadjusted or Bonferroni. An unadjusted test will always use the specified alpha level in the significance test. The Bonferroni adjustment will divide the specified alpha value by the number of non-control arms enrolling in the study in the enrolment period leading up to the current analysis time.</p>
</section>
<section id="sample-size" class="level5">
<h5 class="anchored" data-anchor-id="sample-size">Sample Size:</h5>
<p>The current trial conditional power can be calculated at two different future time points.</p>
<ol type="1">
<li><p><strong>Current Enrollment</strong>: That no new subjects are recruited, but all those who have been recruited are followed up until they are complete.</p></li>
<li><p><strong>Trial Maximum</strong>: That the trial would continue recruiting subjects using the current allocation ratios until the trial maximum sample size is reached, and all subjects recruited are followed up until they have the opportunity to complete.</p></li>
</ol>
</section>
<section id="one-sided-alpha" class="level5">
<h5 class="anchored" data-anchor-id="one-sided-alpha">One-sided Alpha</h5>
<p>The threshold that the current trial would have to be less than in order to be considered a success. The success/futility values specified in the design tab are not used in the conditional power calculation. This value may be adjusted by the “Test type:” input.</p>
</section>
<section id="super-superiority-non-inferiority-margin-for-p-value" class="level5">
<h5 class="anchored" data-anchor-id="super-superiority-non-inferiority-margin-for-p-value">Super-Superiority (Non-inferiority) margin for p-value:</h5>
<p>This value cannot be changed on the QOI pop-up. It’s instead modified at the bottom of the QOI page. The objective of the current trial cannot be different for each individual current trial conditional power QOIs.</p>
</section>
<section id="additional-notes" class="level5">
<h5 class="anchored" data-anchor-id="additional-notes">Additional Notes</h5>
<p>Currently, conditional power will always assume that there is no correction applied to combine the different p-values from the analysis timepoints, i.e.&nbsp;no combination test is used.</p>
<p>The conditional power of the current trial at the maximum sample size is only available if the allocation is either fixed, or fixed with arm dropping, but not adaptive allocation or deterministic allocation.</p>
<p>Conditional power for the current trial is calculated</p>
<ul>
<li><p>Ignoring the possibility of the trial stopping or dropping an arm at a future interim</p></li>
<li><p>Ignoring the possibility of future subject drop-outs.</p></li>
</ul>
</section>
</section>
<section id="future-trial-conditional-power" class="level4">
<h4 class="anchored" data-anchor-id="future-trial-conditional-power">Future Trial Conditional Power</h4>
<p>Conditional power of a future trial is reduced to a power calculation for a future trial, given the current frequentist estimates of treatment effect and standard deviation and a set of assumptions for the future trial, such as sample sizes, hypothesis to be tested, and significance levels to be used.</p>
<p>The test type of the future trial can be set to Superiority or Non-inferiority. If the superiority or non-inferiority margin is set to 0, then both types of tests simplify to traditional tests of superiority with no margin. If a non-zero margin is set, then the future trial must meet the success criteria indicated by the test type and the margin. The margin cannot be negative, but a super superiority test with a margin of -0.5 is equivalent to a non-inferiority test with a margin of 0.5.</p>
<p>The subjects per arm dictates how many subjects would be enrolled on each arm in the future study. If there is a control arm in the current trial, then the future trial is assumed to be randomized 1:1 between the active arm and the control. If there is no control arm in the current study, then the future trial is a single arm trial testing against the performance goal specified in the Freq. Comparison Response box in the QOI creation pop-up.</p>
<p>The One-sided Alpha is the significance level of the final analysis test of the future trial. The future trial is assumed to have 1 active arm, so there are no adjustments to the alpha level available.</p>
<p>The superiority margin or non-inferiority margin indicate the amount that the active arm must be better/not worse than the control arm by. If there is no control arm then this is the Freq Comparison response, which is the value that the active arms must be significantly better than in order to be declared a success. The frequentist margin for p-value QOIs on the QOI tab is not used for Future conditional power calculations – the future trial can have a different objective than the current trial.</p>
<div id="fig-condpowerfuture" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-condpowerfuture-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image13.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-condpowerfuture-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: Add a conditional power of a future trial QOI.
</figcaption>
</figure>
</div>
</section>
<section id="technical-aspects-of-conditional-power-calculations" class="level4">
<h4 class="anchored" data-anchor-id="technical-aspects-of-conditional-power-calculations">Technical Aspects of Conditional Power Calculations</h4>
<p>The conditional power calculations in FACTS are all calculated similarly to <a href="#jennisonturnbull" title="Jennison, C., &amp; Turnbull, B.W. (1999). Group Sequential Methods with Applications to Clinical Trials (1st ed.). Chapman and Hall/CRC. https://doi.org/10.1201/9780367805326">Jennison and Turnbull</a>.</p>
<p>For continuous endpoint conditional power calculations, the conditional power of the future trial is calculated using a pooled standard deviation from all arms. For dichotomous conditional power calculations, each arm has its own standard deviation based on the MLE estimate of its proportion. These decision result in the conditional power tests matching how standard p-value QOIs are calculated for continuous and dichotomous endpoints.</p>
<p>The following sections will provide formulae to calculate the conditional power in the case where there is a control arm. Simplifications for when the arm is being compared to a fixed value rather than a control arm are trivial: information fractions are only a function of the active arm standard deviation and the test statistic does not have a second sample mean subtracted from the active arm.</p>
<p>The value of <span class="math inline">\(\delta\)</span>, which can be a non-inferiority margin or a super superiority margin, is always positive coming out of FACTS. To make the math more concise we can define a couple of coefficients for the <span class="math inline">\(\delta\)</span> term that allow it to be used without re-writing formulas for different hypothesis test setups. If high values of the endpoint are good, then <span class="math inline">\(s_1 = 1\)</span>, and if low values of the endpoint are good, then <span class="math inline">\(s_1=−1\)</span>. If the specified <span class="math inline">\(\delta\)</span> is a non-inferiority margin, then <span class="math inline">\(s_2 = 1\)</span>, and if it’s a super superiority margin then <span class="math inline">\(s_2=-1\)</span>.</p>
<section id="continuous-conditional-power-for-the-current-trial" class="level5">
<h5 class="anchored" data-anchor-id="continuous-conditional-power-for-the-current-trial">Continuous Conditional Power for the Current Trial</h5>
<p>Let t be the interim index that the conditional power is being computed at, and T be the time of the analysis that the conditional power is being computed for. Then <span class="math inline">\(Z_k\)</span> is the test statistic of the data collected up to the current interim analysis in the study, <span class="math inline">\(I_k\)</span> is the information level at the time of the interim analysis, and <span class="math inline">\(I_K\)</span> is the information level at the end of the study that the conditional power is being calculated for.</p>
<p>Let arm 1 be the control and arm 2 be the active arm, <span class="math inline">\(\bar{x_{it}}\)</span> be the sample mean of arm <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>, <span class="math inline">\(\widehat{\sigma_{i}^{2}}\)</span> be the sample variance of arm <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>, <span class="math inline">\(n_{it}\)</span> be the number of subjects with complete known final data on arm <span class="math inline">\(i\)</span> at interim analysis <span class="math inline">\(t\)</span>, and <span class="math inline">\(n_{iT}\)</span> be the number of subjects with complete known final data on arm <span class="math inline">\(i\)</span> at the time that conditional power is being calculated for. The pooled variance estimate is <span class="math inline">\(\widehat{\sigma^{2}} = \sum_{d = 1}^{D}\widehat{\frac{\sigma_{d}^{2}}{n_{dt}}}\)</span> where D is the total number of arms in the study.</p>
<p>Then,</p>
<p><span class="math display">\[I_{t} = \left( \frac{\widehat{\sigma^{2}}}{n_{1t}} + \widehat{\frac{\sigma^{2}}{n_{2t}}} \right)^{-1}\]</span></p>
<p><span class="math display">\[I_{T} = \left( \frac{\widehat{\sigma^{2}}}{n_{1T}} + \widehat{\frac{\sigma^{2}}{n_{2T}}} \right)^{-1}\]</span></p>
<p><span class="math display">\[Z_{t} = \left( {\overline{x}}_{2t} - {\overline{x}}_{1t} + s_{1}s_{2}\delta \right)\sqrt{I_{t}}\]</span></p>
<p>where <span class="math inline">\(\delta\)</span> is the non-inferiority or super superiority margin.</p>
<p>Then for a one-sided alpha level of <span class="math inline">\(\alpha\)</span>, let <span class="math inline">\(Z_{1-\alpha}\)</span> be the critical value corresponding to <span class="math inline">\(\alpha\)</span>.</p>
<p>If <strong>high values of the endpoint are good,</strong> the conditional power of the <strong>current</strong> trial is:</p>
<p><span class="math display">\[CP_{T} = \Phi\left( \frac{Z_{t}\sqrt{I_{t}} - z_{1 - \alpha}\sqrt{I_{T}} + ({\overline{x}}_{2t} - {\overline{x}}_{1t} + s_{2}\delta)\left( I_{T} - I_{t} \right)}{\sqrt{I_{T} - I_{t}}} \right)\]</span></p>
<p>If <strong>low values of the endpoint are good</strong>, the conditional power of the <strong>current</strong> trial is:</p>
<p><span class="math display">\[CP_{T} = \Phi\left( \frac{{- Z}_{t}\sqrt{I_{t}} - z_{1 - \alpha}\sqrt{I_{T}} - ({\overline{x}}_{2t} - {\overline{x}}_{1t} - s_{2}\delta)\left( I_{T} - I_{t} \right)}{\sqrt{I_{T} - I_{t}}} \right)\]</span></p>
</section>
<section id="calculation-of-continuous-conditional-power-for-a-future-trial" class="level5">
<h5 class="anchored" data-anchor-id="calculation-of-continuous-conditional-power-for-a-future-trial">Calculation of Continuous Conditional Power for a Future Trial</h5>
<p>Most of the future trial conditional power calculation is the same as the above current trial conditional power. There are some simplifications.</p>
<p><span class="math inline">\({\overline{x}}_{it}\)</span> and <span class="math inline">\(\widehat{\sigma_{i}^{2}}\)</span> are the same as in the current conditional power calculation. <span class="math inline">\(I_t\)</span>, the weight of the current trial Z-score, is set to 0. <span class="math inline">\(I_T\)</span> is now the information at the end of the future trial, and is calculated as:</p>
<p><span class="math display">\[I_{T} = \left( \frac{\widehat{\sigma^{2}}}{n_{T}} + \widehat{\frac{\sigma^{2}}{n_{T}}} \right)^{- 1}\]</span></p>
<p>where <span class="math inline">\(n_T\)</span> is the sample size per arm in the future trial and again <span class="math inline">\(\widehat{\sigma^{2}}\)</span> is the pooled variance.</p>
<p>If <strong>high values of the endpoint are good,</strong> the conditional power of a <strong>future</strong> trial is:</p>
<p><span class="math display">\[CP_{T} = \Phi\left( \frac{- z_{1 - \alpha}\sqrt{I_{T}} + ({\overline{x}}_{2t} - {\overline{x}}_{1t} + s_{2}\delta)\left( I_{T} \right)}{\sqrt{I_{T}}} \right)\]</span></p>
<p>If <strong>low values of the endpoint are good</strong>, the conditional power of a <strong>future</strong> trial is:</p>
<p><span class="math display">\[CP_{T} = \Phi\left( \frac{- z_{1 - \alpha}\sqrt{I_{T}} - ({\overline{x}}_{2t} - {\overline{x}}_{1t} - s_{2}\delta)\left( I_{T} \right)}{\sqrt{I_{T}}} \right)\]</span></p>
</section>
<section id="calculation-of-dichotomous-conditional-power-for-the-current-trial" class="level5">
<h5 class="anchored" data-anchor-id="calculation-of-dichotomous-conditional-power-for-the-current-trial">Calculation of Dichotomous Conditional Power for the Current Trial</h5>
<p>The dichotomous conditional power calculations are similar in spirit to the continuous conditional power calculations. One substantial difference is in how the dichotomous conditional power tests handle a non-inferiority or super superiority margin, <span class="math inline">\(\delta\)</span>. The method of calculating an appropriate test statistic for a frequentist hypothesis test is not obvious when the null scenario has a non-zero <span class="math inline">\(\delta\)</span>.</p>
<p>When there is no margin, the estimate for each treatment is simply based on the observed response proportion&nbsp;<span class="math inline">\(\widehat{p_{i}}\)</span> for arm <span class="math inline">\(i\)</span>, and the test statistic for a comparison of the control arm, <span class="math inline">\(c\)</span>, with dose <span class="math inline">\(d\)</span> is the usual Wald test</p>
<p><span class="math display">\[Z_{d} = \frac{\widehat{p_{d}} - \widehat{p_{c}}}{\sqrt{\frac{\widehat{p_{d}}(1 - \widehat{p_{d}})}{n_{d}} + \frac{\widehat{p_{c}}(1 - \widehat{p_{c}})}{n_{c}}}}\]</span></p>
<p>When there is a margin, FACTS uses the Farrington-Manning Likelihood Score test statistic to estimate quantities <span class="math inline">\(\widetilde{p_{d}}\)</span> and <span class="math inline">\(\widetilde{p_{c}}\)</span> based on the MLEs of the arm proportions governed by the constraint that <span class="math inline">\(\widetilde{p_{d}} - \widetilde{p_{c}} = - s_{1}s_{2}\delta\)</span>. These constrained MLE estimates are used in the standard error of the test statistic. The FM test statistic is then,</p>
<p><span class="math display">\[Z_{FM,d} = \frac{\widehat{p_{d}} - \widehat{p_{c}} + s_{1}s_{2}\delta}{\sqrt{\frac{\widetilde{p_{d}}(1 - \widetilde{p_{d}})}{n_{d}} + \frac{\widetilde{p_{c}}(1 - \widetilde{p_{c}})}{n_{c}}}}\]</span></p>
<p>See the <a href="#pass" title="NCSS, LLC. Assurance for Non-Inferiority Tests for the Difference Between Two Proportions. In PASS Sample Size Software Documentation (pp. 289-1-289–31).">PASS documentation</a> or <a href="#sas" title="SAS Institute Inc. 2016. Base SAS® 9.4 Procedures Guide: Statistical Procedures, Sixth Edition. Cary, NC: SAS Institute Inc.">SAS documentation</a> for a complete description of the calculations that go into the FM test. In the SAS documentation, note that the FM test is the same as the Miettinen-Nurminen test without including the <span class="math inline">\(\frac{n}{n - 1}\)</span> variance correction. The FM test was used rather than the MN test because as <span class="math inline">\(\delta \rightarrow 0\)</span>, the FM test converges to the simple Wald test.</p>
<p>Once the test statistic has been resolved, the dichotomous conditional power for the current trial is calculated as follows. For calculating the conditional power for arm 2 compared to the control arm, called arm 1 without loss of generality, let <span class="math inline">\(I_t\)</span> be the current information amount and <span class="math inline">\(I_T\)</span> be the amount of information that the conditional power is being calculated for. Then,</p>
<p><span class="math display">\[I_{t} = \left( \frac{\widetilde{p_{1}}\left( 1 - \widetilde{p_{1}} \right)}{n_{1t}} + \frac{\widetilde{p_{2}}\left( 1 - \widetilde{p_{2}} \right)}{n_{2t}} \right)^{- 1}\]</span></p>
<p><span class="math display">\[I_{T} = \left( \frac{\widetilde{p_{1}}\left( 1 - \widetilde{p_{1}} \right)}{n_{1T}} + \frac{\widetilde{p_{2}}\left( 1 - \widetilde{p_{2}} \right)}{n_{2T}} \right)^{- 1}\]</span></p>
<p><span class="math display">\[Z_{t} = \left( \widehat{p_{2}} - \widehat{p_{1}} + s_{1}s_{2}\delta \right)*\sqrt{I_{t}}\]</span></p>
<p>where <span class="math inline">\(\delta\)</span> is the super superiority or non-inferiority margin, and <span class="math inline">\(n_{1t}\)</span> and <span class="math inline">\(n_{2t}\)</span> are current number of completers on the control and active arm, and <span class="math inline">\(n_{1T}\)</span> and <span class="math inline">\(n_{2T}\)</span> are the number of completers that will be on the control and active arm at time that the conditional power is being calculated for. Additionally, if there is no non-inferiority or super superiority margin <span class="math inline">\(\delta\)</span>, then all <span class="math inline">\(\widetilde{p_{*}}\)</span> values are equal to their corresponding <span class="math inline">\(\widehat{p_{*}}\)</span> values.</p>
<p>For a one-sided alpha level of <span class="math inline">\(\alpha\)</span>, let <span class="math inline">\(z_{1-\alpha}\)</span> be the critical value corresponding to <span class="math inline">\(\alpha\)</span>.</p>
<p>If <strong>high values of the endpoint are good,</strong> the conditional power of the <strong>current</strong> trial is:</p>
<p><span class="math display">\[CP_{T} = \Phi\left( \frac{Z_{t}\sqrt{I_{t}} - z_{1 - \alpha}\sqrt{I_{T}} + (\widehat{p_{2}} - \widehat{p_{1}} + s_{2}\delta)\left( I_{T} - I_{t} \right)}{\sqrt{I_{T} - I_{t}}} \right)\]</span></p>
<p>If <strong>low values of the endpoint are good</strong>, the conditional power of the <strong>current</strong> trial is:</p>
<p><span class="math display">\[CP_{T} = \Phi\left( \frac{{- Z}_{t}\sqrt{I_{t}} - z_{1 - \alpha}\sqrt{I_{T}} - (\widehat{p_{2}} - \widehat{p_{1}} - s_{2}\delta)\left( I_{T} - I_{t} \right)}{\sqrt{I_{T} - I_{t}}} \right)\]</span></p>
</section>
<section id="calculation-of-dichotomous-conditional-power-for-a-future-trial" class="level5">
<h5 class="anchored" data-anchor-id="calculation-of-dichotomous-conditional-power-for-a-future-trial">Calculation of Dichotomous Conditional Power for a Future Trial</h5>
<p>Most of the calculation quantities for the future trial conditional power are the same as the current trial conditional power. The only difference is that for the future trial conditional power we discard the influence of the current trial test statistic on the final analysis, so <span class="math inline">\(I_t=0\)</span>. Then the conditional power calculations become:</p>
<p>If <strong>high values of the endpoint are good,</strong> the conditional power of a <strong>future</strong> trial is:</p>
<p><span class="math display">\[CP_{T} = \Phi\left( \frac{- z_{1 - \alpha}\sqrt{I_{T}} + (\widehat{p_{2}} - \widehat{p_{1}} + s_{2}\delta)\left( I_{T} \right)}{\sqrt{I_{T}}} \right)\]</span></p>
<p>If <strong>low values of the endpoint are good</strong>, the conditional power of a <strong>future</strong> trial is:</p>
<p><span class="math display">\[CP_{T} = \Phi\left( \frac{- z_{1 - \alpha}\sqrt{I_{T}} - (\widehat{p_{2}} - \widehat{p_{1}} - s_{2}\delta)\left( I_{T} \right)}{\sqrt{I_{T}}} \right)\]</span></p>
</section>
</section>
</section>
</section>
<section id="p-values" class="level2">
<h2 class="anchored" data-anchor-id="p-values">P-values</h2>
<p>A p-value QOI simply allows the user to specify which test type to be used (unadjusted, Bonferroni, <a href="#dunnett" title="Dunnett CW. A multiple comparison procedure for comparing several treatments with a control. Journal of the American Statistical Association. 1955; 50: 1096-1121.">Dunnett’s</a>, or Trend Test), and how missing data is to be handled (ignored, LOCF, <span class="custom-tooltip"> BOCF <span class="tooltip-text">Only if continuous endpoint and baseline is being simulated.</span> </span>, and <span class="custom-tooltip"> missing is failure <span class="tooltip-text">Dichotomous endpoint only.</span> </span>). If a control arm is present, p-values are comparisons against the control arm. If there is no control arm present, p-value QOIs are comparisons against a fixed response or fixed rate that is specified at the bottom of the QOI tab (it cannot be set differently for separate QOIs).</p>
<p>Note that for dichotomous endpoints p-value are calculated using the Test of Proportions, this test statistic asymptotically approaches a normal distribution, and at least <span class="custom-tooltip"> 5 success and 5 failures <span class="tooltip-text">Sometimes this is said to be 10 and 10, or 15 and 15. Your rule of thumb can be based on your comfort level for allowing CLT to kick in.</span> </span> should be observed for this to be reasonable.</p>
<p>The p-values are calculated including the default frequentist delta that has been specified at the bottom of the screen. The delta margin cannot be modified as part of the QOI, the value of the delta and nature of the test is the same for all the p-value QOIs.</p>
<p>In a TTE design with a predictor, the p-values are only calculated for the final event endpoint, not the predictors.</p>
<div id="fig-pvalueqoi" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pvalueqoi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image14.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pvalueqoi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;11: Add a p-value QOI.
</figcaption>
</figure>
</div>
<section id="p-values-when-there-is-no-control-arm" class="level3">
<h3 class="anchored" data-anchor-id="p-values-when-there-is-no-control-arm">P-values when there is no control arm</h3>
<p>If there is no control arm (not currently an option in Time-to-Event), the p-value delta is instead interpreted as the objective response or response rate to compare to. The option to set the trial type is also disabled (“Superiority” is selected and the “non-inferiority option is greyed out). For a non-inferiority trial comparing to an objective response or response rate simply use the objective rate minus the non-inferiority delta (if a higher response is better) or the objective rate plus the non-inferiority delta (if a lower response is better).</p>
<p>It is currently only possible to have one objective rate to compare against.</p>
<p>The same objective rate will be used for the target p-value test in the predictive probabilities.</p>
<div id="fig-qoinocontrol" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-qoinocontrol-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image15.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-qoinocontrol-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;12: The Core Dichotomous engine QOI tab when no control arm is included.
</figcaption>
</figure>
</div>
</section>
<section id="fisher-exact-test" class="level3">
<h3 class="anchored" data-anchor-id="fisher-exact-test">Fisher-Exact Test</h3>
<p>When specifying the QOIs for a dichotomous endpoint in a trial with a control arm, the bottom of the QOI tab allows the user to specify what statistical test to use when calculating p-values. Options are “Normal approximation” (default) and “Fisher exact test”. “Normal approximation” uses a t-test and should yield similar results to a Chi-Square test without continuity correction, while “Fisher exact test” uses an exact Fisher’s exact test for 2x2 tables.</p>
<p>If “Fisher exact test” is chosen as the test type, all p-value QOIs will use a Fisher’s exact test, except for future trial predictive probabilities, which will still use a t-test.</p>
<p>If “Fisher exact test” is chosen as the test type, only “Bonferroni” and “Unadjusted” are available as multiplicity corrections and any QOIs previously created using different multiplicity corrections will be deleted.</p>
<p>“Fisher exact test” is not available for non-inferiority comparisons.</p>
<div id="fig-qoifisherexact" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-qoifisherexact-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image16.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-qoifisherexact-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13: The Core Dichotomous engine QOI tab showing the Fisher exact test selected on the bottom.
</figcaption>
</figure>
</div>
</section>
</section>
<section id="target-doses" class="level2">
<h2 class="anchored" data-anchor-id="target-doses">Target Doses</h2>
<p>The target dose QOIs are Bayesian posterior probabilities based on MCMC sampling of how often each dose meets the specified target criteria. There are 3 types of target specifiable</p>
<ul>
<li><p>Max – the dose with the maximum response, this has no parameters to specify, so is available as a pre-defined default QOI.</p></li>
<li><p>MED – a Minimum Effective Dose, the lowest dose that has a response better than an absolute or relative target.</p></li>
<li><p>EDq – an effective dose, the dose that achieves a specified proportion (quantile <span class="math inline">\(q\)</span>) of the maximum improvement in response relative to an absolute value or the performance of a specific treatment arm.</p></li>
</ul>
<div id="fig-targetqoi" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-targetqoi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image17.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-targetqoi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;14: Add a probability of being target QOI.
</figcaption>
</figure>
</div>
</section>
<section id="decision-quantities" class="level2">
<h2 class="anchored" data-anchor-id="decision-quantities">Decision Quantities</h2>
<p>The QOIs described so far have defined values to be calculated across all doses. For a Success/Futility decision to be made it is necessary to specify the treatment arm whose QOI value is to be used in comparison to the success and/or futility criteria. This selection can be done by specifying a specific arm, but normally it is specified by using a “Probability of being Target” selection criteria. A simple and common example is “The probability of the response being better than that of the Control of the Treatment arm with the maximum response”:</p>
<div id="fig-decqoipostprob" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-decqoipostprob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image18.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-decqoipostprob-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;15: Add a decision quantity QOI for the posterior probability of benefit over the control arm.
</figcaption>
</figure>
</div>
<div id="fig-decqoimed" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-decqoimed-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image19.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-decqoimed-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;16: Add a decision quantity QOI for the minimum effective dose.
</figcaption>
</figure>
</div>
<p>A decision QOI consists of (1) a QOI that has been calculated for each dose, and (2) a method of choosing a dose to use the QOI value of. Choosing the dose can be done either by using a target Dose QOI like <span class="fake-code-block">Pr(Max)</span>, <span class="fake-code-block">Pr(EDq…)</span>, etc, by choosing the dose with the highest or lowest value of a QOI, or by explicitly choosing a dose level in advance.</p>
<p>As an example using a target QOI, you can imagine evaluating a decision QOI that is specified to choose the probability of being better than Control by 2 units <span class="fake-code-block">Pr(<span class="math inline">\(\theta_d - \theta_0 &gt; 2\)</span>)</span> based on the arm with the highest ED90 <span class="fake-code-block">EDq relative to control; Quantile 0.9</span>.</p>
<p>Instead of a Target Dose QOI, it is also possible to specify a specific dose, or to use the terms “Max probability over all doses” and “Min probability over all doses” which mean that the dose with the minimum or maximum value of the per dose QOI is used. This enables:</p>
<ul>
<li><p>Decisions QOIs testing specific doses, for example by defining a Posterior probability QOI that compares all doses against the lowest dose, and then a Decision QOI using that posterior probability with the highest dose selected as the target dose it is possible to based decisions on the posterior probability that the highest dose is better than the lowest dose.</p></li>
<li><p>A Decision QOI using “Max probability over all doses” allows a decision to be based on whether a probability or p-value is greater than a threshold at any dose, or less than a threshold at all doses.</p></li>
<li><p>A Decision QOI using “Min probability over all doses” allows a decision to be based on whether a probability or p-value is less than a threshold for any dose or greater than a threshold at all doses.</p></li>
</ul>
<p>There is one special case: if the QOI chosen is the Trend Test p-value, then because this is not actually a per-dose value, only one “Target dose” can be selected: “Overall Significance”.</p>
</section>
<section id="standard-evaluation-variables" class="level2">
<h2 class="anchored" data-anchor-id="standard-evaluation-variables">Standard Evaluation Variables</h2>
<p>These 2 parameters are used across some of the default QOIs and hence specified outside the normal QOI dialog boxes.</p>
<ul>
<li><p>The CSD value</p></li>
<li><p>and whether absolute or relative to the Control arm</p></li>
</ul>
<p>these are used in both the default “Pr(CSD)” and the “MED relative to Control” QOIs.</p>
<div id="fig-sev" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sev-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="coreUGattachments/CoreUserGuide/media/image20.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sev-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;17: Standard Evaluation Variables for specifying the clinically significant difference (CSD) and the default QOI comparison type.
</figcaption>
</figure>
</div>
<p>Note that the CSD value here is designed to be usually entered as a positive value, as in earlier versions of FACTS. Its sign is automatically adjusted if “lower score means subject improvement” or if the trial is a non-inferiority trial.</p>
<p>These adjustments are <strong>not</strong> made for other user entered QOIs. The directions of comparison both for the definition of the probability to be calculated and the comparison of the resulting probability with a threshold are under the user’s control, as are whether delta’s are negative or positive. This allows the user to define QOIs in whatever fashion is natural to them and their team.</p>
<section id="the-direction-of-comparison-for-default-qois" class="level3">
<h3 class="anchored" data-anchor-id="the-direction-of-comparison-for-default-qois">The direction of comparison for default QOIs</h3>
<p>Note that as a result of being able to specify whether a higher or lower response represents improvement, and whether the aim is superiority or non-inferiority, the CSD or the NIM must always be a positive value. FACTS will automatically determine which direction is appropriate (e.g.&nbsp;if <strong><em>lower</em></strong> values are subject improvement, the engine will realize a CSD will need to be <strong><em>subtracted</em></strong> from the control score before comparing with the estimate of response on a treatment arm).</p>


</section>
</section>

</main> <!-- /main -->
<footer style="display: flex; justify-content: space-between; align-items: center;">
  <!-- Left side: Copyright -->
  <p style="margin: 0;">
    © <span id="year"></span>
    <a href="https://www.berryconsultants.com">Berry Consultants</a>
  </p>

  <!-- Right side: Relative link -->
  <p style="margin: 0;">
    <a href="../../../../introduction/citation.html">How to Cite</a>
  </p>
</footer>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>