<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Virtual Subject Response - Continuous Endpoint</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../">
<link href="../../../../../media/FACTS_icon.png" rel="icon" type="image/png">
<script src="../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #125740;
      }
</style>
<link rel="preconnect" href="https://fonts.googleapis.com">

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">



<!-- Roboto Serif -->

<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:wght@400;700&amp;display=swap" rel="stylesheet">



<!-- Roboto Sans -->

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet">
<!-- Google tag (gtag.js) -->

<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WLMVE7GR4S"></script>

<script>

  window.dataLayer = window.dataLayer || [];

  function gtag(){dataLayer.push(arguments);}

  gtag('js', new Date());



  gtag('config', 'G-WLMVE7GR4S');

</script>


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../../media/FACTSLogo.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../introduction/index.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../../../../documentation/index.html" aria-current="page"> 
<span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../concepts/index.html"> 
<span class="menu-text">Concepts</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../get/index.html"> 
<span class="menu-text">Get FACTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../contact/index.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Version 7.1</li><li class="breadcrumb-item"><a href="../../../../../documentation/v71/userguides/core/index.html">User Guides</a></li><li class="breadcrumb-item"><a href="../../../../../documentation/v71/userguides/core/index.html">Phase II &amp; III Designs</a></li><li class="breadcrumb-item"><a href="../../../../../documentation/v71/userguides/core/vsr/index.html">Virtual Subject Response</a></li><li class="breadcrumb-item"><a href="../../../../../documentation/v71/userguides/core/vsr/continuous.html">Continuous</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Version 7.1</li><li class="breadcrumb-item"><a href="../../../../../documentation/v71/userguides/core/index.html">User Guides</a></li><li class="breadcrumb-item"><a href="../../../../../documentation/v71/userguides/core/index.html">Phase II &amp; III Designs</a></li><li class="breadcrumb-item"><a href="../../../../../documentation/v71/userguides/core/vsr/index.html">Virtual Subject Response</a></li><li class="breadcrumb-item"><a href="../../../../../documentation/v71/userguides/core/vsr/continuous.html">Continuous</a></li></ol></nav>
      <h1 class="title">Virtual Subject Response - Continuous Endpoint</h1>
            <p class="subtitle lead">Description of how to specify the virtual subject response for continuous endpoints.</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta column-body">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Documentation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Version 7.1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">User Guides</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../../documentation/v71/userguides/core/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Phase II &amp; III Designs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Study</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/study/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/study/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/study/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/study/multendpt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Endpoint</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../../documentation/v71/userguides/core/vsr/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Virtual Subject Response</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth4 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/vsr/continuous.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/vsr/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/vsr/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/vsr/multendpt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Endpoint</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/execution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Execution</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../../documentation/v71/userguides/core/qois/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quantities of Interest</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/qois/multendpt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Endpoint QOIs</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../../documentation/v71/userguides/core/design/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Design</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/design/doseresponse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dose Response Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/design/frequentistanalysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frequentist Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../../documentation/v71/userguides/core/longitudinalmodels/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Longitudinal Models</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth5 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/longitudinalmodels/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/longitudinalmodels/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/design/allocation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Allocation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/design/interims.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interims</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/design/successfutility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Success/Futility Criteria</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false">
 <span class="menu-text">Modelling for Time-to-Event Endpoints</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth5 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/longitudinalmodels/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictor Model</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/design/hazardmodel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hazard Model</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../../documentation/v71/userguides/core/simulation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simulation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/simulation/contanddichot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous/Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/simulation/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/simulation/multendpt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Endpoint</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/core/analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/staged.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Seamless Designs</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../../documentation/v71/userguides/enrichment/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Enrichment Designs</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="false">
 <span class="menu-text">Study</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/study/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/study/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/study/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false">
 <span class="menu-text">Virtual Subject Response</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/vsr/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/vsr/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/vsr/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/execution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Execution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Design</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../../documentation/v71/userguides/enrichment/simulation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simulation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/simulation/continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/simulation/dichotomous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dichotomous</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/simulation/tte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-to-Event</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/enrichment/analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/platform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Platform Trials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/crm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CRM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3+3 / mTPI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/2dcrm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2D-CRM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/dr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Design Report</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/flfll.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FLFLL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/v71/userguides/FACTSfromR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS from R</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../../documentation/versions/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Release Notes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-15" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" role="navigation" aria-expanded="false">
 <span class="menu-text">FACTS 7 Release Notes</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-16" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v7/facts720.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 7.2.0 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v7/facts711.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 7.1.1 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v7/facts710.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 7.1.0 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v7/facts700.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 7.0.0 Release Notes</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" role="navigation" aria-expanded="false">
 <span class="menu-text">FACTS 6 Release Notes</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-17" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v6/facts650.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 6.5.0 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v6/facts641.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 6.4.1 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v6/facts640.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 6.4.0 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v6/facts630.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 6.3.0 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v6/facts625.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 6.2.5 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v6/facts624.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 6.2.4 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v6/facts620.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 6.2.0 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v6/facts616.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 6.1.6 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v6/facts610.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 6.1.0 Release Notes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/v6/facts600.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS 6.0.0 Release Notes</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../documentation/versions/roadmap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS Roadmap</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#explicitly-defined-continuous-response" id="toc-explicitly-defined-continuous-response" class="nav-link active" data-scroll-target="#explicitly-defined-continuous-response">Explicitly Defined Continuous Response</a>
  <ul>
  <li><a href="#dose-response" id="toc-dose-response" class="nav-link" data-scroll-target="#dose-response">Dose Response</a>
  <ul class="collapse">
  <li><a href="#load-scenario-means-from-file" id="toc-load-scenario-means-from-file" class="nav-link" data-scroll-target="#load-scenario-means-from-file">Load Scenario Means From File</a></li>
  </ul></li>
  <li><a href="#longitudinal-vsr" id="toc-longitudinal-vsr" class="nav-link" data-scroll-target="#longitudinal-vsr">Longitudinal VSR</a>
  <ul class="collapse">
  <li><a href="#correlated-simulation-of-longitudinal-data" id="toc-correlated-simulation-of-longitudinal-data" class="nav-link" data-scroll-target="#correlated-simulation-of-longitudinal-data">Correlated Simulation of Longitudinal Data</a></li>
  <li><a href="#hierarchical-model" id="toc-hierarchical-model" class="nav-link" data-scroll-target="#hierarchical-model">Hierarchical model</a></li>
  <li><a href="#hierarchical-mmrm-model" id="toc-hierarchical-mmrm-model" class="nav-link" data-scroll-target="#hierarchical-mmrm-model">Hierarchical (MMRM) model</a></li>
  <li><a href="#integrated-two-component-prediction-itp-simulation-of-longitudinal-data" id="toc-integrated-two-component-prediction-itp-simulation-of-longitudinal-data" class="nav-link" data-scroll-target="#integrated-two-component-prediction-itp-simulation-of-longitudinal-data">Integrated Two Component Prediction (ITP) Simulation of Longitudinal Data</a></li>
  </ul></li>
  <li><a href="#baseline-vsr" id="toc-baseline-vsr" class="nav-link" data-scroll-target="#baseline-vsr">Baseline VSR</a></li>
  </ul></li>
  <li><a href="#external-files-vsr" id="toc-external-files-vsr" class="nav-link" data-scroll-target="#external-files-vsr">External Files VSR</a>
  <ul>
  <li><a href="#required-format-of-externally-simulated-detail" id="toc-required-format-of-externally-simulated-detail" class="nav-link" data-scroll-target="#required-format-of-externally-simulated-detail">Required Format of Externally Simulated Detail</a></li>
  <li><a href="#external-directory-of-files" id="toc-external-directory-of-files" class="nav-link" data-scroll-target="#external-directory-of-files">External Directory of Files</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-body" id="quarto-document-content">





<p>In FACTS Core with a continuous endpoint there are 2 different ways to specify the virtual subject response:</p>
<ol type="1">
<li><p>Explicit specification of the continuous endpoint</p></li>
<li><p>Importation of an externally generated set of simulated subject results.</p></li>
</ol>
<section id="explicitly-defined-continuous-response" class="level1">
<h1>Explicitly Defined Continuous Response</h1>
<p>Explicitly defined VSRs are the most common type specified in FACTS. In continuous endpoint designs, an explicitly defined VSR is specified by providing a mean response and patient level standard deviation of the response for each arm in the trial. In certain cases, based on the selections made in the Study Info tab, baseline VSRs and Longitudinal VSRs may also need to be specified.</p>
<section id="dose-response" class="level2">
<h2 class="anchored" data-anchor-id="dose-response">Dose Response</h2>
<div id="fig-expdrc" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-expdrc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../coreUGattachments/continuous/media/image21.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-expdrc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: The Explicitly Defined &gt; Dose Response model for a continuous endpoint.
</figcaption>
</figure>
</div>
<p>Dose response profiles can be added and deleted, and for each profile the user specifies:</p>
<ol type="1">
<li><p>The mean response for each treatment arm. If baseline is being simulated the user can select (on the Study tab) whether the response to be analyzed is <span class="custom-tooltip"> the change from baseline or absolute response <span class="tooltip-text">The mean response to be analyzed is always as specified on this tab, if the analysis is on change from baseline then the response specified here is change from baseline, if the response to be analyzed is absolute, then the response specified here is the absolute final score.</span> </span>, and depending on that selection the response specified on this tab is either change from baseline or absolute response.</p></li>
<li><p>The standard deviation of the response – either through a common SD of response for all treatment arms, or by specifying the standard deviation for the response on each treatment arm separately.</p></li>
<li><p>A check box that allows the user to specify whether a specific arm “should succeed” in that scenario.FACTS uses this value to report on the proportion of simulations that were successful <strong>and</strong> selected a ‘good’ treatment arm. The check box values do not effect the simulation code, just how output is reported.</p></li>
</ol>
<p>The graph on the Explicitly Defined &gt; Dose Response tab shows the mean response specified for each treatment arm +/- 1.96 SD, and the control response + the default <span class="custom-tooltip"> CSD <span class="tooltip-text">Clinically significant difference</span> </span> level specified on the QOI tab.</p>
<p>If a 2D treatment arm model is being used, the doses are listed in “effective dose strength order” as was defined on the treatment arm tab.</p>
<div id="fig-expdrc2d" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-expdrc2d-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../coreUGattachments/continuous/media/image22.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-expdrc2d-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: The Explicitly Defined &gt; Dose Response tab when using a 2D treatment arm model.
</figcaption>
</figure>
</div>
<section id="load-scenario-means-from-file" class="level4">
<h4 class="anchored" data-anchor-id="load-scenario-means-from-file">Load Scenario Means From File</h4>
<p>If the “Load scenario means from a file” option is selected, then in scenarios using this profile the simulations will use a range of dose responses instead of what is specified in the table.</p>
<p>Each individual simulation uses one set of mean responses from the supplied file, each row being used in an equal number of simulations. The summary results are thus averaged over all the VSRs in the file. The use of this form of simulation is somewhat different from simulations using a single rate or single external virtual subject response file. When all the simulations are simulated from a single version of the ‘truth’ then the purpose of the simulations is to analyse the performance of the design under that specific circumstance. When the simulations are based on a range of ‘truths’ then the summary results show the expected probability of the different outcomes for the trial over that range of possible circumstance. Note that, to give different VSRs different weights of expectation, the more likely VSRs should be repeated within the file.</p>
<div id="fig-expmeansfromfile" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-expmeansfromfile-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../coreUGattachments/continuous/media/image23.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-expmeansfromfile-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: The Explicitly Defined &gt; Dose Response tab when loading scenario means from a file.
</figcaption>
</figure>
</div>
<p>After selecting the “.mvsr” file the graph shows the individual mean responses and the overall mean response over all the VSRs.</p>
<p>The format of the file is a simple CSV text file. Lines starting with a ‘#’ character are ignored so the file can include comment and header lines. There must be two columns per treatment arm giving the mean and SD of the change from baseline on each arm, the columns must be grouped first means then SDs and within each group they must be in dose index order. E.g.:</p>
<pre><code>#Cntrl, D1, D2, D3, Cntrl, D1, D2, D3
-1, -1, -1, -1, 5, 5, 5, 5
-1, -1.2, -1.4, -1.6, 5, 5, 5, 5
-1, -1.8, -2.5, -2.5, 5, 5, 5, 5
-1, -2, -2.5, -3, 5, 5, 5, 5
-1, -2.5, -3.25, -3.25, 5, 5, 5, 5
-1, -2.5, -3.25, -2.5, 5, 5, 5, 5</code></pre>
</section>
</section>
<section id="longitudinal-vsr" class="level2">
<h2 class="anchored" data-anchor-id="longitudinal-vsr">Longitudinal VSR</h2>
<p>The explicitly defined virtual subject longitudinal responses can be specified with any of 3 methods. No matter which longitudinal VSR simulation method is selected, it can be combined with any Dose Response VSR, and the dose response VSR is <span class="custom-tooltip"> guaranteed to have the marginal distribution <span class="tooltip-text">Unless Use Baseline Adjustment for Subject Response is specified in the Baseline VSR tab.</span> </span> specified in the dose response VSR section. The longitudinal VSR determines how to correlate early endpoint values with the final endpoint value.</p>
<p>The three longitudinal VSRs available for continuous endpoints are:</p>
<ol type="1">
<li><p>Correlated</p></li>
<li><p>Hierarchical, which comes in two ‘flavors’:</p>
<ol type="a">
<li><p>Hierarchical (as in versions of FACTS prior to 6.1): the per subject random element ‘delta’ is scaled at visit ‘t’ by the response fraction f<sub>t</sub> at that visit.</p></li>
<li><p>Hierarchical MMRM (first available in FACTS 6.1): the per subject random element ‘delta’ is the same at all visits.</p></li>
</ol></li>
<li><p>ITP</p></li>
</ol>
<section id="correlated-simulation-of-longitudinal-data" class="level3">
<h3 class="anchored" data-anchor-id="correlated-simulation-of-longitudinal-data">Correlated Simulation of Longitudinal Data</h3>
<p>The <em>Correlated</em> method for generating longitudinal responses simulates the response observed at each visit by summing 3 elements – a fraction of the final response, a fraction of the ‘noise’ from the previous observation, and additional element of noise at the current visit.</p>
<div id="fig-longcorrelated" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-longcorrelated-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../coreUGattachments/continuous/media/image24.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longcorrelated-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: The Longitudinal VSR tab when specifying the Correlated continuous longitudinal VSR.
</figcaption>
</figure>
</div>
<p>The user specifies:</p>
<dl>
<dt><span class="math inline">\(\rho_{t}\)</span></dt>
<dd>
the correlation in the observation at visit <span class="math inline">\(t\)</span> with visit <span class="math inline">\(t - 1\)</span>. Values should be in the range 0-1. The closer to 1, the greater the correlation between visit <span class="math inline">\(t - 1\)</span> and visit <span class="math inline">\(t\)</span>. The <span class="math inline">\(\rho\)</span> at Visit 1 is not enterable, because there is no previous visit to correlate the first visit value with.
</dd>
<dt><span class="math inline">\(f_{t}\)</span></dt>
<dd>
the fraction of the final mean response <span class="math inline">\(\mu_{j}\)</span> seen at visit <span class="math inline">\(t\)</span>. Values can lie outside the range 0-1.
</dd>
<dt><span class="math inline">\(\varphi_{t}^{2}\)</span></dt>
<dd>
the fraction of the final standard deviation (SD) that will be observed at this visit. Values must be <span class="math inline">\(&gt;0\)</span>. An additional element of noise at visit <span class="math inline">\(t\)</span> is sampled so that in combination with the noise carried forward from visit <span class="math inline">\(t - 1\)</span>, the overall variance in observations at visit <span class="math inline">\(t\)</span> will have this fraction of the final variance.
</dd>
</dl>
<p>For the first visit of patient <span class="math inline">\(i\)</span>, the response <span class="math inline">\(y_{i,1}\)</span> assuming patient <span class="math inline">\(i\)</span> was randomized to dose <span class="math inline">\(j\)</span> is simulated as:</p>
<p><span class="math display">\[y_{i,1}\ \sim\ N\left( \mu_{j,1},\sigma_{j,1}^{2} \right)\]</span></p>
<p>For time points after the first visit, observed data is simulated as:</p>
<p><span class="math display">\[y_{i,t}\ \sim\ \mu_{j,t} + \sqrt{1 - \rho_{t}^{2}}N\left( 0,\sigma_{j,t}^{2} \right) + \rho_{t}\left( y_{i,t - 1} - \mu_{j,t - 1} \right)\frac{\sigma_{j,t}}{\sigma_{j,t - 1}} \text{   for } t \geq 2.\]</span></p>
<p>There are 3 components of this equation. First, is the marginal mean of the response at the particular visit <span class="math inline">\(t\)</span>. This parameter is called <span class="math inline">\(\mu_{j,t}\)</span>. <span class="math inline">\(\mu_{j,t}\)</span> is simply the dose response at the final endpoint times the proportion of the final effect that should be observed at visit <span class="math inline">\(t\)</span>.</p>
<p><span class="math display">\[\mu_{j,t} = f_{t}\mu_{j}\]</span></p>
<p>where <span class="math inline">\(f_{t}\)</span> is input as the response fraction for each visit, and <span class="math inline">\(\mu_{j}\)</span> is the dose response for dose <span class="math inline">\(j\)</span>, which is input as the Response for each dose on the Dose Response tab.</p>
<p>The second component controls the adjustment of the variance based on the correlation of the endpoint to be sampled with the previous visit’s response. A strong correlation (<span class="math inline">\(\rho_{t}\)</span> close to <span class="math inline">\(\pm 1\)</span>) results in a variance reduction term <span class="math inline">\(\sqrt{1 - \rho_{t}^{2}}\)</span> close to 0, which guarantees that the time <span class="math inline">\(t\)</span> response is very close to the time <span class="math inline">\(t - 1\)</span> response. The variance reduction term modifies a dose’s marginal visit variance <span class="math inline">\(\sigma_{j,t}^{2}\)</span>. This dose by visit variance is calculated by squaring the marginal standard deviation for a dose’s final endpoint response <span class="math inline">\(\sigma_{j}\)</span> times the proportion of the total variance that is observed at visit <span class="math inline">\(t\)</span>, <span class="math inline">\(\phi_{t}\)</span>, which is a user input on the Longitudinal VSR tab.</p>
<p>So, <span class="math inline">\(\sigma_{j,t}^{2} = \phi_{t}^{2}\sigma_{j}^{2}\)</span> where <span class="math inline">\(\phi_{t}\)</span> is the fraction of final SD specified in the Longitudinal VSR tab in FACTS, and <span class="math inline">\(\sigma_{j}\)</span> is the SD of the response specified in the Dose Response VSR tab in FACTS.</p>
<p>The final component of the model adjusts the mean of the visit <span class="math inline">\(t\)</span> response that is to be simulated based on the residual of the time <span class="math inline">\(t - 1\)</span> response. This component is:</p>
<p><span class="math display">\[\rho_{t}\left( y_{i,t - 1} - \mu_{j,t - 1} \right)\frac{\sigma_{j,t}}{\sigma_{j,t - 1}}\]</span></p>
<p>Values of <span class="math inline">\(\rho_{t}\)</span> close to 1 lead to visit <span class="math inline">\(t\)</span> responses with Z-scores similar to the visit <span class="math inline">\(t - 1\)</span> responses, values of <span class="math inline">\(\rho_{t}\)</span> close to 0 lead to simulation of visit <span class="math inline">\(t\)</span> responses with no regard to the previous visit’s residual value, and values of <span class="math inline">\(\rho_{t}\)</span> close to -1 lead to visit <span class="math inline">\(t\)</span> responses with Z-scores that are -1 times the previous visit’s Z-score.</p>
<p>The specification of the visit level means <span class="math inline">\(\mu_{j,t}\ \)</span>and variances <span class="math inline">\(\sigma_{j,t}^{2}\)</span> as response fractions and fractions of final SD, respectively, allows for each created longitudinal VSR to work with every created Dose Response VSR.</p>
</section>
<section id="hierarchical-model" class="level3">
<h3 class="anchored" data-anchor-id="hierarchical-model">Hierarchical model</h3>
<p>The hierarchical method for generating longitudinal responses simulates the response observed by sampling responses from a Normal distribution, where the mean is a combination of the mean final response of the treatment and a per-subject difference, scaled by a visit dependent coefficient, and the variance is a fraction of the variance of the final treatment effect.</p>
<p>This Hierarchical form of this model has a per-subject random effect parameter <span class="math inline">\(\delta_{i}\)</span> that is scaled down by the response scaling parameter <span class="math inline">\(f_{t}\)</span>. In the very similar Hierarchical (MMRM) model (described below), the random effect <span class="math inline">\(\delta_{i}\)</span> is not scaled by <span class="math inline">\(f_{t}\)</span>, so it provides a constant adjustment to all visits.</p>
<div id="fig-longhiermmrm" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-longhiermmrm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../coreUGattachments/continuous/media/image25.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longhiermmrm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: The Longitudinal VSR tab when specifying the Hierarchical (MMRM) continuous longitudinal VSR.
</figcaption>
</figure>
</div>
<p>In the Hierarchical longitudinal subject data simulation model, the response variance is decomposed into two components. One is the within-subject variability (called intra-subject variability), and the other is across-subject variability (Called inter-subject variability). The parameter <span class="math inline">\(\omega\)</span> determines how much of the total variability is simulated in the inter- and intra-subject variabilities. More variability in the inter-subject simulation means that there is less variability in the intra-subject simulation, so the early visit endpoints will be more correlated with the final visit endpoint, and vice versa.</p>
<p>The parameters of the Hierarchical longitudinal subject data simulation model are:</p>
<dl>
<dt><span class="math inline">\(\omega\)</span></dt>
<dd>
the fraction of the variance of the final response (<span class="math inline">\(\sigma_{j}^{2}\)</span>) on the treatment arm that will be simulated in the inter-subject variance. The higher this value is, the more predictive a subject’s early observations are of their final outcome.
</dd>
<dt><span class="math inline">\(f_{t}\)</span></dt>
<dd>
the fraction of the final mean response <span class="math inline">\(\mu_{j}\)</span> seen at visit <span class="math inline">\(t\)</span>. Values can lie outside the range 0-1.
</dd>
<dt><span class="math inline">\(\phi_{jt}^{2}\)</span></dt>
<dd>
the fraction of the final endpoint variance that will be observed at this visit. Values must be <span class="math inline">\(&gt;0\)</span> and must be such that <span class="math inline">\(\phi_{jt}^{2} - f_{t}^{2}\omega\)</span> is <span class="math inline">\(&gt;0\)</span>.
</dd>
</dl>
<p>Observation <span class="math inline">\(y_{it}\)</span> is the visit response at visit <span class="math inline">\(t\)</span> for a subject <span class="math inline">\(i\)</span> that was randomized from dose <span class="math inline">\(j\)</span>. The observation is generated from the distribution described by:</p>
<p><span class="math display">\[y_{i,t} = f_{t}\left( \mu_{j} + \delta_{i} \right) + N\left( {0,\ \left( \phi_{jt}^{2} - f_{t}^{2}\omega \right)\ \sigma}_{j}^{2} \right)\]</span></p>
<p>where <span class="math inline">\(\sigma_{j}^{2}\)</span> is the variance of the final endpoint response for dose <span class="math inline">\(j\)</span>, <span class="math inline">\(\phi_{jt}^{2}\)</span> is the fraction of total variance observed at visit <span class="math inline">\(t\)</span> on dose <span class="math inline">\(j\)</span>, <span class="math inline">\(\mu_{j}\)</span> is the final endpoint response mean for dose <span class="math inline">\(j\)</span>, <span class="math inline">\(\delta_{i}\)</span> is a subject level random effect, <span class="math inline">\(f_{t}\)</span> is the fraction of the final endpoint response that is observed at visit <span class="math inline">\(t\)</span>, and <span class="math inline">\(\omega\)</span> is the proportion of overall variance due to intersubject (across subject) variability.</p>
<p>The prior for the patient random effect term of patient <span class="math inline">\(i\)</span> who was randomized to dose <span class="math inline">\(j\)</span> is</p>
<p><span class="math display">\[\delta_{ij}\ \sim\ N\left( 0,\ \omega\sigma_{j}^{2} \right)\]</span></p>
<p>If <span class="math inline">\(\omega\)</span> is close to 1, then most of the variability in the responses comes from differences in participants and the visit-to-visit correlation within a participant’s follow-up is high. If <span class="math inline">\(\omega\)</span> is close to 0, then there is little correlation between visits within a participant’s follow-up, and most of the overall variance comes from noise in the within patient responses, rather than differences across patients. In other words, large values of <span class="math inline">\(\omega\)</span> lead to early data that is more predictive of the final endpoint.</p>
<p>Note that, in this model the response fraction <span class="math inline">\(f_{t}\)</span> is multiplied by both the final endpoint mean and the patient level random effect. This results in the variance of the dose <span class="math inline">\(j\)</span> response at visit <span class="math inline">\(t\)</span> being <span class="math display">\[{\left( \phi_{jt}^{2} - f_{t}^{2}\omega \right)\sigma}_{j}^{2} + f_{t}^{2}\omega\sigma_{j}^{2} = \phi_{jt}^{2}\sigma_{j}^{2}.\]</span></p>
<p>Additionally, since <span class="math inline">\(f_{t}\)</span> changes the proportion of the overall variance that comes from the random effect, the simulated correlation between visits decreases when values of <span class="math inline">\(f_{t}\)</span> less than 1 are provided. See the MMRM version of the Hierarchical simulation model if this is undesirable.</p>
<p>If all <span class="math inline">\(\phi_{jt}^{2} = 1\)</span> and <span class="math inline">\(f_{t} = 1\)</span>, then the visits will have pairwise correlations equal to <span class="math inline">\(\omega\)</span>. If the <span class="math inline">\(\phi_{jt}^{2}\)</span> or <span class="math inline">\(f_{t}\)</span> are less than 1, then the visit pairwise correlations will depend on the input variance fractions <span class="math inline">\(\phi_{jt}^{2}\)</span> and <span class="math inline">\(f_{t}\)</span>.</p>
</section>
<section id="hierarchical-mmrm-model" class="level3">
<h3 class="anchored" data-anchor-id="hierarchical-mmrm-model">Hierarchical (MMRM) model</h3>
<p>The Hierarchical (MMRM) longitudinal patient simulation model is very similar to the Hierarchical simulation method, except that in the MMRM version the response fraction for a visit does not modify the patient level random effect. The user inputs for the Hierarchical (MMRM) model are nearly identical to the plain Hierarchical model.</p>
<dl>
<dt><span class="math inline">\(\omega\)</span></dt>
<dd>
the fraction of the variance of the final response on the treatment arm (<span class="math inline">\(\sigma_{j}^{2}\)</span>) that will be simulated in the inter-subject variance. The higher this value is, the more predictive a subject’s early observations are of their final outcome.
</dd>
<dt><span class="math inline">\(f_{t}\)</span></dt>
<dd>
the fraction of the final mean response <span class="math inline">\(\mu_{j}\)</span> seen at visit <span class="math inline">\(t\)</span>. Values can lie outside the range 0-1.
</dd>
<dt><span class="math inline">\(\phi_{jt}^{2}\)</span></dt>
<dd>
the fraction of the final endpoint variance that will be observed at this visit for dose <span class="math inline">\(j\)</span>, values must be &gt;0 and must be such that <span class="math inline">\(\phi_{jt}^{2} - \omega\)</span> &gt; 0.
</dd>
</dl>
<p>The Hierarchical MMRM method simulates responses at visit <span class="math inline">\(t\)</span> for a subject <span class="math inline">\(i\)</span> that was randomized to dose <span class="math inline">\(j\)</span> from the distribution:</p>
<p><span class="math display">\[y_{i,t} = f_{t}\mu_{j} + \delta_{i} + N\left(0,\ \left( \phi_{jt}^{2} - \omega \right)\ \sigma_{j}^{2} \right)\]</span>.</p>
<p>where <span class="math inline">\(\sigma_{j}^{2}\)</span> is the variance of the final endpoint response for dose <span class="math inline">\(j\)</span>, <span class="math inline">\(\phi_{jt}^{2}\)</span> is the fraction of total variance observed at visit <span class="math inline">\(t\)</span> on dose <span class="math inline">\(j\)</span>, <span class="math inline">\(\mu_{j}\)</span> is the final endpoint response mean for dose <span class="math inline">\(j\)</span>, <span class="math inline">\(\delta_{i}\)</span> is a subject level random effect, <span class="math inline">\(f_{t}\)</span> is the fraction of the final endpoint response that is observed at visit <span class="math inline">\(t\)</span>, and <span class="math inline">\(\omega\)</span> is the proportion of overall variance due to intersubject (across subject) variability.</p>
<p>The prior for the patient random effect term of patient <span class="math inline">\(i\)</span> who was randomized to dose <span class="math inline">\(j\)</span> is</p>
<p><span class="math display">\[\delta_{ij}\ \sim\ N\left( 0,\ \omega\sigma_{j}^{2} \right)\]</span></p>
<p>If <span class="math inline">\(\omega\)</span> is close to 1, then most of the variability in the responses comes from differences in participants and the visit-to-visit correlation within a participant’s follow-up is high. If <span class="math inline">\(\omega\)</span> is close to 0, then there is little correlation between visits within a participant’s follow-up, and most of the overall variance comes from noise in the within patient responses rather than differences across patients. In other words, large values of <span class="math inline">\(\omega\)</span> lead to early data that is more predictive of the final endpoint.</p>
<p>Note that, in this model the response fraction <span class="math inline">\(f_{t}\)</span> is multiplied by only the final endpoint mean and not the patient level random effect. This results in the variance of the dose <span class="math inline">\(j\)</span> response at visit <span class="math inline">\(t\)</span> being <span class="math display">\[{\left( \phi_{jt}^{2} - \omega \right)\sigma}_{j}^{2} + \omega\sigma_{j}^{2} = \phi_{jt}^{2}\sigma_{j}^{2}.\]</span></p>
<p>This total variance is the same as the non MMRM Hierarchical method, but only the <span class="math inline">\(\phi_{jt}^{2}\)</span> parameter effects the variance of early endpoint responses. If all <span class="math inline">\(\phi_{jt}^{2} = 1\)</span>, then the visits will have pairwise correlations equal to <span class="math inline">\(\omega\)</span>. If the <span class="math inline">\(\phi_{jt}^{2}\)</span> are less than 1, then the visit pairwise correlations will be larger than <span class="math inline">\(\omega\)</span>, with the exact value depending on the input variance fractions <span class="math inline">\(\phi_{jt}^{2}\)</span>.</p>
</section>
<section id="integrated-two-component-prediction-itp-simulation-of-longitudinal-data" class="level3">
<h3 class="anchored" data-anchor-id="integrated-two-component-prediction-itp-simulation-of-longitudinal-data">Integrated Two Component Prediction (ITP) Simulation of Longitudinal Data</h3>
<p>The ITP method for generating longitudinal responses simulates the response observed at each visit by summing 3 elements and scaling them by an exponential function. The 3 elements are: the mean final response, an element of inter-subject variability, and a residual variability at the current visit.</p>
<div id="fig-longitp" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-longitp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../coreUGattachments/continuous/media/image26.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longitp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: The Longitudinal VSR tab when specifying the ITP continuous longitudinal VSR.
</figcaption>
</figure>
</div>
<p>The user specifies</p>
<dl>
<dt><span class="math inline">\(\omega_{j}\)</span></dt>
<dd>
fraction (for each dose) of the variance of the final response on the treatment arm (<span class="math inline">\(\sigma_{j}^{2}\)</span>) used for the inter-subject variance. The higher this value is, the more predictive a subject’s early observations are of their final outcome.
</dd>
<dt><span class="math inline">\(k_{j}\)</span></dt>
<dd>
the shape parameter (for each dose) of the exponential component governing the increase in the observed response. The values of <span class="math inline">\(k\)</span> should be scaled to take into account the length of time (in weeks) to the intermediate and final visits. See below for more intuition on sensible values of <span class="math inline">\(k\)</span>.
</dd>
</dl>
<p>For subject <span class="math inline">\(i\)</span> at visit <span class="math inline">\(t\)</span>, who was randomized to dose <span class="math inline">\(j\)</span>, the response <span class="math inline">\(y_{it}\)</span> is simulated as:</p>
<p><span class="math display">\[y_{it} = \left( \mu_{j} + s_{i} + \epsilon_{it} \right)\left( \frac{1 - \text{exp}\left( k_{j}x_{t} \right)}{1 - \text{exp}\left( k_{j}x_{T} \right)} \right)\]</span></p>
<p>where <span class="math inline">\(\mu_{j}\)</span> is the mean of the final endpoint on dose <span class="math inline">\(j\)</span>, <span class="math inline">\(s_{i}\sim N\left( 0,\ \omega_{j}\sigma_{j}^{2} \right)\)</span> is a subject specific random effect, each <span class="math inline">\(\epsilon_{it}\sim N\left( 0,{\ \sigma}_{j}^{2}\left( 1 - \omega_{j} \right) \right)\)</span> is a residual error, <span class="math inline">\(k_{d}\)</span> is a shape parameter, <span class="math inline">\(x_{t}\)</span> are the visit times that the <span class="math inline">\(y_{it}\)</span> are observed, and <span class="math inline">\(x_{T}\)</span> is the time of the final endpoint.</p>
<p>The ITP model implies that the variance of the observations shrinks towards 0 with the mean (so early visits have reduced expected responses and variances).</p>
<p>The shape parameter <span class="math inline">\(k\)</span> determines the rate at which the final endpoint’s eventual effect is observed during a subject’s follow-up. A value of <span class="math inline">\(k = 0\)</span> indicates that the proportion of effect observed moves linearly with time. A value of <span class="math inline">\(k &lt; 0\)</span> means that the eventual final effect is observed earlier in follow-up and plateaus off as time moves towards the final endpoint. A value of <span class="math inline">\(k &gt; 0\)</span> indicates that less of the total final endpoint effect is observed early in follow up, but as time approaches the final endpoint time the proportion of the effect observed increases rapidly. Values of <span class="math inline">\(k\)</span> less than 0 tend to be more common than values of <span class="math inline">\(k\)</span> greater than 0. See the figure below for a collection of possible shapes of the change in response using different values of <span class="math inline">\(k\)</span>.</p>
<p>Additionally, unlike the Correlated or Hierarchical simulation methods, the ITP method uses the actual visit time to simulate subject values.</p>
<div id="fig-longitpplot" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-longitpplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../coreUGattachments/continuous/media/image27.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longitpplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: The relationship across intermediate visit means for different shape parameters <span class="math inline">\(k\)</span>.
</figcaption>
</figure>
</div>
</section>
</section>
<section id="baseline-vsr" class="level2">
<h2 class="anchored" data-anchor-id="baseline-vsr">Baseline VSR</h2>
<p>If simulation of baseline has been included on the Study &gt; Study Info tab, a new virtual subject response tab is available for specifying the baseline score.</p>
<div id="fig-baselineVSR" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-baselineVSR-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../coreUGattachments/continuous/media/image28.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-baselineVSR-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: The Baseline VSR tab with adjustment based on the baseline response turned on.
</figcaption>
</figure>
</div>
<p>The simulation of distribution of baseline scores is specified using a normal distribution with user specified mean and standard deviation, and optionally applied upper and lower bounds to reflect limitations on the score range or screening criteria. If the simulated baseline score is truncated, then the <strong><em>true</em></strong> mean and SD of the baseline are likely to be different from these values of the mean and SD which are before truncation.</p>
<p>If the response is chosen to be change from baseline on the Study Info tab, then the dose response VSR is specified as change from baseline, and the raw endpoint for a subject will actually be their baseline value plus their simulated change from baseline value. If the response is chosen to be Final endpoint value on the Study Info tab, then the dose response VSR specifies the direct distribution that the final endpoint will be sampled from, and changing the baseline distribution does not effect the final endpoint distribution.</p>
<p>Whether the final endpoint is change from baseline or final endpoint value, it is possible to adjust the final response based on the simulated baseline value. To do so, the user selects “Use Baseline Adjustment for Subject Response” and supplies 3 parameters:</p>
<dl>
<dt><span class="math inline">\(\beta\)</span></dt>
<dd>
a coefficient that reflects the degree of influence of baseline on final score and the degree of variability in the final score due to baseline.
</dd>
<dt>c</dt>
<dd>
a centering offset, typically the expected mean of the observed baseline scores
</dd>
<dt>s</dt>
<dd>
a scaling element, typically set to the expected SD of the baseline.
</dd>
</dl>
<p>Be aware that performing a baseline adjustment for subject response can change the marginal distribution of the dose response VSR.</p>
<section id="example" class="level5">
<h5 class="anchored" data-anchor-id="example">Example</h5>
<p>In the above screenshot a baseline of mean 25 and SD 10 has been specified for the distribution of the baseline values, so a centering of <span class="math inline">\(c=25\)</span> and scaling of <span class="math inline">\(s=10\)</span> is used. Wishing to simulate an overall SD of 5 in the final change from baseline and apportion two-thirds the variance to baseline, <span class="math inline">\(\beta\)</span> has been set as follows:</p>
<ul>
<li><p>The desired final variance is 25 (<span class="math inline">\(5^2\)</span>), divided into 1/3 dose response and 2/3 baseline effects.</p></li>
<li><p>The SD of the simulated response is set to <span class="math inline">\(\sqrt{\left( 25*\frac{1}{3} \right)} = 2.89\)</span></p></li>
<li><p>The SD of the scaled baseline score is 1, so to contribute half the final variance of 25, Beta is set to <span class="math inline">\(\sqrt{\left( 25*\frac{2}{3} \right)} = 4.08\)</span></p></li>
<li><p>Note that when simulating a baseline effect in this way, limiting the range of baseline by specifying upper and lower cut-offs – which might be natural limits of the endpoint, or due to inclusion / exclusion criteria in the protocol – can significantly reduce the variance in the final endpoint due to the baseline effect.</p></li>
</ul>
</section>
</section>
</section>
<section id="external-files-vsr" class="level1">
<h1>External Files VSR</h1>
<p>As well as simulating subject responses within FACTS they can be simulated externally, and imported into FACTS where the supplied responses are sampled from when simulating the trial. The selection of a file containing subject response data (which must be in the required format) can be done from the External Files sub-tab depicted below.</p>
<p>To import an external file, the user must first add a profile to the table. After adding the profile, the user must click “Browse” to locate the file of externally simulated data. The user will then be prompted to locate the external file on their computer with a dialog box.</p>
<p>As with other virtual subject responses, the user can specify which arms “should succeed” at the bottom of the tab.</p>
<div id="fig-extVSRcont" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-extVSRcont-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../coreUGattachments/continuous/media/image29.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-extVSRcont-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: The external VSR tab in the Core Continuous engine loading a single VSR from a file.
</figcaption>
</figure>
</div>
<section id="required-format-of-externally-simulated-detail" class="level3">
<h3 class="anchored" data-anchor-id="required-format-of-externally-simulated-detail">Required Format of Externally Simulated Detail</h3>
<p>The supplied data should be in the following format: an ascii file with data in comma separated value format with the following columns:</p>
<ol type="1">
<li><p>Patient id, these must be positive integers and unique</p></li>
<li><p>Arm Index (1 = Control, 2 = Treatment1, 3 = Treatment2, …)</p></li>
<li><p>Visit ID – visit index (1= first visit, 2= second visit, …). If baseline is included, then baseline is visit 0.</p></li>
<li><p>Response</p>
<ol type="a">
<li><p>If no baseline is included, then the response provided must be change from baseline</p></li>
<li><p>If baseline is included, then the response provided must be the absolute response (and the design engine will compute change from baseline or analyze the absolute response as specified by the user on the Study tab).</p></li>
</ol></li>
</ol>
<p>Subjects need to have unique, positive integer IDs, all records for each subject should be contiguous and in visit order.</p>
<p>The GUI requires that the file name has a “.dat” suffix.</p>
<p>Below are two examples of files providing externally simulated patient data for 3 subjects with 4 post baseline visits. The No Baseline tab of the table shows an example file for a trial that does not simulate the baseline value, and the With Baseline tab shows an example file for a trial that does simulate the baseline visit.</p>
<p>Note that the first line in both tabs contains column names, and that the row begins with a pound sign (#). This pound sign tells FACTS that it should not try to read that row in as data.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">No Baseline</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">With Baseline</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>#subj id, Arm ID, Visit ID, Response</p>
<p>1, 1, 1, 0.11<br>
1, 1, 2, 0.22<br>
1, 1, 3, 0.21<br>
1, 1, 4, 0.19<br>
2, 1, 1, 0.09<br>
2, 1, 2, 0.12<br>
2, 1, 3, 0.19<br>
2, 1, 4, 0.22<br>
3, 1, 1, 0.01<br>
3, 1, 2, 0.02<br>
3, 1, 3, 0.05<br>
3, 1, 4, 0.09<br>
</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>#subj id, Arm ID, Visit ID, Response</p>
<p>1, 1, 0, 0.06022<br>
1, 1, 1, 0.12045<br>
1, 1, 2, 0.24091<br>
1, 1, 3, 0.48183<br>
1, 1, 4, 0.60229<br>
2, 1, 0, -0.00586<br>
2, 1, 1, -0.01163<br>
2, 1, 2, -0.02327<br>
2, 1, 3, -0.04654<br>
2, 1, 4, -0.05817<br>
3, 1, 0, 0.01287<br>
3, 1, 1, 0.02574<br>
3, 1, 2, 0.05148<br>
3, 1, 3, 0.10296<br>
3, 1, 4, 0.12870<br>
</p>
</div>
</div>
</div>
</section>
<section id="external-directory-of-files" class="level3">
<h3 class="anchored" data-anchor-id="external-directory-of-files">External Directory of Files</h3>
<p>By using the ‘Browse for directory’ option, the user can specify a response profile that comprises a directory containing a number of external response files. Like the “scenario means in a file” option, the files in this directory will be used as a single profile, looping through the different files for successive simulations. So individual simulations will use a single external file from the directory, but the summary results for the scenario will be averaged over all the files, the number of simulations being round down to the nearest multiple of the number of external files in the directory. The format of each individual file should be the same as for a single external file, above. Only files with the “.dat” suffix will be read, other files will be ignored.</p>
<div id="fig-extVSRcontfromdir" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-extVSRcontfromdir-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../coreUGattachments/continuous/media/image30.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-extVSRcontfromdir-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: The external VSR tab, but using Browse for Directory to load multiple external VSRs.
</figcaption>
</figure>
</div>


</section>
</section>

</main> <!-- /main -->
<!-- footer.html -->



<!-- FontAwesome for icons -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-pF6W3...<truncated>...Q==" crossorigin="anonymous" referrerpolicy="no-referrer">



<style>



  /* Make all footer icons the same color */

  footer .fab,

  footer .fas,

  footer svg {

    color: #125740;           /* ← pick whatever color your share-icons are using */

    fill: currentColor;    /* ensures the SVG Bluesky icon matches */

  }



  /* Prevent links from overriding that color */

  footer a {

    color: inherit;

  }



  /* Share menu positioning */

  #share-wrapper { position: relative; }

  #share-menu {

    display: none;

    position: absolute;

    bottom: 3rem;               /* float above the footer */

    left: 50%;

    transform: translateX(-50%);

    background: white;

    padding: 0.5rem 1rem;

    border-radius: 0.5rem;

    box-shadow: 0 4px 12px #125740;

    gap: 1rem;

    z-index: 100;

  }

  body.menu-open #share-menu { display: flex; }

  #share-toggle {

    background: none;

    border: none;

    cursor: pointer;

    padding: 0;

  }



  /* Left column: text + social permalinks */

  .footer-left {

    display: flex;

    align-items: center;

    gap: 0.75rem;

    white-space: nowrap;

  }

  .footer-left p { margin: 0; }

  .footer-left a.social {

    color: inherit;

    text-decoration: none;

  }

  .footer-left a.social i { font-size: 1.2em; }

  

  

    /* Text color left */

  .footer-left p > a {

    color: #125740;

  }



  /* Text color last item */

  footer > p:last-child a {

    color: #125740;

  }

  

    /* Link hover colors */

  .footer-left p > a:hover,

  footer > p:last-child a:hover {

    color: #11A473;

    text-decoration: underline;

  }

  

</style>



<footer style="display: flex; justify-content: space-between; align-items: center; padding: 1rem 0;">

  

  <!-- Left: Berry Consultants + social permalinks -->

  <div class="footer-left">

    <p>

      © <a href="https://www.berryconsultants.com">Berry Consultants</a>

    </p>

    <a href="https://twitter.com/BerryConsultant" class="social" target="_blank" rel="noopener" aria-label="Berry Consultants on X">

      <i class="fab fa-x"></i>

    </a>

    <a href="https://www.linkedin.com/company/berry-consultants-llc" class="social" target="_blank" rel="noopener" aria-label="Berry Consultants on LinkedIn">

      <i class="fab fa-linkedin"></i>

    </a>

    <a href="https://www.youtube.com/c/berryconsultants" class="social" target="_blank" rel="noopener" aria-label="Berry Consultants on YouTube">

      <i class="fab fa-youtube"></i>

    </a>

  </div>



  <!-- Center: share toggle + popup -->

  <div id="share-wrapper">

    <button id="share-toggle" aria-label="Share this page">

      <i class="fas fa-share-alt" style="font-size:1.6em;"></i>

    </button>

    <div id="share-menu">

      <!-- share icons injected here -->

    </div>

  </div>



  <!-- Right: How to Cite -->

  <p style="margin: 0;">

    <a href="../../../../../introduction/citation.html">Cite</a>

  </p>

</footer>



<script>



  document.addEventListener("DOMContentLoaded", () => {

    const url   = encodeURIComponent(window.location.href);

    const title = encodeURIComponent(document.title);

    const networks = [

      { name: "X",        href: `https://twitter.com/intent/tweet?url=${url}&text=${title}`,          icon: `<i class="fab fa-x" style="font-size:1.4em;"></i>` },

      { name: "LinkedIn", href: `https://www.linkedin.com/feed/?shareActive=true&text=${title}%20${url}`, icon: `<i class="fab fa-linkedin" style="font-size:1.4em;"></i>` },

      { name: "Bluesky",  href: `https://bsky.app/intent/compose?text=${title}%20${url}`,              icon: `

        <svg width="1.4em" height="1.4em" fill="currentColor" viewBox="0 0 600 530">

          <path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"/>

        </svg>` },

      { name: "Reddit",   href: `https://www.reddit.com/submit?url=${url}&title=${title}`,         icon: `<i class="fab fa-reddit" style="font-size:1.4em;"></i>` },

      { name: "WhatsApp", href: `https://wa.me/?text=${title}%20${url}`,                             icon: `<i class="fab fa-whatsapp" style="font-size:1.4em;"></i>` },

      { name: "Email",    href: `mailto:?subject=${title}&body=${title}%20${url}`,                    icon: `<i class="fas fa-envelope" style="font-size:1.4em;"></i>` }

    ];



    // inject share icons

    const menu = document.getElementById("share-menu");

    networks.forEach(net => {

      const a = document.createElement("a");

      a.href      = net.href;

      a.target    = "_blank";

      a.rel       = "noopener";

      a.setAttribute("aria-label", `Share on ${net.name}`);

      a.innerHTML = net.icon;

      menu.appendChild(a);

    });



    // toggle menu

    const toggle = document.getElementById("share-toggle");

    toggle.addEventListener("click", e => {

      e.stopPropagation();

      document.body.classList.toggle("menu-open");

    });



    // close on outside click

    document.addEventListener("click", () => {

      document.body.classList.remove("menu-open");

    });

    menu.addEventListener("click", e => e.stopPropagation());

  });

</script>



<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/docs\.berryconsultants\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>