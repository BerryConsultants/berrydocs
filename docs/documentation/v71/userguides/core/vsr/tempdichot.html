<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>tempdichot</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../">
<link href="../../../../../media/FACTS_icon.png" rel="icon" type="image/png">
<script src="../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">

<!-- Roboto Serif -->
<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:wght@400;700&amp;display=swap" rel="stylesheet">

<!-- Roboto Sans -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet">


<link rel="stylesheet" href="../../../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../../media/FACTSLogo.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../introduction/index.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../documentation/index.html"> 
<span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../concepts/index.html"> 
<span class="menu-text">Concepts</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../notes/index.html"> 
<span class="menu-text">Field Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../versions/index.html"> 
<span class="menu-text">Versions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../get/index.html"> 
<span class="menu-text">Get FACTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../contact/index.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-summary-results-columns" id="toc-the-summary-results-columns" class="nav-link active" data-scroll-target="#the-summary-results-columns">The summary results columns</a>
  <ul class="collapse">
  <li><a href="#highlights" id="toc-highlights" class="nav-link" data-scroll-target="#highlights">Highlights</a></li>
  <li><a href="#allocation" id="toc-allocation" class="nav-link" data-scroll-target="#allocation">Allocation</a></li>
  <li><a href="#response" id="toc-response" class="nav-link" data-scroll-target="#response">Response</a></li>
  <li><a href="#observed" id="toc-observed" class="nav-link" data-scroll-target="#observed">Observed</a></li>
  <li><a href="#probabilities" id="toc-probabilities" class="nav-link" data-scroll-target="#probabilities">Probabilities</a></li>
  <li><a href="#model-parameters" id="toc-model-parameters" class="nav-link" data-scroll-target="#model-parameters">Model Parameters</a>
  <ul class="collapse">
  <li><a href="#qoi-columns" id="toc-qoi-columns" class="nav-link" data-scroll-target="#qoi-columns">QOI Columns</a></li>
  </ul></li>
  <li><a href="#contents-of-simulations_freq_missing.csv-weeks_freq_missing.csv" id="toc-contents-of-simulations_freq_missing.csv-weeks_freq_missing.csv" class="nav-link" data-scroll-target="#contents-of-simulations_freq_missing.csv-weeks_freq_missing.csv">Contents of Simulations_freq_&lt;missing&gt;.csv, Weeks_freq_&lt;missing&gt;.csv</a></li>
  <li><a href="#contents-of-patientsnnnnn.csv" id="toc-contents-of-patientsnnnnn.csv" class="nav-link" data-scroll-target="#contents-of-patientsnnnnn.csv">Contents of PatientsNNNNN.csv</a></li>
  <li><a href="#contents-of-mcmcnnnnn.csv" id="toc-contents-of-mcmcnnnnn.csv" class="nav-link" data-scroll-target="#contents-of-mcmcnnnnn.csv">Contents of MCMCNNNNN.csv</a>
  <ul class="collapse">
  <li><a href="#content-if-using-a-conventional-dichotomous-endpoint" id="toc-content-if-using-a-conventional-dichotomous-endpoint" class="nav-link" data-scroll-target="#content-if-using-a-conventional-dichotomous-endpoint">Content if using a conventional Dichotomous endpoint</a></li>
  <li><a href="#contents-if-using-a-restricted-markov-endpoint" id="toc-contents-if-using-a-restricted-markov-endpoint" class="nav-link" data-scroll-target="#contents-if-using-a-restricted-markov-endpoint">Contents if using a Restricted Markov endpoint</a></li>
  <li><a href="#contents-if-using-a-dichotomized-continuous-variable" id="toc-contents-if-using-a-dichotomized-continuous-variable" class="nav-link" data-scroll-target="#contents-if-using-a-dichotomized-continuous-variable">Contents if using a Dichotomized Continuous variable</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">




<section id="the-summary-results-columns" class="level1">
<h1>The summary results columns</h1>
<section id="highlights" class="level2">
<h2 class="anchored" data-anchor-id="highlights">Highlights</h2>
<p>These are the columns displayed on the simulations tab after simulations are completed, the can also be displayed in the separate “Highlights” results window.</p>
<table class="caption-top table">
<caption>Figure 4‑4 - Example design notes</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th>Column Title</th>
<th>Number of columns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Select</td>
<td>1</td>
<td>Not an output column, this column contains check box to allow the user to select which scenario to simulate. The ‘Select All’ button causes them all to be checked.</td>
</tr>
<tr class="even">
<td>Status</td>
<td>1</td>
<td>This column reports on the current status of simulations: Completed, Running, No Results, Out of date, Error. It is updated automatically.</td>
</tr>
<tr class="odd">
<td>Scenario</td>
<td>1</td>
<td><p>This column gives the name of the scenario, concatenating together the profile names from the following tabs:</p>
<p>‘Execution &gt; Accrual’,</p>
<p>‘Execution &gt; Dropout Rate’,</p>
<p>’Virtual Subject Response &gt; Composite,</p>
<p>This is the same name as used for the results directory</p></td>
</tr>
<tr class="even">
<td>Random Number Seed</td>
<td>1</td>
<td>Base random number seed used to perform the simulations.</td>
</tr>
<tr class="odd">
<td>Num Sims</td>
<td>1</td>
<td>The number of simulations that were run to produce the displayed results.</td>
</tr>
<tr class="even">
<td>Mean Subj.</td>
<td>1</td>
<td>This is the mean (over the simulations) of the number of subjects recruited in this scenario.</td>
</tr>
<tr class="odd">
<td>Ppn Overall Success</td>
<td>1</td>
<td>This is the proportion of simulations that stopped for success, either early success or late success (as defined below).</td>
</tr>
<tr class="even">
<td>Ppn Early Success</td>
<td>1</td>
<td>This is the proportion of simulations that stopped early for success (and did not regress to futility in the final analysis – though they might have regressed to ‘inconclusive’).</td>
</tr>
<tr class="odd">
<td>Ppn Late Success</td>
<td>1</td>
<td>This is the proportion of simulations that did not stop early but were successful in the final analysis.</td>
</tr>
<tr class="even">
<td>Ppn Overall Futility</td>
<td>1</td>
<td>This is the proportion of simulations that stopped for futility, either early futility or late futility (as defined below).</td>
</tr>
<tr class="odd">
<td>Ppn Late Futility</td>
<td>1</td>
<td>This is the proportion of simulations that did not stop early but were futile in the final analysis.</td>
</tr>
<tr class="even">
<td>Ppn Early Futility</td>
<td>1</td>
<td>This is the proportion of simulations that stopped early for futility (and did not regress to success in the final analysis – though they might have regressed to ‘inconclusive’).</td>
</tr>
<tr class="odd">
<td>Ppn S uc-&gt;Fut Flipflop</td>
<td>1</td>
<td>This is the proportion of simulations that stopped early for success but regressed to futility in the final analysis.</td>
</tr>
<tr class="even">
<td>Ppn F ut-&gt;Suc Flipflop</td>
<td>1</td>
<td>This is the proportion of simulations that stopped early for futility but regressed to success in the final analysis.</td>
</tr>
<tr class="odd">
<td>Ppn Inco nclusive</td>
<td>1</td>
<td>This is the proportion of simulations that did not stop early and were neither successful nor futile in the final analysis.</td>
</tr>
<tr class="even">
<td>Early Success Time</td>
<td>1</td>
<td>This is the average time to an early decision to stop for success (i.e.&nbsp;the time excluding final follow up) over those simulations that did decide early to stop for success.</td>
</tr>
<tr class="odd">
<td>Mean Trt.: &lt;Dose&gt;</td>
<td>One per arm</td>
<td>This is the mean (over the simulations) of the estimate of the response on this dose.</td>
</tr>
<tr class="even">
<td>Mean Duration</td>
<td>1</td>
<td>This is the mean, in weeks (over the simulations) of the duration of the trial from first patient first visit to last patient last visit</td>
</tr>
<tr class="odd">
<td>PPn Arms Drop: &lt; Dose&gt;&gt;</td>
<td>One per arm</td>
<td>This is the number of times (over the simulations) that each arm was dropped.</td>
</tr>
<tr class="even">
<td>Mean LP Enrolled</td>
<td>1</td>
<td>This is the mean, in weeks (over the simulations) of the duration of the trial from first patient first visit to Last Patient First Visit (i.e.&nbsp;the duration of accrual).</td>
</tr>
<tr class="odd">
<td>Ppn Correct Arm</td>
<td>1</td>
<td>The proportion of simulations that met the success criteria and selected (by the target QOI specified on the Study &gt; Variant tab) one of the arms marked as “should succeed” on the Virtual Subject Response &gt; Explicitly Defined &gt; Dose Response tab</td>
</tr>
<tr class="even">
<td>Ppn I ncorrect Arm</td>
<td>1</td>
<td>The proportion of simulations that met the success criteria and selected (by the target QOI specified on the Study &gt; Variant tab) one of the arms <strong>not</strong> marked as “should succeed” on the Virtual Subject Response &gt; Explicitly Defined &gt; Dose Response tab</td>
</tr>
<tr class="odd">
<td>Version</td>
<td>1</td>
<td>The FACTS version number at the time the simulations were run.</td>
</tr>
</tbody>
</table>
</section>
<section id="allocation" class="level2">
<h2 class="anchored" data-anchor-id="allocation">Allocation</h2>
<table class="caption-top table">
<caption>Figure 6‑1: Webservice Configuration</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th>Column Title</th>
<th>Number of columns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Status</td>
<td>1</td>
<td>This column reports on the current status of simulations: Completed, Running, No Results, Out of date, Error. It is updated automatically.</td>
</tr>
<tr class="even">
<td>Scenario</td>
<td>1</td>
<td><p>This column gives the name of the scenario, concatenating together the profile names from the following tabs:</p>
<p>‘Execution &gt; Accrual’,</p>
<p>‘Execution &gt; Dropout Rate’,</p>
<p>’Virtual Subject Response &gt; Composite,</p>
<p>This is the same name as used for the results directory</p></td>
</tr>
<tr class="odd">
<td>Mean Subj.</td>
<td>1</td>
<td>This is the mean (over the simulations) of the number of subjects recruited in this scenario.</td>
</tr>
<tr class="even">
<td>SD Mean Subj.</td>
<td>1</td>
<td>This is the standard deviation across the simulations of the number of subjects recruited.</td>
</tr>
<tr class="odd">
<td>Num Subj 80%</td>
<td>1</td>
<td>This is the eightieth percentile across the simulations of the number of subjects recruited into the trial.</td>
</tr>
<tr class="even">
<td>Mean Alloc.: &lt;Dose&gt;</td>
<td>One per arm</td>
<td>This is the mean (over the simulations) of the number of subjects recruited into each arm in this scenario.</td>
</tr>
<tr class="odd">
<td>SD Alloc.: &lt;Dose&gt;</td>
<td>One per arm</td>
<td>This is the SD (over the simulations) of the number of subjects allocated to each treatment arm.</td>
</tr>
</tbody>
</table>
</section>
<section id="response" class="level2">
<h2 class="anchored" data-anchor-id="response">Response</h2>
<table class="caption-top table">
<caption>Figure 6‑2 The R Configuration Dialog</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th>Column Title</th>
<th>Number of columns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Status</td>
<td>1</td>
<td>This column reports on the current status of simulations: Completed, Running, No Results, Out of date, Error. It is updated automatically.</td>
</tr>
<tr class="even">
<td>Scenario</td>
<td>1</td>
<td><p>This column gives the name of the scenario, concatenating together the profile names from the following tabs:</p>
<p>‘Execution &gt; Accrual’,</p>
<p>‘Execution &gt; Dropout Rate’,</p>
<p>’Virtual Subject Response &gt; Composite,</p>
<p>This is the same name as used for the results directory</p></td>
</tr>
<tr class="odd">
<td>Mean Trt.: &lt;Dose&gt;</td>
<td>One per arm</td>
<td>This is the mean (over the simulations) of the estimate of the response on this dose.</td>
</tr>
<tr class="even">
<td>SD Trt.: &lt;Dose&gt;</td>
<td>One per arm</td>
<td>This is the standard deviation (over the simulations) of the estimate of the response on this dose.</td>
</tr>
<tr class="odd">
<td>True Mean Resp: &lt;Dose&gt;</td>
<td>One per arm</td>
<td>This is the true response rate from which the simulation data was sampled.</td>
</tr>
</tbody>
</table>
</section>
<section id="observed" class="level2">
<h2 class="anchored" data-anchor-id="observed">Observed</h2>
<table class="caption-top table">
<caption>Figure 6‑3 Adding a link to R</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th>Column Title</th>
<th>Number of columns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Status</td>
<td>1</td>
<td>This column reports on the current status of simulations: Completed, Running, No Results, Out of date, Error. It is updated automatically.</td>
</tr>
<tr class="even">
<td>Scenario</td>
<td>1</td>
<td><p>This column gives the name of the scenario, concatenating together the profile names from the following tabs:</p>
<p>‘Execution &gt; Accrual’,</p>
<p>‘Execution &gt; Dropout Rate’,</p>
<p>’Virtual Subject Response &gt; Composite,</p>
<p>This is the same name as used for the results directory</p></td>
</tr>
<tr class="odd">
<td>Mean Complete &lt;Dose&gt;</td>
<td>One per arm</td>
<td>This is the mean (over the simulations) of the number of subjects recruited per arm which have had their endpoint observed in this scenario.</td>
</tr>
<tr class="even">
<td>Mean Complete Info &lt;Dose&gt;</td>
<td>One per arm</td>
<td>This is the mean (over the simulations) of information observed per arm as defined on the Interims tab (Subjects enrolled, Complete Data at Specified Visit, Opportunity to Complete at Specified Visit) in this scenario.</td>
</tr>
<tr class="odd">
<td>Mean Dropouts &lt;Dose&gt;<br>
&lt;Visit&gt;</td>
<td>One per arm per visit</td>
<td>This is the mean (over the simulations) of dropouts per arm per visit in this scenario.</td>
</tr>
</tbody>
</table>
</section>
<section id="probabilities" class="level2">
<h2 class="anchored" data-anchor-id="probabilities">Probabilities</h2>
<table class="caption-top table">
<caption>Figure 6‑4 Enabling analytics</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th>Column Title</th>
<th>Number of columns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Status</td>
<td>1</td>
<td>This column reports on the current status of simulations: Completed, Running, No Results, Out of date, Error. It is updated automatically.</td>
</tr>
<tr class="even">
<td>Scenario</td>
<td>1</td>
<td><p>This column gives the name of the scenario, concatenating together the profile names from the following tabs:</p>
<p>‘Execution &gt; Accrual’,</p>
<p>‘Execution &gt; Dropout Rate’,</p>
<p>’Virtual Subject Response &gt; Composite,</p>
<p>This is the same name as used for the results directory</p></td>
</tr>
<tr class="odd">
<td>&lt;QOI&gt; &lt;Dose&gt;</td>
<td>One per arm per QOI</td>
<td><p>For each Posterior Probability and Predictive Probability QOI defined on this endpoint, this is the mean over the simulations of the estimate of the probability of the QOI for each dose. (P-value QOIs are reported in the frequentist results table).</p>
<p>For each Target QOI this is the proportion of simulations where this dose was selected at the end of the trial as the dose with the greatest probability of meeting the target condition.</p>
<p>The probability that each dose is the target at the end of a simulated trial is its marginal probability (the number of times it was the dose closest to the target in the MCMC sampling of the analysis at the end of the trial). The target of having the Max response on this endpoint, or some fraction of it (EDq) is always identifiable, so the Ppn(target) for these QOIs will sum to 1 across the doses.</p>
<p>An MED target is not guaranteed to be identifiable, if no dose meets the CSD criteria in any MCMC sample so all doses have a 0 probability of having a response greater than Control (or AC) by the CSD then no dose is the MED. So the sum of each Ppn(target) QOI across the doses should sum to between 0 and 1 inclusive.</p>
<p>Decision QOI’s are not reported here separately, but their component QOIs – the vector of values and target QOI used to select from them are.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="model-parameters" class="level2">
<h2 class="anchored" data-anchor-id="model-parameters">Model Parameters</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th>Column Title</th>
<th>Number of columns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Scenario</td>
<td>1</td>
<td><p>This column gives the name of the scenario, concatenating together the profile names from the following tabs:</p>
<p>‘Execution &gt; Accrual’,</p>
<p>‘Execution &gt; Dropout Rate’,</p>
<p>’Virtual Subject Response &gt; Composite,</p>
<p>This is the same name as used for the results directory</p></td>
</tr>
<tr class="even">
<td>Mean Longmod Resp: &lt;Dose&gt;<br>
&lt;Visit&gt;</td>
<td>D*V</td>
<td><p>These are only calculated and written out if the ITP longitudinal model is being used.</p>
<p>This is the mean (over the simulations) of the estimate of the mean response for a particular dose at a particular visit.</p></td>
</tr>
<tr class="odd">
<td>SE Mean Longmod Resp: &lt;Dose&gt;<br>
&lt;Visit&gt;</td>
<td>D*V</td>
<td>This is the standard error (over the simulations) of the longitudinal model estimate of the response at intermediate visits (see above)</td>
</tr>
<tr class="even">
<td>BAC Mean</td>
<td>1</td>
<td>This is the mean (over the simulations) of the posterior estimate of the mean of the Bayesian Augmented Control (Hierarchical Prior) distribution of mean control responses.</td>
</tr>
<tr class="odd">
<td>SD BAC Mean</td>
<td>1</td>
<td>This is the SD (over the simulations) of the posterior estimate of the mean of the Bayesian Augmented Control (Hierarchical Prior) distribution of mean control responses.</td>
</tr>
<tr class="even">
<td>BAC Tau</td>
<td>1</td>
<td>This is the mean (over the simulations) of the posterior estimate of the SD of the Bayesian Augmented Control (Hierarchical Prior) distribution of mean control responses.</td>
</tr>
<tr class="odd">
<td>SD BAC tau</td>
<td>1</td>
<td>This is the SD (over the simulations) of the posterior estimate of the SD of the Bayesian Augmented Control (Hierarchical Prior) distribution of mean control responses.</td>
</tr>
<tr class="even">
<td>BAAC Mean</td>
<td>1</td>
<td>This is the mean (over the simulations) of the posterior estimate of the mean of the Bayesian Augmented Active Comparator (Hierarchical Prior) distribution of mean active comparator responses.</td>
</tr>
<tr class="odd">
<td>SD BAAC Mean</td>
<td>1</td>
<td>This is the SD (over the simulations) of the posterior estimate of the mean of the Bayesian Augmented Active Comparator (Hierarchical Prior) distribution of mean control responses.</td>
</tr>
<tr class="even">
<td>BAAC Tau</td>
<td>1</td>
<td>This is the mean (over the simulations) of the posterior estimate of the SD of the Bayesian Augmented Active Comparator (Hierarchical Prior) distribution of mean active comparator responses.</td>
</tr>
<tr class="odd">
<td>SD BAAC tau</td>
<td>1</td>
<td>This is the SD (over the simulations) of the posterior estimate of the SD of the Bayesian Augmented Active Comparator (Hierarchical Prior) distribution of mean active comparator responses.</td>
</tr>
</tbody>
</table>
<section id="qoi-columns" class="level3">
<h3 class="anchored" data-anchor-id="qoi-columns">QOI Columns</h3>
<p>The QOI columns depend on the QOIs that have been defined for this design. The columns are grouped in the following order:</p>
<p>Posterior Probabilities The posterior probability for each QOI for each dose.</p>
<p>Predictive Probabilities The predictive probability for each QOI for each dose.</p>
<p>P-Values The p-value for each QOI for each dose.</p>
<p>Target Probabilities The probability of being the target for each QOI for each dose.</p>
<p>Decision QOIs The value of the decision QOI at the target.</p>
<p>Success</p>
<p>Futile A flag for each QOI decision criteria indicating if the decision QOI was evaluated and compared to a threshold at the interim (weeks file) or final analysis (simulation file). The flag value is -1 if the decision QOI was not evaluated, 0 if it did not meet the threshold and 1 if it did.</p>
<p>Success / Futile Combined A flag indicating if the interim or final analysis determined success or futility taking all the factors defined for Success/Futility into account: 0 if the conditions were not met, 1 it the conditions were met. If success and futility conditions have been defined that are not mutually exclusive and both sets of combined conditions are met, FACTS will pick one of the outcomes as met but not the other. In order to discourage defining Success and Futility rules that can both be true FACTS does not guarantee which outcome will be selected.</p>
</section>
</section>
<section id="contents-of-simulations_freq_missing.csv-weeks_freq_missing.csv" class="level2">
<h2 class="anchored" data-anchor-id="contents-of-simulations_freq_missing.csv-weeks_freq_missing.csv">Contents of Simulations_freq_&lt;missing&gt;.csv, Weeks_freq_&lt;missing&gt;.csv</h2>
<p>These file contain the frequentist results after an interim analysis (weeks file) or final analysis (simulations file), apart for the first column, the columns are the same in the two types of file, and the same across the different methods for treating missing data.</p>
<table class="caption-top table">
<caption>Figure 7‑3: Virtual Subject Dichotomous Longitudinal Response</caption>
<colgroup>
<col style="width: 16%">
<col style="width: 13%">
<col style="width: 67%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column Title</th>
<th style="text-align: left;">Number of columns</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"># Trial</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The number of the simulation. (simulations_freq_...csv only)</td>
</tr>
<tr class="even">
<td style="text-align: left;">#Weeks</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The week of the interim (weeks_freq_...csv only)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Theta &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">Unadjusted estimate of response per treatment arm</td>
</tr>
<tr class="even">
<td style="text-align: left;">Theta SD &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The SD of the estimate of response per treatment arm</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Trt Effect &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The relative size of the treatment effect compared to control per arm (treatment effect for control is always 0). The direction of the comparison takes into account whether a response represents a subject’s condition improving or worsening, so that a positive treatment effect shows the response on the dose is better than on control.</td>
</tr>
<tr class="even">
<td style="text-align: left;">t-Stat &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The test statistic per treatment arm (for control this is always 0)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">p-Value &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The unadjusted test statistic p-value per arm (for control this is always 0)</td>
</tr>
<tr class="even">
<td style="text-align: left;">lower CI &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The unadjusted lower bound of the alpha confidence interval of the estimated treatment effect per treatment arm (for control this is always 0).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">upper CI &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The unadjusted upper bound of the alpha confidence interval of the estimated treatment effect per treatment arm (for control this is always 0).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Min p-Value</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The smallest of the test statistic p-values</td>
</tr>
<tr class="odd">
<td style="text-align: left;">p-Value Dunnett &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The Dunnett adjusted test statistic p-value per arm (for control this is always 0).</td>
</tr>
<tr class="even">
<td style="text-align: left;">lower CI Dunnett &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The Dunnett adjusted lower bound of the alpha confidence interval of the estimated treatment effect (for control this is always 0).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">upper CI Dunnett &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The Dunnett adjusted upper bound of the alpha confidence interval of the estimated treatment effect (for control this is always 0).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Min p-Value Dunnett</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The smallest of the Dunnett adjusted p-values.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">p-Value Bonf &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The Bonferroni adjusted test statistic p-value per arm.</td>
</tr>
<tr class="even">
<td style="text-align: left;">lower-CI Bonf &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The Bonferroni adjusted lower bound of the alpha confidence interval of the estimated treatment effect (for control this is always 0).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">upper-CI Bonf &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The Bonferroni adjusted upper bound of the alpha confidence interval of the estimated treatment effect (for control this is always 0).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Min p-Value Bonf</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The smallest of the Bonferroni adjusted test statistic value per arm.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">t-Stat trend</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The t statistic from the trend test.</td>
</tr>
<tr class="even">
<td style="text-align: left;">p-Value trend</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The p-value from the trend test.</td>
</tr>
</tbody>
</table>
</section>
<section id="contents-of-patientsnnnnn.csv" class="level2">
<h2 class="anchored" data-anchor-id="contents-of-patientsnnnnn.csv">Contents of PatientsNNNNN.csv</h2>
<table class="caption-top table">
<caption>Figure 7‑4: Restricted Markov Dose Response</caption>
<colgroup>
<col style="width: 17%">
<col style="width: 14%">
<col style="width: 65%">
</colgroup>
<thead>
<tr class="header">
<th>Column Title</th>
<th style="text-align: left;">Number of columns</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>#Subject</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The subject id number, starting at 1.</td>
</tr>
<tr class="even">
<td>Region</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Which region the subject was recruited in</td>
</tr>
<tr class="odd">
<td>Date</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The date, in weeks from the start of the trial, of the subject’s baseline visit and randomization.</td>
</tr>
<tr class="even">
<td>Dose</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The index number (1, …) of the treatment arm the subject belongs to.</td>
</tr>
<tr class="odd">
<td>LastVisit#</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">The index of the last visit for which the subjects data was collected, if the subject did not complete this could be because the subject dropped-out, the subject’s treatment arm was dropped (and there was no follow-up) or the study stopped early (and there was no follow-up).</td>
</tr>
<tr class="even">
<td>Baseline</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">-9999 there is no baseline for subjects in a dichotomous response trial.</td>
</tr>
<tr class="odd">
<td>Visit &lt;visit&gt;</td>
<td style="text-align: left;">V</td>
<td style="text-align: left;">Subjects response at each visit</td>
</tr>
</tbody>
</table>
</section>
<section id="contents-of-mcmcnnnnn.csv" class="level2">
<h2 class="anchored" data-anchor-id="contents-of-mcmcnnnnn.csv">Contents of MCMCNNNNN.csv</h2>
<p>The MCMC file if requested for output by the user, contains all the MCMC samples for the fitted parameters in the design. There is one row per sample (including the burnin) and the samples from all the analyses in the simulation are included. The first two columns are the analysis index and the sample (within analysis) index. The remaining columns are the parameters whose sample values are being reported, the number and constituents of these columns are highly variable depending on design of the statistical analysis.</p>
<section id="content-if-using-a-conventional-dichotomous-endpoint" class="level3">
<h3 class="anchored" data-anchor-id="content-if-using-a-conventional-dichotomous-endpoint">Content if using a conventional Dichotomous endpoint</h3>
<table class="caption-top table">
<caption>Figure 7‑9: External Data</caption>
<colgroup>
<col style="width: 16%">
<col style="width: 14%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column Title</th>
<th style="text-align: left;">Number of columns</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Analysis</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The index of the analysis (interim) in the simulation</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sample</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The index of the sample within the analysis</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pi &lt;dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The estimate of the response rate for each dose, based on the dose response model fitted</td>
</tr>
<tr class="even">
<td style="text-align: left;">A &lt;1-8&gt; / Tau</td>
<td style="text-align: left;">P</td>
<td style="text-align: left;">If the dose response model estimates parameters then the samples of these are listed next. The number and name of the parameters will vary depending on the model being fitted. Check the Design &gt; Dose Response tab for a listing of the parameters.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Longmod &lt;model&gt; &lt;param&gt; &lt;visit&gt;</td>
<td style="text-align: left;">L * P * V</td>
<td style="text-align: left;">If the analysis includes longitudinal modelling then the samples of the parameters of the longitudinal models are output. The number of models depends on the number of different longitudinal fits the user has specified (one over all arms, one for control and one for all treatment arms, model all arms separately, etc.), the number of parameters the model has, and if these are fitted per visit (which depends on the model being fitted), then the number of visits.</td>
</tr>
</tbody>
</table>
</section>
<section id="contents-if-using-a-restricted-markov-endpoint" class="level3">
<h3 class="anchored" data-anchor-id="contents-if-using-a-restricted-markov-endpoint">Contents if using a Restricted Markov endpoint</h3>
<table class="caption-top table">
<caption>Figure 7‑10 External Data directory</caption>
<colgroup>
<col style="width: 16%">
<col style="width: 14%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column Title</th>
<th style="text-align: left;">Number of columns</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Analysis</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The index of the analysis (interim) in the simulation</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sample</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">The index of the sample within the analysis</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pi &lt;Dose&gt;</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">The estimate of the response rate for each dose, based on the dose response model fitted</td>
</tr>
<tr class="even">
<td style="text-align: left;">A &lt;1-8&gt; / Tau</td>
<td style="text-align: left;">P</td>
<td style="text-align: left;">If the dose response model estimates parameters then the samples of these are listed next. The number and name of the parameters will vary depending on the model being fitted. Check the Design &gt; Dose Response tab for a listing of the parameters.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Longmod &lt;model&gt; &lt;param&gt; &lt;visit&gt;</td>
<td style="text-align: left;">L * P * V</td>
<td style="text-align: left;">Currently the values of Alpha0, Alpha1, AlphaS (the parameters to the Dirichlet distribution) are (unnecessarily – these values are not sampled) output, along with the values for P0, P1 and PS the transition probabilities of each model at each visit.</td>
</tr>
</tbody>
</table>
</section>
<section id="contents-if-using-a-dichotomized-continuous-variable" class="level3">
<h3 class="anchored" data-anchor-id="contents-if-using-a-dichotomized-continuous-variable">Contents if using a Dichotomized Continuous variable</h3>
<p>These are the same as for the Dichotomous endpoint, but the LM parameters are for the LM of the continuous response value.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<!-- footer.html -->
<footer>
  <p>© <span id="year"></span> <a href="https://www.berryconsultants.com">Berry Consultants</a></p>
  <!-- <p>Made with <span style="color: #11A473;">❤</span> and <a href="https://quarto.org">Quarto</a></p> -->
</footer>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>