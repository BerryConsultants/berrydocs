<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-03-24">

<title>FACTS Dose Escalation CRM</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../media/FACTS_logo.jpg" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../gettingStarted/index.html"> 
<span class="menu-text">Getting Started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../../documentation/index.html" aria-current="page"> 
<span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../concepts/index.html"> 
<span class="menu-text">Concepts</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../notes/index.html"> 
<span class="menu-text">Field Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../releaseNotes/index.html"> 
<span class="menu-text">Release Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../get.html"> 
<span class="menu-text">Get FACTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../contact.html"> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Version 7.1</li><li class="breadcrumb-item"><a href="../../../documentation/v71/userguides/crm.html">User Guides</a></li><li class="breadcrumb-item"><a href="../../../documentation/v71/userguides/crm.html">FACTS Dose Escalation CRM</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Documentation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Version 7.1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">User Guides</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/crm.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">FACTS Dose Escalation CRM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/userguides/installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FACTS Installation Guide</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Examples</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">CRM</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/examples/CRM/example1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/examples/CRM/example2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example 2</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Staged</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/examples/Staged/example1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../documentation/v71/examples/Staged/example2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example 2</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#sec-introduction" id="toc-sec-introduction" class="nav-link active" data-scroll-target="#sec-introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul>
  <li><a href="#sec-purpose" id="toc-sec-purpose" class="nav-link" data-scroll-target="#sec-purpose"><span class="header-section-number">1.1</span> Purpose of this document</a></li>
  <li><a href="#sec-scope" id="toc-sec-scope" class="nav-link" data-scroll-target="#sec-scope"><span class="header-section-number">1.2</span> Scope of this document</a></li>
  <li><a href="#sec-context" id="toc-sec-context" class="nav-link" data-scroll-target="#sec-context"><span class="header-section-number">1.3</span> Context of this Issue</a></li>
  <li><a href="#sec-citing" id="toc-sec-citing" class="nav-link" data-scroll-target="#sec-citing"><span class="header-section-number">1.4</span> Citing FACTS</a></li>
  <li><a href="#sec-definitions" id="toc-sec-definitions" class="nav-link" data-scroll-target="#sec-definitions"><span class="header-section-number">1.5</span> Definition of Terms</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">1.6</span> References</a></li>
  </ul></li>
  <li><a href="#facts-overview" id="toc-facts-overview" class="nav-link" data-scroll-target="#facts-overview"><span class="header-section-number">2</span> FACTS Overview</a>
  <ul>
  <li><a href="#facts-7.0.0-changes-to-n-crm" id="toc-facts-7.0.0-changes-to-n-crm" class="nav-link" data-scroll-target="#facts-7.0.0-changes-to-n-crm"><span class="header-section-number">2.1</span> FACTS 7.0.0 Changes to N-CRM</a></li>
  <li><a href="#facts-6.5-changes-to-n-crm" id="toc-facts-6.5-changes-to-n-crm" class="nav-link" data-scroll-target="#facts-6.5-changes-to-n-crm"><span class="header-section-number">2.2</span> FACTS 6.5 Changes to N-CRM</a></li>
  <li><a href="#facts-6.4.0-changes-to-n-crm" id="toc-facts-6.4.0-changes-to-n-crm" class="nav-link" data-scroll-target="#facts-6.4.0-changes-to-n-crm"><span class="header-section-number">2.3</span> FACTS 6.4.0 Changes to N-CRM</a></li>
  <li><a href="#facts-6.3.0-changes-to-n-crm" id="toc-facts-6.3.0-changes-to-n-crm" class="nav-link" data-scroll-target="#facts-6.3.0-changes-to-n-crm"><span class="header-section-number">2.4</span> FACTS 6.3.0 Changes to N-CRM</a></li>
  <li><a href="#facts-6.2.0-changes-to-n-crm" id="toc-facts-6.2.0-changes-to-n-crm" class="nav-link" data-scroll-target="#facts-6.2.0-changes-to-n-crm"><span class="header-section-number">2.5</span> FACTS 6.2.0 Changes to N-CRM</a></li>
  <li><a href="#facts-6.1.0-changes-to-n-crm" id="toc-facts-6.1.0-changes-to-n-crm" class="nav-link" data-scroll-target="#facts-6.1.0-changes-to-n-crm"><span class="header-section-number">2.6</span> FACTS 6.1.0 Changes to N-CRM</a></li>
  </ul></li>
  <li><a href="#starting-facts" id="toc-starting-facts" class="nav-link" data-scroll-target="#starting-facts"><span class="header-section-number">3</span> Starting FACTS</a></li>
  <li><a href="#the-facts-n-crm-gui" id="toc-the-facts-n-crm-gui" class="nav-link" data-scroll-target="#the-facts-n-crm-gui"><span class="header-section-number">4</span> The FACTS N-CRM GUI</a></li>
  <li><a href="#the-standard-facts-menus" id="toc-the-standard-facts-menus" class="nav-link" data-scroll-target="#the-standard-facts-menus"><span class="header-section-number">5</span> The Standard FACTS Menus</a>
  <ul>
  <li><a href="#the-file-menu" id="toc-the-file-menu" class="nav-link" data-scroll-target="#the-file-menu"><span class="header-section-number">5.1</span> The “File” Menu</a></li>
  <li><a href="#facts-settings-menu" id="toc-facts-settings-menu" class="nav-link" data-scroll-target="#facts-settings-menu"><span class="header-section-number">5.2</span> FACTS Settings Menu</a>
  <ul class="collapse">
  <li><a href="#set-options" id="toc-set-options" class="nav-link" data-scroll-target="#set-options"><span class="header-section-number">5.2.1</span> Set Options</a>
  <ul class="collapse">
  <li><a href="#grid-configuration" id="toc-grid-configuration" class="nav-link" data-scroll-target="#grid-configuration"><span class="header-section-number">5.2.1.1</span> Grid Configuration</a></li>
  <li><a href="#r-configuration" id="toc-r-configuration" class="nav-link" data-scroll-target="#r-configuration"><span class="header-section-number">5.2.1.2</span> R Configuration</a></li>
  <li><a href="#gamma-distribution-parameters" id="toc-gamma-distribution-parameters" class="nav-link" data-scroll-target="#gamma-distribution-parameters"><span class="header-section-number">5.2.1.3</span> Gamma Distribution Parameters</a></li>
  </ul></li>
  <li><a href="#enter-a-license-key" id="toc-enter-a-license-key" class="nav-link" data-scroll-target="#enter-a-license-key"><span class="header-section-number">5.2.2</span> Enter a license key</a></li>
  </ul></li>
  <li><a href="#the-help-menu" id="toc-the-help-menu" class="nav-link" data-scroll-target="#the-help-menu"><span class="header-section-number">5.3</span> The Help Menu</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Version 7.1</li><li class="breadcrumb-item"><a href="../../../documentation/v71/userguides/crm.html">User Guides</a></li><li class="breadcrumb-item"><a href="../../../documentation/v71/userguides/crm.html">FACTS Dose Escalation CRM</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">FACTS Dose Escalation CRM</h1>
<p class="subtitle lead">CRM / N-CRM / BLRM (Bayesian Logistic Regression Model)</p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 24, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="sec-introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<section id="sec-purpose" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="sec-purpose"><span class="header-section-number">1.1</span> Purpose of this document</h2>
<p>This document describes how use the FACTS Dose Escalation (DE) N-CRM design engine. It is intended for all end users of the system.</p>
</section>
<section id="sec-scope" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="sec-scope"><span class="header-section-number">1.2</span> Scope of this document</h2>
<p>This document covers the FACTS Dose Escalation N-CRM design engine user interface.</p>
<p>This document does not address the internal workings of the design engines or algorithms, which are addressed in the associated Design Engine Specification. It also does not address the use of FACTS Core Designs or Enrichment Designs, which are covered in other User Guides.</p>
<p>The screenshots provided are specific to a particular installation and may not reflect the exact layout of the information seen by any particular user. They were taken from FACTS 6.3.0 and later installed on Windows 10. Different versions of Windows or the use of different Windows themes will introduce some differences in appearance. The contents of each tab, however, will be consistent with the software.</p>
</section>
<section id="sec-context" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="sec-context"><span class="header-section-number">1.3</span> Context of this Issue</h2>
<p>This document has been updated for the version 7.0.0 release of Dose Escalation FACTS.</p>
</section>
<section id="sec-citing" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="sec-citing"><span class="header-section-number">1.4</span> Citing FACTS</h2>
<p>If writing in LaTex and using Bibtex, if you wish to cite FACTS (thank you!), can we suggest the following:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>@techreport{FACTS71,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  author = {{FACTS Development Team}},</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  title = {{FACTS}: Fixed and Adaptive Clinical Trial Simulator},</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  year  = {2024},</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  month = {11},</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  number = {Version 7.1},</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  type         = {Computer Software},</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  institution = {Berry Consultants LLC},</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  address = {Austin, TX},</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  note   = {https://www.berryconsultants.com/software/facts/}</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will result in a reference that, for example in the APA style, will look like the following:</p>
<p>FACTS Development Team (2024). FACTS: Fixed and adaptive clinical trial simulator. Computer Software Version 7.1, Berry Consultants LLC, Austin, TX. https://www.berryconsultants.com/software/facts/.</p>
</section>
<section id="sec-definitions" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="sec-definitions"><span class="header-section-number">1.5</span> Definition of Terms</h2>
<p><a href="#tbl-crmterms" class="quarto-xref">Table&nbsp;1</a> gives an overview of the acronyms and abbreviations used in this document.</p>
<div id="tbl-crmterms" class="striped hover quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[15,85]">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-crmterms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: List of terms used in the CRM user guide
</figcaption>
<div aria-describedby="tbl-crmterms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-striped table-hover caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Cap</td>
<td style="text-align: left;">A limit on the number of subjects recruited. In FACTS N-CRM users can specify a cap on the overall number of subjects to be recruited in the trial (the ‘Overall Cap’) and specify stopping rules to define when the trial should stop before it reaches cap.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Control</td>
<td style="text-align: left;">Is the treatment arm with which the novel treatment(s) are principally being compared. Control may be placebo, or some existing standard of care, or therapy, against which the novel treatment has to be benchmarked in order to determine its likely usefulness.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Core</td>
<td style="text-align: left;">FACTS Core: A mode of FACTS for designing trials where multiple treatments, (possibly different doses of a novel treatment) are tested against a control and optionally an active comparator.</td>
</tr>
<tr class="even">
<td style="text-align: left;">CRM</td>
<td style="text-align: left;">Continual Reassessment Method – a dose escalation design where the dose-toxicity is estimated using a simple Bayesian model, and the resulting estimates used to control the dose escalation and estimate the Maximum Tolerated Dose (MTD).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DE</td>
<td style="text-align: left;">Dose Escalation: a mode of FACTS where subjects are treated in cohorts and dose escalation is determined by the number of toxicities observed.</td>
</tr>
<tr class="even">
<td style="text-align: left;">ED</td>
<td style="text-align: left;">Enrichment Designs: a mode of FACTS for designing trials where the same treatment is testing in different settings for example different sub-populations or different but related indications.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FACTS</td>
<td style="text-align: left;">Fixed and Adaptive Clinical Trial Simulator.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Final Endpoint</td>
<td style="text-align: left;">The final value, or state, of a subject’s endpoint.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GUI</td>
<td style="text-align: left;">Graphical User Interface, the part of the FACTS application that the user interacts with.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Method</td>
<td style="text-align: left;">In the FACTS documentation we try to reserve the term ‘method’ for the algorithms used in the simulation (as opposed to the analysis) part of the program. In the analysis part we use the term ‘Model’, see below.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Model</td>
<td style="text-align: left;">In the FACTS documentation we try to reserve the term ‘model’ for the statistical models used in the analysis of the trial data (in the ‘design’ section of the FACTS user interface). Where mathematical algorithms are used for other purposes in FACTS (for instance in the generation of the simulated data) we try to use the term ‘method’. We have found that initially it is very easy for users to be confused between these two parts of FACTS and we feel that using distinct terminology may help to reduce this.</td>
</tr>
<tr class="even">
<td style="text-align: left;">MTD</td>
<td style="text-align: left;">The dose most likely to be the Maximum Tolerated Dose (MTD) – the dose with the highest Pr(MTD).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MTD+</td>
<td style="text-align: left;">The dose most likely to be the MTD+ – the dose with the highest Pr(MTD+).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pr(MTD)</td>
<td style="text-align: left;">A dose’s probability of being MTD is the probability that it is the dose with the highest probability of having a toxicity rate in the acceptable toxicity band, and (if a threshold has been specified) does not have a probability of excess or unacceptable toxicity above the threshold. This estimate of MTD is constrained to select one of the available doses.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pr(MTD+)</td>
<td style="text-align: left;">A dose’s probability of being the MTD+ is the probability that it is the dose with the highest probability of having a toxicity rate in the acceptable band, and (if a threshold has been specified) does not have a probability of excess or unacceptable toxicity above the threshold. Unlike Pr(MTD), Pr(MTD+) includes estimating whether a dose below or a dose above the range of those being tested is more likely to have a toxicity in the acceptable band than any of the doses in the range.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Profile</td>
<td style="text-align: left;">A profile is a specification of one aspect of a scenario. A scenario is made up of one profile of each of the required types for the type of trial being simulated. FACTS allows the user to specify multiple profiles of each type and then presents all the possible combinations of profiles as scenarios that can be used to drive simulations.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Response</td>
<td style="text-align: left;">The change in a subject’s endpoint compared to their baseline state.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Scenario</td>
<td style="text-align: left;">A scenario is the complete specification of the unknown external factors that determine the data observed on the trial and its timing. The exact factors depend on the type of trial being simulated but typically include: <br> -) the distribution of the final change from base line, or probability of response or rate of events in the different treatment groups <br> -) the properties of subjects’ early responses and the correlation with their final outcome <br> -) the rate at which subjects are recruited into the trial <br> -) the rate at which subjects drop out of the trial.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SPEC</td>
<td style="text-align: left;">The Design Engine Specification, describes the system algorithms, and meaning of parameters.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Response</td>
<td style="text-align: left;">The change in a subject’s endpoint compared to their baseline state.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Subject</td>
<td style="text-align: left;">Someone recruited onto a clinical trial for the purposes of learning about the properties of a treatment. Depending on the type of trial they might be patients or they might be healthy volunteers.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Treatment Arm</td>
<td style="text-align: left;">Subjects on entering the study are randomized to different ‘treatment arms’. Subjects randomized to the same arm receive the same treatment and the responses of the subjects in the arm analyzed to determine the expected response to that treatment, allowing the expected responses to the different treatments to be compared.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UG</td>
<td style="text-align: left;">The User Guide; describes how to use the system.</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="references" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="references"><span class="header-section-number">1.6</span> References</h2>
<p>[N-CRM] = <span class="citation" data-cites="neuenschwander2008critical">(<a href="#ref-neuenschwander2008critical" role="doc-biblioref">Neuenschwander, Branson, and Gsponer 2008</a>)</span></p>
<p>[Backfill] = <span class="citation" data-cites="dehbi2021controlled">(<a href="#ref-dehbi2021controlled" role="doc-biblioref">Dehbi, O’Quigley, and Iasonos 2021</a>)</span></p>
<p>[Open Enrollment] = <span class="citation" data-cites="broglio2015bayesian">(<a href="#ref-broglio2015bayesian" role="doc-biblioref">Broglio et al. 2015</a>)</span></p>
<p>[CRM 2 Sample] = <span class="citation" data-cites="o1999two">(<a href="#ref-o1999two" role="doc-biblioref">O’Quigley, Shen, and Gamst 1999</a>)</span></p>
<p>[bCRM] = <span class="citation" data-cites="braun2002bivariate">(<a href="#ref-braun2002bivariate" role="doc-biblioref">Braun 2002</a>)</span></p>
<p>[CRM Ordinal] = <span class="citation" data-cites="de1996incorporating">(<a href="#ref-de1996incorporating" role="doc-biblioref">deMoor et al. 1996</a>)</span></p>
</section>
</section>
<section id="facts-overview" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> FACTS Overview</h1>
<p>This user guide assumes some limited general familiarity with FACTS and concentrates on describing the interface for designs using the N-CRM approach. See the FACTS Dose Escalation user guide for a general introduction to the FACTS Dose Escalation user interface.</p>
<p>The N-CRM is based on the method described in the paper <span class="citation" data-cites="neuenschwander2008critical">(<a href="#ref-neuenschwander2008critical" role="doc-biblioref">Neuenschwander, Branson, and Gsponer 2008</a>)</span>. It is designed for use in oncology phase 1 trials, and we understand generally in use at Novartis for the majority of their trials of this type:</p>
<ul>
<li>Dosing starts at a (very) low dose, strongly believed to be safe.</li>
<li>Usually after a cohort of subjects have completed their current dose, the dose to be used for the next cohort is selected. The selection of this dose is dictated by a combination of dose escalation rules, the estimate of the toxicity rate on the different doses and the target maximum tolerated toxicity, or toxicity band.</li>
<li>The endpoint per subject is binary: toxicity observed or not.</li>
<li>There is either a predefined set of doses to explore, or a dose range.</li>
<li>There is limited sample size.</li>
</ul>
<section id="facts-7.0.0-changes-to-n-crm" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="facts-7.0.0-changes-to-n-crm"><span class="header-section-number">2.1</span> FACTS 7.0.0 Changes to N-CRM</h2>
<p>In FACTS 7.0.0 the only change was on the Analysis tab, when entering subject data manually, the FACTS GUI now ensures that a cohort number is entered for every subject.</p>
</section>
<section id="facts-6.5-changes-to-n-crm" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="facts-6.5-changes-to-n-crm"><span class="header-section-number">2.2</span> FACTS 6.5 Changes to N-CRM</h2>
<p>In FACTS 6.5.0 there was a new feature added to N-CRM:</p>
<ul>
<li>It is now possible to generate a design report – a Word document describing design - once the design has been simulated. In FACTS 6.5.0 there was two small changes to the functionality:</li>
<li>When deriving toxicity/efficacy priors from quantiles at the lowest and highest doses, the “middle” probability option now refers to the median dose rather than the reference dose and is now optional. When pre-6.5.0 FACTS files are loaded in FACTS 6.5.0, the “middle” probability option will be ignored and replaced by 0.5.</li>
<li>When deriving toxicity/efficacy priors from specific quantiles the specification of at least two dose levels is now required whereas previously the specification of at least three dose levels was required.</li>
</ul>
<p>In FACTS 6.5.0 there were some improvements in the simulated behavior:</p>
<ul>
<li>Designs which include efficacy, the “Maximum cohorts used to determine MTD” parameter on the Allocation Rule tab is now observed, in FACTS 6.4.0 and earlier it was ignored.</li>
<li>In N-CRM designs using open enrollment without accrual pausing, FACTS will now output entries in the cohort file for subjects that have been lost following stopping rules being met.</li>
<li>In N-CRM designs using open enrollment, FACTS will no longer prematurely apply stopping conditions when there are still subjects whose outcomes have been observed, but not yet processed.</li>
<li>In N-CRM designs using open enrollment, FACTS will now report the selected MTD/MED/OSD and associated state to be the dose where the stopping conditions were first met, unless the MTD has subsequently decreased post stopping rules being met. This is to prevent a dose above the one selected when the stopping conditions were met being reported as the MTD when it is very likely that there is insufficient data on this higher dose to justify its selection. If rather than reporting the MTD at the point when the stopping rules where met, you would like the trial to resume if the dose selected as MTD has changed (and this the stopping rules possibly no longer met), ensure that the ”Pause accrual and wait for completers” option is selected on the “Stopping Criteria” tab. This allows the trial to resume if the recruitment cap has not been met.</li>
<li>FACTS Command Line mode and FLFLL (FACTS Linux File Loader Lite) now correctly handle the processing of N-CRM designs whose prior was derived using the “Legacy Prior” option.</li>
</ul>
</section>
<section id="facts-6.4.0-changes-to-n-crm" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="facts-6.4.0-changes-to-n-crm"><span class="header-section-number">2.3</span> FACTS 6.4.0 Changes to N-CRM</h2>
<p>In FACTS 6.4.0 there were no changes to the Dose Escalation simulators.</p>
</section>
<section id="facts-6.3.0-changes-to-n-crm" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="facts-6.3.0-changes-to-n-crm"><span class="header-section-number">2.4</span> FACTS 6.3.0 Changes to N-CRM</h2>
<p>In FACTS 6.3.0 a number of changes were made to improve facilities in N-CRM, or improve the way existing facilities were implemented. These were:</p>
<ol type="1">
<li>New run-in options: the existing run-in scheme is available as “simple run-in”, “custom run-in” allows a specific sequence of doses and number of subjects to test at each dose to be specified, “small cohort pre-escalation” allows a run that uses a smaller cohort size but follows the dose escalation rules and over dose control.</li>
<li>New “backfill” options in open enrolment. Backfill allows subjects that become available at a time when they can’t be allocated to the current dose (because the maximum number of subjects without final results have already been allocated to the current dose).</li>
<li>Improved handling of “maximum subjects without final results” in open enrolment. In earlier versions of FACTS this was a “global” maximum, which led to a suboptimal allocation pattern and overly cautious rejection of subjects that became available. The new model applies a maximum “per dose” so that once the trial has escalated to a new dose strength, any subjects without final results on lower doses do not block allocation to the new dose, in addition it is possible to specify two different maximums – one for when a dose has just been escalated to but has not been “cleared” (typically smaller and more cautious), and one when a dose has been cleared but we continue to allocate to it because it is the target dose (typically larger and more confident). This method is such an improvement that we recommend moving any design using open enrolment to this new version of FACTS.</li>
<li>Improved Ordinal Toxicity model – the way the likelihood is calculated has been improved – reducing the uncertainty in the model fit. Any design using an ordinal model will need to re-calibrate the prior if you move the design to FACTS 6.3.0. If you have a design already complete, or in execution we recommend you remain using the earlier version of FACTS for that trial.</li>
</ol>
</section>
<section id="facts-6.2.0-changes-to-n-crm" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="facts-6.2.0-changes-to-n-crm"><span class="header-section-number">2.5</span> FACTS 6.2.0 Changes to N-CRM</h2>
<p>In FACTS 6.2.0 features available separately in the other FACTS CRM engines (CRM (Toxicity), bCRM &amp; CRM Ordinal) were all incorporated into N-CRM. This allowed these features to be used in conjunction with N-CRM’s target toxicity band methodology, overdose control and open enrollment features, as well as in conjunction with each other for the first time.</p>
<p>The new features are:</p>
<ol type="1">
<li>From CRM (Toxicity) the option to specify that the data is coming from ‘two groups’ and for the toxicity experienced in the two groups to be modelled with a joint model [CRM 2 Sample]. This allows a trial where there are two patient populations (such as adults and children) or where there are two versions of the treatment to be simulated.</li>
<li>From bCRM the option to model a second binary efficacy endpoint [bCRM] and the for dose allocation to proceed in two stages – the first to establish an MTD and the second to establish an MED.</li>
<li>From CRM Ordinal the option for the toxicity endpoint to be modelled not as binary endpoint, but one with different categories of toxicity, and with a joint model applied to the different categories [CRM Ordinal]. The endpoint can be to model either 3 or 4 categories of toxicity:
<ol type="a">
<li>category 1 is “no toxicity”,</li>
<li>category 2 is “mild toxicity”,</li>
<li>category 3 is “toxicity”</li>
<li>category 4 (if included) is “severe toxicity”</li>
</ol></li>
</ol>
<p>All decision making is made in terms of the probability of observing a category 3 (or worse) toxicity.</p>
</section>
<section id="facts-6.1.0-changes-to-n-crm" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="facts-6.1.0-changes-to-n-crm"><span class="header-section-number">2.6</span> FACTS 6.1.0 Changes to N-CRM</h2>
<p>In FACTS 6.1.0 N-CRM has the new feature of ‘design variants’ that allow the user to easily simulate and evaluate an N-CRM design at different sample sizes. This change includes 4 elements:</p>
<ol type="1">
<li>Under the ‘Study’ tab the user can now specify the number of design variants, and for each variant the maximum study size in Cohorts.</li>
<li>On the simulation tab FACTS will display a copy of each simulation scenario for each variant.</li>
<li>The simulation results now include the Ppn of trials that stopped for each stopping reason: stopping because all doses are too toxic (the toxicity estimates exceed the overdose criteria), because a stopping rule was met or because the study cap was reached.</li>
<li>There are now a set of cross variant graphs that show trellis plots of the key summary graphs by design variant and scenario.</li>
</ol>
</section>
</section>
<section id="starting-facts" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Starting FACTS</h1>
<p>FACTS is usually first started using the FACTS icon installed on the Windows desktop or from the Windows Start \&gt; Programs menu.</p>
<p>When the application opens, you are presented with the main introduction screen of FACTS (<a href="#fig-intro" class="quarto-xref">Figure&nbsp;1</a>). From here you can start designing an N-CRM trial, by double clicking N-CRM in the list of available designs, or by selecting the N-CRM design option from the File \&gt; New \&gt; Dose Escalation menu.</p>
<p>FACTS will also be associated the parameter files it writes out with a ‘.facts’ file extension. Clicking on any one of these files will automatically start FACTS with that file opened.</p>
<p>Note: Depending on your license, some design options may not be available.</p>
<div id="fig-intro" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-intro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-4175651506.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-intro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: FACTS introduction screen
</figcaption>
</figure>
</div>
<p>From this screen a new design can be started by selecting the design type in the list and double clicking it, or clicking on the ‘create new’ button at the bottom of the list.</p>
<p>In the ‘Recent Work’ panel, the use can select from the list of most recently opened FACTS files, or from the list of directories where those files were located, opening the folder and selecting a FACTS file from there.</p>
<p>Once a FACTS design has been created, the appropriate FACTS design module can be launched by double clicking on the “.facts” file in Windows Explorer.</p>
<p>Once a specific type of FACTS design has been selected or an existing FACTS file opened, the FACTS GUI displays the tabs and parameters appropriate to that type of trial design.</p>
</section>
<section id="the-facts-n-crm-gui" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> The FACTS N-CRM GUI</h1>
<p>The FACTS N-CRM GUI conforms to the standard FACTS GUI layout, with information and displays divided across various standard tabs (<a href="#fig-tablayout" class="quarto-xref">Figure&nbsp;2</a>).</p>
<ul>
<li>The Study Tab has sub-tabs for entering Study Information and specifying the Treatment Arms (doses) available in the study. This is where the user specifies the ‘given’ requirements, or constraints, of the trial to be designed.</li>
<li>The Virtual Subject Response tab has sub-tabs for specifying Explicitly Defined response scenarios to simulate and loading External data files of simulated subject responses. This is where a set of different toxicity rates per dose are specified that should represent the expected ‘space’ of the expected dose-toxicity profiles for the compound being tested.</li>
<li>The Design has sub-tabs for specifying the Allocation Rules, Stopping rule and Toxicity Response model. These are the design choices open to the trial biostatistician. The expected consequences of these design choices are estimated by running simulations of the trials using the various virtual subject response profiles defined.</li>
<li>On the Simulation Tab, the user controls and runs simulations and can view the simulation results.</li>
<li>On the Analysis tab, the user can use the design to analyze a specific data set and report the result of fitting the specified toxicity response model and the recommended dose for the next cohort.</li>
</ul>
<div id="fig-tablayout" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-tablayout-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-3201765865.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-tablayout-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Tab layout of FACTS
</figcaption>
</figure>
</div>
<p>Also on the menu bar, on the right hand side of the FACTS Window, is a button labeled “Notes”; clicking this button reveals a simple “notepad” window in which the user can maintain some simple notes that will be stored within the “.facts” file (see <a href="#fig-notes" class="quarto-xref">Figure&nbsp;3</a> and <a href="#fig-designnotes" class="quarto-xref">Figure&nbsp;4</a>)</p>
<div id="fig-notes" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-notes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-2023108780.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-notes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: The ‘Notes’ button
</figcaption>
</figure>
</div>
<div id="fig-designnotes" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-designnotes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-2814137677.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-designnotes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Example design notes
</figcaption>
</figure>
</div>
<p>The notepad window comes with two further buttons: one to change the window to a free floating one that can be moved away from the FACTCS window; and the other to close it.</p>
<p>The Notes field can be used for any text the user wishes to store with the file. Suggested uses are: to record the changes made in a particular version of a design and why; and to comment on the simulation results. This will help when coming back to work that has been set aside, to recall what gave rise to the different version of a design.</p>
</section>
<section id="the-standard-facts-menus" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> The Standard FACTS Menus</h1>
<section id="the-file-menu" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="the-file-menu"><span class="header-section-number">5.1</span> The “File” Menu</h2>
<p>FACTS has a File menu with commands similar to those found in most Windows applications, but also some unique to FACTS. The commands can be found in <a href="#tbl-filecommands" class="quarto-xref">Table&nbsp;2</a>.</p>
<div id="tbl-filecommands" class="striped hover quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[15,85]">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-filecommands-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: List of commands in the CRM file menu
</figcaption>
<div aria-describedby="tbl-filecommands-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-striped table-hover caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Command</th>
<th style="text-align: left;">Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">New</td>
<td style="text-align: left;">Allows the user to select a trial design type and start a new design; if there are unsaved changes in the current design the user is prompted to save them first.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Open</td>
<td style="text-align: left;">Allows the user to select an existing FACTS file and open it; if there are unsaved changes in the current design the user is prompted to save them first.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Save</td>
<td style="text-align: left;">Saves the current changes in the design to the currently open FACTS file.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Save As</td>
<td style="text-align: left;">Allows the current version of the design to be saved to a new FATCS file; this file is then the “currently open” FACTS file going forward.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Export Project</td>
<td style="text-align: left;">Creates a “Zip” archive containing the current FACTS file and all the simulation results, so these can be easily archived, emailed, saved, etc.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Recent Projects</td>
<td style="text-align: left;">Contains entries for the last ten FACTS files opened: selecting one re-opens it.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Recent Folders</td>
<td style="text-align: left;">Contains entries for the folders that contain the last ten FACTS files opened: selecting one opens a file browser window on that folder allowing a ‘.facts’ file in that folder to be selected (or allowing the user to navigate to some different folder and select a ‘.facts’ file there).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Examples</td>
<td style="text-align: left;">Contains example projects for the different design engines: selecting one opens it.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Close</td>
<td style="text-align: left;">Closes the current FACTS file, returning the user to the FACTS introduction screen.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Exit</td>
<td style="text-align: left;">Closes FACTS altogether.</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="facts-settings-menu" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="facts-settings-menu"><span class="header-section-number">5.2</span> FACTS Settings Menu</h2>
<p>The “Settings” command menu allows the user to do 2 things:</p>
<ul>
<li>Set various FACTS options to local settings – see below for details.</li>
<li>Reset the options based on the stored configuration file. This file, “config.xml”, will initially be installed during the FACTS installation process and is stored in the Windows “Program Files” folder, in the sub-folder where FACTS get installed.</li>
<li>Change the stored configuration file. This command allows you to select a new configuration file and have FACTS copy it to the sub-folder within the Windows “Program Files” folder, where FACTS get installed so it becomes the new stored configuration file. This allows IT support to easily disseminate configuration changes.</li>
<li>Enter a new or changed license key.</li>
</ul>
<section id="set-options" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="set-options"><span class="header-section-number">5.2.1</span> Set Options</h3>
<p>The FACTS Options dialog allows the user to:</p>
<ul>
<li>Set and Test the connection parameters to access a compute grid for running simulations.</li>
<li>Configure the version and location of R or R Studio that can be launched from within FACTS</li>
<li>Select how gamma distributions are parameterized.</li>
</ul>
<section id="grid-configuration" class="level4" data-number="5.2.1.1">
<h4 data-number="5.2.1.1" class="anchored" data-anchor-id="grid-configuration"><span class="header-section-number">5.2.1.1</span> Grid Configuration</h4>
<p>A grid compute facility for running simulations will only be available if your local IT services have set one up. If they have done so, they</p>
<ul>
<li>May have already set the appropriate parameters In the FACTS configuration file included with the FACTS installation files.</li>
<li>Inform you of the parameters to be set manually via this dialog</li>
<li>Send a new configuration file that can be installed using the “Load Options” menu command.</li>
</ul>
<p>If modifying the grid options manually, select the “Options” menu command and enter the values on the “Grid Configuration” tab of the displayed dialog window.</p>
<div id="fig-webservice" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-webservice-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-1963956967.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-webservice-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Webservice Configuration
</figcaption>
</figure>
</div>
<p>First select the type of interface to the grid to be used, this is either:</p>
<ul>
<li>Via a network shared drive (with a “sweeper script” running on a client machine to transfer jobs to the grid management system and return results from it).</li>
<li>Via a web service system using a webserver and database to communicate to a grid management system. The IT group supporting the grid should be able to tell you which interface they have implemented, if any. If access to the grid is via a Network Share it is necessary to specify:</li>
<li>The location of the network share folder, usually in the form \&lt;server name&gt;\&lt;folder name\&gt;.</li>
<li>Whether the grid client is running Windows or Linux (so end-of-line characters can be corrected)</li>
<li>The listener delay – this is the interval between “looks” when FACTS is waiting for simulation results to be complete</li>
</ul>
<p>Once specified it is possible to use the “Test” button to check that the Network Shared folder is accessible and writeable.</p>
<p>If access to the grid is via a web service:</p>
<ul>
<li>The location of the web service endpoint.</li>
</ul>
<p>Clicking on “Test Configuration” and will cause FACTS will attempt to connect to the FACTS grid controller. The control will show which components of the connection are working.</p>
<p>See the FACTS Installation Guide and FACTS Simple Grid Interface Guide for more details of setting up a grid.</p>
</section>
<section id="r-configuration" class="level4" data-number="5.2.1.2">
<h4 data-number="5.2.1.2" class="anchored" data-anchor-id="r-configuration"><span class="header-section-number">5.2.1.2</span> R Configuration</h4>
<p>In FACTS on the Simulation tab there are two controls that launch R – “Open in R” and “ Design Report” (in FACTS 6.2.0 the latter only available for FACTS Core designs).</p>
<p>To enable these to work the user must specify where the R or RStudio executable is installed and (if there is more than one version of R installed) which version of R to use.</p>
<div id="fig-rconfig" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rconfig-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-1268844426.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rconfig-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: The R Configuration Dialog
</figcaption>
</figure>
</div>
<p>The dialog allows the user to Add, Edit, Test and Remove links to versions of R.</p>
<div id="fig-rlink" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rlink-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-272657384.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rlink-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Adding a link to R
</figcaption>
</figure>
</div>
<p>Clicking on “Add” opens a normal Windows directory browser window, the user must navigate to the location of an R installation (for example “C:\Program Files\R\R-2.15.2\bin”, select the file R.exe, and click “Open”. This adds a new entry on the R configuration dialog.</p>
<p>Clicking on “Edit” operates similarly to “Add” above, except the selected location replaces that currently selected entry on the R configuration dialog rather than adding a new one.</p>
<p>Clicking on “Test” checks whether the currently selected entry on the R configuration dialog is available, if it is not an error dialog is displayed:</p>
<div id="fig-rconfigerror" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rconfigerror-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-2537319102.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rconfigerror-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Example of R Configuration error
</figcaption>
</figure>
</div>
<p>Clicking on “Remove” removes the currently selected location on the R configuration dialog.</p>
<p>The version of R to use by default is selected by clicking on the ‘Active’ check box of the version to use.</p>
</section>
<section id="gamma-distribution-parameters" class="level4" data-number="5.2.1.3">
<h4 data-number="5.2.1.3" class="anchored" data-anchor-id="gamma-distribution-parameters"><span class="header-section-number">5.2.1.3</span> Gamma Distribution Parameters</h4>
<p>In FACTS a number of parameters require inverse gamma distributions to be specified as priors for the parameter value. There are two different parameterization of the inverse gamma provided so that the user can select the form they find the most intuitive.</p>
<div id="fig-gammaparam" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gammaparam-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-718655442.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gammaparam-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: The parameterisation of Inverse Gamma Distributions
</figcaption>
</figure>
</div>
<p>The first form uses parameters that are the mean of the distribution and the equivalent weight in terms of the equivalent number of observations. The second form uses an ‘Alpha’ and ‘Beta’ parameterization that some statisticians are familiar with and will find natural to use.</p>
</section>
</section>
<section id="enter-a-license-key" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="enter-a-license-key"><span class="header-section-number">5.2.2</span> Enter a license key</h3>
<p>If a new license key is required, this command can be used to enter one. There are two ways of entering a new license:</p>
<div id="fig-licensekey" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-licensekey-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/clipboard-1671179033.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-licensekey-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: Enter FACTS License Key
</figcaption>
</figure>
</div>
<p>The key can be entered directly, along with the associated Organization name, or by selecting a supplied license file.</p>
</section>
</section>
<section id="the-help-menu" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="the-help-menu"><span class="header-section-number">5.3</span> The Help Menu</h2>
<p>FACTS has a Help menu with commands to assist you with the use of FACTS, providing links to users guides, tutorial and training videos. The commands are:</p>
<div id="tbl-helpcommands" class="striped hover quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[15,85]">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-helpcommands-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: List of commands in the CRM help menu
</figcaption>
<div aria-describedby="tbl-helpcommands-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-striped table-hover caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Command</th>
<th style="text-align: left;">Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">User Guides</td>
<td style="text-align: left;">Provides access to documents such as this one, with (mainly) one user guide to each design type within FACTS. Exceptions to this simple structure are: <br> 1. Core Design User Guide: A guide to the options under the ’Design” tab for FACTS Core for all endpoints. <br> 2. Staged Design User Guide: As the staged design allows the design of one FACTS Core stage followed by a second, most of the interface is common to the basic FACTS Core. This guide describes the differences and additional aspects for all endpoints. <br> 3. Dose Escalation User Guide: This covers all the Dose Escalation engines except for N-CRM and 2D-CRM that have their own. It thus covers the 3+3, mTPI, CRM(Toxicity), CRM(Ordinal), CRM(Efficacy) and bCRM engines.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tutorials</td>
<td style="text-align: left;">Provides access to all the tutorial documents, which describes detailed examples of use of all the engines in FACTS and many of their options. The examples under the File &gt; Examples menu option largely correspond to the different tutorials described here.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Design Specifications</td>
<td style="text-align: left;">These are technical documents that describe the mathematical models implemented in FACTS in detail.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Execution Guides</td>
<td style="text-align: left;">The FACTS GUI can be run in command line mode so simulations can be run/re-run from scripts. With the simulation command line flag, and passed a directory rather than a file, FACTS will run simulations for every “.facts” file in that directory – and recurse into any sub-directories and simulate any “.facts” files there too. A full guide to command line mode can be found here. The FACTS simulation engines are also available in “command line executable” form. There are guides here that document their command line parameters and how to use them to analyse a data set – e.g.&nbsp;to perform an interim analysis whilst executing a trial designed with FACTS.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FACTS file XML Specs</td>
<td style="text-align: left;">These guides describe the parameters in the “.facts” files, which are text files in XML format. For expert users understanding this format allows them to use scripts to generate versions of an initial “.facts” file with slight variations in the parameters such as stopping thresholds or priors. Modification of “.facts” files outside of FACTS needs to be done with care, errors may render the file unusable by FACTS.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Videos</td>
<td style="text-align: left;">Provides access to links to the introductory, training and webinar videos that Berry Consultants has recorded and makes available over the internet to FACTS users.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">View log…</td>
<td style="text-align: left;">If an error has occurred in FACTS, often the FACTS log file can shed light on what is going wrong. The log file is hidden away in some unfashionable and hard to locate Windows folder; this command option provides easy access to it. Allowing you to email facts support with a description of what occurred, attaching a copy of this log file having saved it somewhere convenient such as your desktop.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Support</td>
<td style="text-align: left;">Launch a simple editor for sending an email to our support account: facts@berryconsultants.net</td>
</tr>
<tr class="odd">
<td style="text-align: left;">About</td>
<td style="text-align: left;">Displays a simple “about box” that includes the detailed version number of FACTS.</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-braun2002bivariate" class="csl-entry" role="listitem">
Braun, Thomas M. 2002. <span>“The Bivariate Continual Reassessment Method: Extending the CRM to Phase i Trials of Two Competing Outcomes.”</span> <em>Controlled Clinical Trials</em> 23 (3): 240–56.
</div>
<div id="ref-broglio2015bayesian" class="csl-entry" role="listitem">
Broglio, Kristine R, Larissa Sandalic, Tina Albertson, and Scott M Berry. 2015. <span>“Bayesian Dose Escalation in Oncology with Sharing of Information Between Patient Populations.”</span> <em>Contemporary Clinical Trials</em> 44: 56–63.
</div>
<div id="ref-dehbi2021controlled" class="csl-entry" role="listitem">
Dehbi, Hakim-Moulay, John O’Quigley, and Alexia Iasonos. 2021. <span>“Controlled Backfill in Oncology Dose-Finding Trials.”</span> <em>Contemporary Clinical Trials</em> 111: 106605.
</div>
<div id="ref-de1996incorporating" class="csl-entry" role="listitem">
deMoor, CA, DM Higdon, SG Hilsenbeck, GM Clark, and DD von Ho. 1996. <span>“Incorporating Toxicity Grade Information in the Continual Reassessment Method.”</span>
</div>
<div id="ref-neuenschwander2008critical" class="csl-entry" role="listitem">
Neuenschwander, Beat, Michael Branson, and Thomas Gsponer. 2008. <span>“Critical Aspects of the Bayesian Approach to Phase i Cancer Trials.”</span> <em>Statistics in Medicine</em> 27 (13): 2420–39.
</div>
<div id="ref-o1999two" class="csl-entry" role="listitem">
O’Quigley, John, Larry Z Shen, and Anthony Gamst. 1999. <span>“Two-Sample Continual Reassessment Method.”</span> <em>Journal of Biopharmaceutical Statistics</em> 9 (1): 17–44.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>