{
  "hash": "c62528511e3db7941965305227d5bf21",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"2024-12-06-DropoutRateExplanation\"\ndescription: \"Deep dive into dropout rate specification.\"\nauthor:\n  - name: FACTS Development Team\n    url: https://factshub.berryconsultants.com/\n    affiliation: Berry Consultants\n    affiliation-url: https://berryconsultants.com/ \ndate: 2024-12-06\ncategories: [Core, Staged, Deepdive] # self-defined categories\nexecute:\n  echo: false\nfilters:\n  - shinylive\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n---\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'shinylive' was built under R version 4.3.3\n```\n\n\n:::\n:::\n\n\n\n\n\n\n# How to specify dropouts in FACTS\n\nFor the continuous and dichotomous engines, and the multiple endpoint engine, the default dropout scenario is that no subjects drop out of the study before observing their final endpoint data. If dropouts are expected, the user can specify either the “Dropouts per Dose,” or “Dropouts per Dose per Visit.”\n\n## Dropouts Per Dose\nIf “Dropouts per Dose” is selected, then each subject has a probability of not having an observable final endpoint value equal to the dropout rate of the dose that subject is randomized to. If each subject has multiple visits and “Dropouts per Dose” is selected, then the conditional probability of dropping out before each visit given that the subject had not dropped out up to the visit before rates are all equal. In other words, if the total dropout rate is π_D, the probability of dropping out between visits i and i+1 given that the subject had not dropped out at visit $i$ is\n$$\n1-\\left(1-\\pi_D\\right)^{(\\frac{1}{V})}\\text{ where } V \\text{ is the total number of visits.}\n$$\n\n### Dropout Per Dose Guide\n\n```{shinylive-r}\n#| standalone: true\n#| viewerHeight: 600\n\nlibrary(shiny)\nlibrary(tidyverse)\n\nui <- fluidPage(\n\n    # Application title\n    titlePanel(\"Dropout Per Dose\"),\n\n    # Sidebar with a slider input for number of bins \n    sidebarLayout(\n        sidebarPanel(\n          numericInput(\"dropoutRate\", \"Desired Dropout Rate:\", value = 0.1),\n          sliderInput(\"numVisits\", \"Number of visits:\", \n                      min = 1, max = 20, value = 5)\n          \n        ),\n\n        # Show a plot of the generated distribution\n        mainPanel(\n           tableOutput(\"visitsGuide\")\n        )\n    )\n)\n\n# Define server logic required to draw a histogram\nserver <- function(input, output) {\n\n  output$visitsGuide <- renderTable({\n    data.frame(Visits = 1:input$numVisits,\n                     ConditionalDropoutRate = 1-(1-input$dropoutRate)^(1/input$numVisits)) %>%\n      mutate(TotalDropoutRate = 1-cumprod(1-ConditionalDropoutRate),\n             MarginalDropoutRate = c(TotalDropoutRate[1], TotalDropoutRate[-1] - TotalDropoutRate[-n()])) %>%\n      select(Visits, ConditionalDropoutRate, MarginalDropoutRate, TotalDropoutRate) %>%\n      rename(\"Visit number\" = \"Visits\",\n             \"Prob. dropout given not dropped before previous visit\" = \"ConditionalDropoutRate\",\n             \"Prob. dropout between previous visit and current visit\" = \"MarginalDropoutRate\",\n             \"Prob. dropout before visit\" = \"TotalDropoutRate\")\n  }, digits = 4)\n}\n\n# Create Shiny app ----\nshinyApp(ui = ui, server = server)\n```\n\n## Dropouts Per Dose Per Visit\n\nIf “Dropouts per Dose per Visit” is selected, then each subject has a user specified probability of dropping out before a visit v that is specified as the conditional probability of dropping out before visit v given that that they had not dropped out by visit v-1. This leads to a total dropout rate π_D for a participant that is equal to:\n\n$$\n\\pi_D = 1-\\Pi_{v=0}^V(1-\\pi_v)\n$$\n",
    "supporting": [
      "2024-12-06-DropoutsDeepdive_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}