---
title: "Continuous Endpoints"
subtitle: "Description of how to specify the virtual subject response for continuous endpoints."
format:
  html:
    toc: true
    toc-depth: 4
    toc-title: "Table of Contents"
    number-sections: true
    number-depth: 4
---

# Virtual Subject Response for Continuous Endpoints

## Explicitly Defined

Explicitly defined VSRs are the most common type specified in FACTS. In
continuous endpoint designs, an explicitly defined VSR is specified by providing
a mean response and patient level standard deviation of the response
for each arm in the trial. In certain cases, based on the selections made in the
Study Info tab, baseline VSRs and Longitudinal VSRs may also need to be specified.

### Dose Response

![](../coreUGattachments/continuous/media/image21.png){width="5.9838418635170605in"
height="4.425892388451444in"}

Dose response profiles can be added and deleted, and for each profile
the user specifies:

1.  The mean response for each treatment arm. If
    baseline is being simulated the user can select (on the Study tab) whether the response
    to be analyzed is [the change from baseline or absolute response](## "The
    mean response to be analyzed is
    always as specified on this tab, if the analysis is on change from
    baseline then the response specified here is change from baseline,
    if the response to be analyzed is absolute, then the response
    specified here is the absolute final score."), and depending on that selection
    the response specified on this tab is either change from baseline or
    absolute response.

2.  The standard deviation of the response -- either through a common SD
    of response for all treatment arms, or by specifying the standard
    deviation for the response on each treatment arm separately.

3.  A check box that allows the user to specify whether a specific arm
    "should succeed" in that scenario.FACTS uses this value to report on the
    proportion of simulations that were successful **and** selected a 'good'
    treatment arm. The check box values do not effect the simulation code, just
    how output is reported.

The graph on the Explicitly Defined > Dose Response tab shows the mean response
specified for each treatment arm +/- 1.96 SD, and the control response + the default [CSD](## "Clinically significant difference") level specified on the QOI tab.

If a 2D treatment arm model is being used, the doses are listed in
"effective dose strength order" as was defined on the treatment arm tab.

![A screenshot of a social media post Description automatically
generated](../coreUGattachments/continuous/media/image22.png){width="5.055750218722659in"
height="3.838963254593176in"}

#### Load Scenario Means From File

If the "Load scenario means from a file" option is selected, then in
scenarios using this profile the simulations will use a range of dose
responses instead of what is specified in the table.

Each individual simulation uses one set of mean responses from the
supplied file, each row being used in an equal number of simulations.
The summary results are thus averaged over all the VSRs in the file. The
use of this form of simulation is somewhat different from simulations
using a single rate or single external virtual subject response file.
When all the simulations are simulated from a single version of the
'truth' then the purpose of the simulations is to analyse the
performance of the design under that specific circumstance. When the
simulations are based on a range of 'truths' then the summary results
show the expected probability of the different outcomes for the trial
over that range of possible circumstance. Note that, to give different
VSRs different weights of expectation, the more likely VSRs should be
repeated within the file.

![A screenshot of a social media post Description automatically
generated](../coreUGattachments/continuous/media/image23.png){width="6.011470909886264in"
height="4.564667541557306in"}

After selecting the ".mvsr" file the graph shows the individual mean
responses and the overall mean response over all the VSRs.

The format of the file is a simple CSV text file. Lines starting with a
'#' character are ignored so the file can include comment and header
lines. There must be two columns per treatment arm giving the mean and
SD of the change from baseline on each arm, the columns must be grouped
first means then SDs and within each group they must be in dose index
order. E.g.:

```
#Cntrl, D1, D2, D3, Cntrl, D1, D2, D3
-1, -1, -1, -1, 5, 5, 5, 5
-1, -1.2, -1.4, -1.6, 5, 5, 5, 5
-1, -1.8, -2.5, -2.5, 5, 5, 5, 5
-1, -2, -2.5, -3, 5, 5, 5, 5
-1, -2.5, -3.25, -3.25, 5, 5, 5, 5
-1, -2.5, -3.25, -2.5, 5, 5, 5, 5
```

### Longitudinal VSR

The explicitly defined virtual subject longitudinal responses can be
specified with any of 3 methods. No matter which longitudinal VSR simulation
method is selected, it can be combined with any Dose Response VSR, and the
dose response VSR is [guaranteed to have the marginal distribution](## "Unless
Use Baseline Adjustment for Subject Response is specified in the Baseline VSR tab.") specified
in the dose response VSR section. The longitudinal VSR determines how to
correlate early endpoint values with the final endpoint value.

The three longitudinal VSRs available for continuous endpoints are:

1.  Correlated

2.  Hierarchical, which comes in two 'flavors':

    a.  Hierarchical (as in versions of FACTS prior to 6.1): the per
        subject random element 'delta' is scaled at visit 't' by the
        response fraction f~t~ at that visit.

    b.  Hierarchical MMRM (first available in FACTS 6.1): the per subject random
        element 'delta' is the same at all visits.

3.  ITP

#### Correlated Simulation of Longitudinal Data

The *Correlated* method for generating longitudinal responses simulates
the response observed at each visit by summing 3 elements -- a fraction
of the final response, a fraction of the 'noise' from the previous
observation, and additional element of noise at the current visit.

![Table Description automatically
generated](../coreUGattachments/continuous/media/image24.png){width="5.975197944006999in"
height="4.537123797025372in"}

The user specifies:

$\rho_{t}$
: the correlation in the observation at visit $t$ with visit
$t - 1$. Values should be in the range 0-1. The closer to 1, the
greater the correlation between visit $t - 1$ and visit $t$. The $\rho$ at
Visit 1 is not enterable, because there is no previous visit to correlate the
first visit value with.

$f_{t}$
: the fraction of the final mean response $\mu_{j}$ seen at
visit $t$. Values can lie outside the range 0-1.

$\varphi_{t}^{2}$
: the fraction of the final standard deviation (SD)
that will be observed at this visit. Values must be $>0$. An additional
element of noise at visit $t$ is sampled so that in combination with
the noise carried forward from visit $t - 1$, the overall variance in
observations at visit $t$ will have this fraction of the final
variance.

For the first visit of patient $i$, the response $y_{i,1}$ assuming
patient $i$ was randomized to dose $j$ is simulated as:

$$y_{i,1}\ \sim\ N\left( \mu_{j,1},\sigma_{j,1}^{2} \right)$$

For time points after the first visit, observed data is simulated as:

$y_{i,t}\ \sim\ \mu_{j,t} + \sqrt{1 - \rho_{t}^{2}}N\left( 0,\sigma_{j,t}^{2} \right) + \rho_{t}\left( y_{i,t - 1} - \mu_{j,t - 1} \right)\frac{\sigma_{j,t}}{\sigma_{j,t - 1}}$
for $t \geq 2$.

There are 3 components of this equation. First, is the marginal mean of
the response at the particular visit $t$. This parameter is called
$\mu_{j,t}$. $\mu_{j,t}$ is simply the dose response at the final
endpoint times the proportion of the final effect that should be
observed at visit $t$.

$$\mu_{j,t} = f_{t}\mu_{j}$$

where $f_{t}$ is input as the response fraction for each visit, and
$\mu_{j}$ is the dose response for dose $j$, which is input as the
Response for each dose on the Dose Response tab.

The second component controls the adjustment of the variance based on
the correlation of the endpoint to be sampled with the previous visit's
response. A strong correlation ($\rho_{t}$ close to $\pm 1$) results in
a variance reduction term $\sqrt{1 - \rho_{t}^{2}}$ close to 0, which
guarantees that the time $t$ response is very close to the time $t - 1$
response. The variance reduction term modifies a dose's marginal visit
variance $\sigma_{j,t}^{2}$. This dose by visit variance is
calculated by squaring the marginal standard deviation for a dose's
final endpoint response $\sigma_{j}$ times the proportion of the total
variance that is observed at visit $t$, $\phi_{t}$, which is a user
input on the Longitudinal VSR tab.

So, $\sigma_{j,t}^{2} = \phi_{t}^{2}\sigma_{j}^{2}$ where $\phi_{t}$ is
the fraction of final SD specified in the Longitudinal VSR tab in FACTS,
and $\sigma_{j}$ is the SD of the response specified in the Dose
Response VSR tab in FACTS.

The final component of the model adjusts the mean of the visit $t$
response that is to be simulated based on the residual of the time
$t - 1$ response. This component is:

$$\rho_{t}\left( y_{i,t - 1} - \mu_{j,t - 1} \right)\frac{\sigma_{j,t}}{\sigma_{j,t - 1}}$$

Values of $\rho_{t}$ close to 1 lead to visit $t$ responses with
Z-scores similar to the visit $t - 1$ responses, values of $\rho_{t}$
close to 0 lead to simulation of visit $t$ responses with no regard to
the previous visit's residual value, and values of $\rho_{t}$ close to
-1 lead to visit $t$ responses with Z-scores that are -1 times the
previous visit's Z-score.

The specification of the visit level means $\mu_{j,t}\ $and variances
$\sigma_{j,t}^{2}$ as response fractions and fractions of final SD,
respectively, allows for each created longitudinal VSR to work with
every created Dose Response VSR.

#### Hierarchical model

The hierarchical method for generating longitudinal responses simulates
the response observed by sampling responses from a Normal distribution,
where the mean is a combination of the mean final response of the
treatment and a per-subject difference, scaled by a visit
dependent coefficient, and the variance is a fraction of the variance of
the final treatment effect.

This Hierarchical form of this model has a per-subject random
effect parameter $\delta_{i}$ that is scaled down by the response
scaling parameter $f_{t}$. In the very similar Hierarchical (MMRM) model
(described below), the random effect $\delta_{i}$ is not scaled by
$f_{t}$, so it provides a constant adjustment to all visits.

![](../coreUGattachments/continuous/media/image25.png){width="5.95597987751531in"
height="4.238392388451444in"}

In the Hierarchical longitudinal subject data simulation model, the response
variance is decomposed into two components. One is the within-subject variability
(called intra-subject variability), and the other is across-subject variability
(Called inter-subject variability). The parameter $\omega$ determines
how much of the total variability is simulated in the inter- and intra-subject
variabilities. More variability in the inter-subject simulation means that there is
less variability in the intra-subject simulation, so the early visit endpoints will be
more correlated with the final visit endpoint, and vice versa.

The parameters of the Hierarchical longitudinal subject data simulation model are:

$\omega$
: the fraction of the variance of the final response ($\sigma_{j}^{2}$) on the
treatment arm that will be simulated in the inter-subject variance. The
higher this value is, the more predictive a subject's early
observations are of their final outcome.

$f_{t}$
: the fraction of the final mean response $\mu_{j}$ seen at
visit $t$. Values can lie outside the range 0-1.

$\phi_{jt}^{2}$
: the fraction of the final endpoint variance that will be observed at this visit. Values
must be $>0$ and must be such that $\phi_{jt}^{2} - f_{t}^{2}\omega$ is
$>0$.

Observation $y_{it}$ is the visit response at visit $t$ for a subject
$i$ that was randomized from dose $j$. The observation is generated from
the distribution described by:

$$y_{i,t} = f_{t}\left( \mu_{j} + \delta_{i} \right) + N\left( {0,\ \left( \phi_{jt}^{2} - f_{t}^{2}\omega \right)\ \sigma}_{j}^{2} \right)$$

where $\sigma_{j}^{2}$ is the variance of the final endpoint response
for dose $j$, $\phi_{jt}^{2}$ is the fraction of total variance observed
at visit $t$ on dose $j$, $\mu_{j}$ is the final endpoint response mean
for dose $j$, $\delta_{i}$ is a subject level random effect, $f_{t}$ is
the fraction of the final endpoint response that is observed at visit
$t$, and $\omega$ is the proportion of overall variance due to
intersubject (across subject) variability.

The prior for the patient random effect term of patient $i$ who was
randomized to dose $j$ is

$$\delta_{ij}\ \sim\ N\left( 0,\ \omega\sigma_{j}^{2} \right)$$

If $\omega$ is close to 1, then most of the variability in the responses
comes from differences in participants and the visit-to-visit
correlation within a participant's follow-up is high. If $\omega$ is
close to 0, then there is little correlation between visits within a
participant's follow-up, and most of the overall variance comes from
noise in the within patient responses, rather than differences across
patients. In other words, large values of $\omega$ lead to early data
that is more predictive of the final endpoint.

Note that, in this model the response fraction $f_{t}$ is multiplied by
both the final endpoint mean and the patient level random effect. This
results in the variance of the dose $j$ response at visit $t$
being${\ \left( \phi_{jt}^{2} - f_{t}^{2}\omega \right)\ \sigma}_{j}^{2} + f_{t}^{2}\omega\sigma_{j}^{2} = \phi_{jt}^{2}\sigma_{j}^{2}$.
Additionally, since $f_{t}$ changes the proportion of the overall
variance that comes from the random effect, the simulated correlation
between visits decreases when values of $f_{t}$ less than 1 are
provided. See the MMRM version of the Hierarchical simulation model if
this is undesirable.

If all $\phi_{jt}^{2} = 1$ and $f_{t} = 1$, then the visits will have
pairwise correlations equal to $\omega$. If the $\phi_{jt}^{2}$ or
$f_{t}$ are less than 1, then the visit pairwise correlations will
depend on the input variance fractions $\phi_{jt}^{2}$ and $f_{t}$.

### Hierarchical (MMRM) model

The Hierarchical (MMRM) longitudinal patient simulation model is very
similar to the Hierarchical simulation method, except that in the MMRM
version the response fraction for a visit does not modify the patient
level random effect. The user inputs for the Hierarchical (MMRM) model
are nearly identical to the plain Hierarchical model.

$\omega$
: the fraction of the variance of the final response on the
treatment arm ($\sigma_{j}^{2}$) that will be simulated in the
inter-subject variance. The higher this value is, the more predictive
a subject's early observations are of their final outcome.

$f_{t}$
: the fraction of the final mean response $\mu_{j}$ seen at
visit $t$. Values can lie outside the range 0-1.

$\phi_{jt}^{2}$
: the fraction of the final endpoint variance that will be observed at this visit for
dose $j$, values must be \>0 and must be such that
$\phi_{jt}^{2} - \omega$ \> 0.

The Hierarchical MMRM method simulates responses at visit $t$ for a
subject $i$ that was randomized to dose $j$ from the distribution:

$y_{i,t} = f_{t}\mu_{j} + \delta_{i} + N\left(0,\ \left( \phi_{jt}^{2} - \omega \right)\ \sigma_{j}^{2} \right)$.

where $\sigma_{j}^{2}$ is the variance of the final endpoint response
for dose $j$, $\phi_{jt}^{2}$ is the fraction of total variance observed
at visit $t$ on dose $j$, $\mu_{j}$ is the final endpoint response mean
for dose $j$, $\delta_{i}$ is a subject level random effect, $f_{t}$ is
the fraction of the final endpoint response that is observed at visit
$t$, and $\omega$ is the proportion of overall variance due to
intersubject (across subject) variability.

The prior for the patient random effect term of patient $i$ who was
randomized to dose $j$ is

$$\delta_{ij}\ \sim\ N\left( 0,\ \omega\sigma_{j}^{2} \right)$$

If $\omega$ is close to 1, then most of the variability in the responses
comes from differences in participants and the visit-to-visit
correlation within a participant's follow-up is high. If $\omega$ is
close to 0, then there is little correlation between visits within a
participant's follow-up, and most of the overall variance comes from
noise in the within patient responses rather than differences across
patients. In other words, large values of $\omega$ lead to early data
that is more predictive of the final endpoint.

Note that, in this model the response fraction $f_{t}$ is multiplied by
only the final endpoint mean and not the patient level random effect.
This results in the variance of the dose $j$ response at visit $t$
being ${\ \left( \phi_{jt}^{2} - \omega \right)\ \sigma}_{j}^{2} + \omega\sigma_{j}^{2} = \phi_{jt}^{2}\sigma_{j}^{2}$.
This total variance is the same as the non MMRM Hierarchical method, but
only the $\phi_{jt}^{2}$ parameter effects the variance of early
endpoint responses. If all $\phi_{jt}^{2} = 1$, then the visits will
have pairwise correlations equal to $\omega$. If the $\phi_{jt}^{2}$ are
less than 1, then the visit pairwise correlations will be larger than
$\omega$, with the exact value depending on the input variance fractions
$\phi_{jt}^{2}$.

### Integrated Two Component Prediction (ITP) Simulation of Longitudinal Data

The ITP method for generating longitudinal responses simulates the
response observed at each visit by summing 3 elements and scaling them
by an exponential function. The 3 elements are: the mean final response,
an element of inter-subject variability, and a residual variability at
the current visit.

![A screenshot of a cell phone Description automatically
generated](../coreUGattachments/continuous/media/image26.png){width="6.005688976377953in"
height="4.56027668416448in"}

The user specifies

$\omega_{j}$
: fraction (for each dose) of the variance of the final
response on the treatment arm ($\sigma_{j}^{2}$) used for the inter-subject
variance. The higher this value is, the more predictive a subject's
early observations are of their final outcome.

$k_{j}$
: the shape parameter (for each dose) of the exponential
component governing the increase in the observed response. The values
of $k$ should be scaled to take into account the length of time (in
weeks) to the intermediate and final visits. See below for more
intuition on sensible values of $k$.

For subject $i$ at visit $t$, who was randomized to dose $j$, the
response $y_{it}$ is simulated as:

$$y_{it} = \left( \mu_{j} + s_{i} + \epsilon_{it} \right)\left( \frac{1 - \text{exp}\left( k_{j}x_{t} \right)}{1 - \text{exp}\left( k_{j}x_{T} \right)} \right)$$

where $\mu_{j}$ is the mean of the final endpoint on dose $j$,
$s_{i}\sim N\left( 0,\ \omega_{j}\sigma_{j}^{2} \right)$ is a subject
specific random effect, each
$\epsilon_{it}\sim N\left( 0,{\ \sigma}_{j}^{2}\left( 1 - \omega_{j} \right) \right)$
is a residual error, $k_{d}$ is a shape parameter, $x_{t}$ are the visit
times that the $y_{it}$ are observed, and $x_{T}$ is the time of the
final endpoint.

The ITP model implies that the variance of the observations shrinks
towards 0 with the mean (so early visits have reduced expected responses
and variances).

The shape parameter $k$ determines the rate at which the final
endpoint's eventual effect is observed during a subject's follow-up. A
value of $k = 0$ indicates that the proportion of effect observed moves
linearly with time. A value of $k < 0$ means that the eventual final
effect is observed earlier in follow-up and plateaus off as time moves
towards the final endpoint. A value of $k > 0$ indicates that less of
the total final endpoint effect is observed early in follow up, but as
time approaches the final endpoint time the proportion of the effect
observed increases rapidly. Values of $k$ less than 0 tend to be more
common than values of $k$ greater than 0. See the figure below for a
collection of possible shapes of the change in response using different
values of $k$.

Additionally, unlike the Correlated or Hierarchical simulation methods,
the ITP method uses the actual visit time to simulate subject values.

![](../coreUGattachments/continuous/media/image27.png){width="4.043425196850394in"
height="2.645932852143482in"}

### Baseline -- change from baseline

If simulation of baseline has been included on the Study > Study Info
tab, a new virtual subject response tab is available for specifying the
baseline score.

![](../coreUGattachments/continuous/media/image28.png){width="5.718996062992126in"
height="4.071244531933508in"}

The simulation of distribution of baseline scores is specified using a
normal distribution with user specified mean and standard deviation,
and optionally applied upper and lower bounds to reflect limitations on
the score range or screening criteria. If the simulated
baseline score is truncated, then the ***true*** mean and SD of the
baseline are likely to be different from these values of the mean and SD
which are before truncation.

If adjusting the final response based on baseline, then the user selects
"Use Baseline Adjustment for Subject Response" and supplies 3
parameters:

$\beta$
: a coefficient that reflects the degree of influence of
baseline on final score and the degree of variability in the final
score due to baseline.

c: a centering offset, typically the expected mean of the observed
baseline scores

s
: a scaling element, typically set to the expected SD of the
baseline.

#### Example

In the above screenshot a baseline of mean 25 and SD 10 has
been specified -- so a centering of 25 and scaling of 10 is used.
Wishing to simulate an overall SD of 5 in the final change from baseline
and apportion two-thirds the variance to baseline, Beta has been set as
follows:

-   The desired final variance is 25 (5^2^), divided between 1/3^rd^
    dose response and 2/3^rd^ baseline effects.

-   The SD of the simulated response is set to 2.89
    $\sqrt{\left( 25*\frac{1}{3} \right)}$

-   The SD of the scaled baseline score is 1, so to contribute half the
    final variance of 25, Beta is set to 4.08
    $\sqrt{\left( 25*\frac{2}{3} \right)}$

-   Note that when simulating a baseline effect in this way, limiting
    the range of baseline by specifying upper and lower cut-offs --
    which might be natural limits of the endpoint, or due to inclusion /
    exclusion criteria in the protocol -- can significantly reduce the
    variance in the final endpoint due to the baseline effect.

### Baseline -- final endpoint

If the response is specified to be final endpoint score, then baseline
is specified as above, but the explicitly defined dose response is now
defined in terms of final endpoint.

## External

As well as simulating subject responses within FACTS they can be
simulated externally, from a PK-PD model for instance, and imported into
FACTS where the supplied responses are sampled from, when simulating the
trial. The selection of a file containing subject response data (which
must be in the required format) can be done from the External Files
sub-tab depicted below (Figure 6‑7).

To import an external file, the user must first add a profile to the
table. After adding the profile, the user must click "Browse" to locate
the file of externally simulated data. The user will then be prompted to
locate the external file on their computer with a dialog box.

As with other virtual subject responses, the user can specify which arms
"should succeed".

![A screenshot of a social media post Description automatically
generated](../coreUGattachments/continuous/media/image29.png){width="5.981505905511811in"
height="4.894612860892389in"}

### Required Format of Externally Simulated Detail

The supplied data should be in the following format: an ascii file with
data in comma separated value format with the following columns:

1)  Patient id, these must be positive integers and unique

2)  Arm Index (1 = Control, 2 = Treatment1, 3 = Treatment2, ...)

3)  Visit ID -- visit index (1= first visit, 2= second visit, ...). If
    baseline is included, then baseline is visit 0.

4)  Response

    a.  If **no** baseline is included, then the response provided must
        be change from baseline

    b.  If baseline is included, then the response provided must be the
        absolute response (and the design engine will compute change
        from baseline or analyze the absolute response as specified by
        the user on the Study tab).

Subjects need to have unique, positive integer IDs, all records for each
subject should be contiguous and in visit order.

The GUI requires that the file name has a ".dat" suffix.

Example 3 subjects, both assigned to the first arm, data for 4 visits :

+---------------------------------+------------------------------------+
| Continuous only                 | Continuous with baseline           |
+=================================+====================================+
| #subj id, Arm ID, Visit ID,     | #subj id, Arm ID, Visit ID,        |
| Response                        | Response                           |
|                                 |                                    |
| 1, 1, 1, 0.11                   | 1, 1, 0, 0.06022                   |
|                                 |                                    |
| 1, 1, 2, 0.22                   | 1, 1, 1, 0.12045                   |
|                                 |                                    |
| 1, 1, 3, 0.21                   | 1, 1, 2, 0.24091                   |
|                                 |                                    |
| 1, 1, 4, 0.19                   | 1, 1, 3, 0.48183                   |
|                                 |                                    |
| 2, 1, 1, 0.09                   | 1, 1, 4, 0.60229                   |
|                                 |                                    |
| 2, 1, 2, 0.12                   | 2, 1, 0, -0.00586                  |
|                                 |                                    |
| 2, 1, 3, 0.19                   | 2, 1, 1, -0.01163                  |
|                                 |                                    |
| 2, 1, 4, 0.22                   | 2, 1, 2, -0.02327                  |
|                                 |                                    |
| 3, 1, 1, 0.01                   | 2, 1, 3, -0.04654                  |
|                                 |                                    |
| 3, 1, 2, 0.02                   | 2, 1, 4, -0.05817                  |
|                                 |                                    |
| 3, 1, 3, 0.05                   | 3, 1, 0, 0.01287                   |
|                                 |                                    |
| 3, 1, 4, 0.09                   | 3, 1, 1, 0.02574                   |
|                                 |                                    |
|                                 | 3, 1, 2, 0.05148                   |
|                                 |                                    |
|                                 | 3, 1, 3, 0.10296                   |
|                                 |                                    |
|                                 | 3, 1, 4, 0.12870                   |
+---------------------------------+------------------------------------+

: Figure 3‑1: FACTS introduction screen

### External Directory of Files

By using the 'Browse for directory' option, the user can specify a
response profile that comprises a directory containing a number of
external response files. Like the "scenario means in a file" option, the
files in this directory will be used as a single profile, looping
through the different files for successive simulations. So individual
simulations will use a single external file from the directory, but the
summary results for the scenario will be averaged over all the files,
the number of simulations being round down to the nearest multiple of
the number of external files in the directory. The format of each
individual file should be the same as for a single external file, above.
Only files with the ".dat" suffix will be read, other files will be
ignored.

![A screenshot of a social media post Description automatically
generated](../coreUGattachments/continuous/media/image30.png){width="6.01919728783902in"
height="4.925456036745407in"}

# Execution

The Execution tab allows the user to specify profiles for subject
accrual rates and dropout rates. This tab is the same for all FACTS
dose-finding design engines.

## Accrual

The Accrual sub-tab provides an interface for specifying accrual
profiles; these define the mean recruitment rate week by week during the
trial. During the simulation, the simulator uses a Poisson process to
simulate the random arrival of subjects with the specified mean accrual
rate.

Accrual profiles are list on the left of the screen, as depicted below.
These accrual profiles may be renamed by double-clicking on them, and
typing a new profile name. After creating a profile the user must create
at least one recruitment region. Early in the trial design process,
detailed simulation of the expected accrual pattern is typically not
necessary and a single region with a simple mean accrual rate is
sufficient.

To model more accurately the expected accrual rates over the trial, the
user may specify multiple regions for each accrual profile and
separately parameterize them. Regions are added via the table in the
center of the screen (Figure 7‑1). Within this table, the user may
modify:

-   the peak, mean weekly recruitment rate,

-   the start date (in weeks from the start of the trial) for this
    recruitment region,

-   whether the region will have a ramp up phase and if so when the ramp
    up will be complete (in weeks from the start of the trial).

-   Whether the region will have a ramp down, and if so when the ramp
    down start and when the ramp down will complete (in weeks from the
    start of the trial).

Ramp up/ramp down define simple linear increase/decreases in mean
recruitment rate from the start to the end of the ramp. Note that
simulation of accrual is probabilistic but ramp downs are defined in
terms of time, so even if ramp downs are planned so that at the average
accrual rate they will occur as the trial reaches cap, there is a risk
in simulations when accrual has been slower than average, that ramp
downs occur before the full sample size is reached. It is advisable to
have at least one region that doesn't ramp down to prevent simulations
being unable to complete.

A graph of the recruitment rate of the highlighted region is shown as
well. As the recruitment parameters are changed, the graph will update
to show the time at which full accrual is reached. An accrual profile
that does not reach full accrual is invalid and cannot be used to run
simulations.

![A screenshot of a social media post Description automatically
generated](../coreUGattachments/continuous/media/image31.png){width="6.010720691163605in"
height="4.46403980752406in"}

In the screenshot above you can see the two step ramp up in accrual from
four regions -- each starting at different offsets into the trial.

Note that the accrual profile graph is only the mean expectation; actual
accrual is simulated using exponential distributions for the intervals
between subjects, derived from the mean accrual profile specified here.
Thus some simulated trials will recruit more quickly than this and some
more slowly.

There are commands to import and export region details from/to simple
external XML files. When importing, the regions defined in the external
file are **added** to the regions already defined, they don't replace
them.

This is an example of a very simple region file defining just one
region:

\<?xml version=\"1.0\" encoding=\"utf-8\"?\>

\<regions\>

\<region\>

\<name\>Region 1\</name\>

\<rate\>5\</rate\>

\<start\>0\</start\>

\<ramp-up /\>

\<ramp-down /\>

\</region\>

\</regions\>

## Deterministic Accrual

If "Deterministic" accrual has been specified on the Study \> Study Info
tab, then on the Accrual tab, rather that specifying an accrual profile
from which subject recruitment times are simulated, the user loads a
file of specific accrual dates for every subject.

![](../coreUGattachments/continuous/media/image32.png){width="5.001785870516185in"
height="3.858746719160105in"}

The user specifies a ".dat" file to load that contains the subject
accrual dates in weeks[^4] from the start of the trial.

The required file format is a text file with comma separate values. One
row per subject, with 3 fields on each row:

1.  the subject ID, (an integer)

2.  the ID of the region where the subject was recruited (an integer)

3.  and the subjects randomization date (in weeks from the start of the
    trial -- this is a 'real' number allowing fractions of a week to be
    specified)

The file must contain sufficient entries to allow the maximum number of
subjects specified on the Study \> Study Info tab to be recruited.

![](../coreUGattachments/continuous/media/image33.png){width="2.5330358705161853in"
height="2.45913823272091in"}

After successfully loading a file, the FACTS GUI shows a plot of the
resulting weekly accrual rate

![](../coreUGattachments/continuous/media/image34.png){width="5.001785870516185in"
height="3.858746719160105in"}

## Dropout Rate

The default dropout scenario is that no subjects drop out of the study
before observing their final endpoint data. If dropouts are expected,
the user can specify either the "Dropouts per Dose," or "Dropouts per
Dose per Visit."

If "Dropouts per Dose" is selected, then each subject has a probability
of not having an observable final endpoint value equal to the dropout
rate of the dose that subject is randomized to. If each subject has
multiple visits and "Dropouts per Dose" is selected, then the
conditional probability of dropping out before each visit given that the
subject had not dropped out up to the visit before rates are all equal.
In other words, if the total dropout rate is $\pi_{D}$, the probability
of dropping out between visits $i$ and $i + 1$ given that the subject
had not dropped out at visit $i$ is
$1 - \left( 1 - \pi_{D} \right)^{\frac{1}{V}}$ where $V$ is the total
number of visits.

If "Dropouts per Dose per Visit" is selected, then each subject has a
user specified probability of dropping out before a visit $v$ that is
specified as the conditional probability of dropping out before visit
$v$ given that that they had not dropped out by visit $v - 1$. This
leads to a total dropout rate $\pi_{D}$ for a participant that is equal
to:

$$\pi_{D} = 1 - \prod_{v = 0}^{V}{(1 - \pi_{v})}$$

![A screenshot of a social media post Description automatically
generated](../coreUGattachments/continuous/media/image35.png){width="6.008089457567804in"
height="4.46208552055993in"}

**Missing Data** --Subjects that dropout, will contribute towards the
final analysis using BOCF, LOCF or imputation based on longitudinal
response modeling. The user specifies which to use on the Design \> Dose
Response tab.

# Quantities of Interest

The Quantities of Interest tab allows the user to specify which
statistical quantities to calculate at each interim, either to ensure
the values are output for perusal and analysis by the user or for use
within the trial design for adaptation or decision making.

These tabs are largely common across the different FACTS Core engines
and so are described in a single document - the FACTS Core Design Guide.

# Design

The Design Tab allows the user to specify how treatment responses are
modeled, longitudinal responses are modeled, the allocation of subjects
to treatment arms, timing of interims, stopping criteria, and final
evaluation criteria. These facilities are common across the design
engines -- see the FACTS Core Design User Guide.

# Simulation

The Simulation tab allows the user to execute simulations for each of
the scenarios specified for the study. The user may choose the number of
simulations, whether to execute locally or on the Grid, and modify the
random number seeds, Figure 11‑1.

N.B. Each time the FACTS application opens, the "Number of Simulations"
will be set to the number of simulations last run for this design. If
completed results are available, the *actual* number of simulations run
for each scenario is reported in the 'Num Sims' column of the results
table. The value displayed in the "Number of Simulations" control is the
number of simulations that *will be* run if the user clicks on the
'Simulate' button.

Note also that if a scenario uses an external VSR file or directory of
external files, the number of simulations will be rounded down to the
nearest complete multiple of the number of VSR lines or external files.
Unless the number of simulations requested 'S' is less than the number
of VSR lines or external files, in which case just the first S are run.
Finally note that the simulations will be performed in packets such that
each packet only uses one external VSR line or file, so packet sizes may
be smaller than requested.

![Graphical user interface Description automatically
generated](../coreUGattachments/continuous/media/image36.png){width="5.529041994750656in"
height="4.198345363079615in"}

N.B. FACTS uses Markov Chain Monte Carlo methods in the generation of
simulated patient response data and trial results. In order to exactly
reproduce a statistical set of results, it is necessary to start the
Markov Chain from an identical "Random Seed". The initial random seed
for FACTS simulations is set from the simulation tab, the first thing
that FACTS does is to draw the random number seeds to use at the start
of each simulation. It is possible to re-run a specific simulation, for
example to have more detailed output files generated, by specifying
'start at simulation'.

Say the 999^th^ simulation out of a set displayed some unusual behavior,
in order to understand why, one might want to see the individual interim
analyses for that simulation (the "weeks" file), the sampled subject
results for that simulation (the "Subjects" files) and possibly even the
MCMC samples from the analyses in that simulation. You can save the
.facts file with a slightly different name (to preserve the existing
simulation results), then run 1 simulation of the specific scenario,
specifying that the simulations start at simulation 999 and that at
least 1 weeks file, 1 subjects file and the MCMC samples file (see the
"MCMC settings" dialog) are output.

Even a small change in the random seed will produce different simulation
results.

The same random number seed is used at the start of the simulation of
each scenario. If two identical scenarios are specified then identical
simulation results will be obtained. The same may happen if scenarios or
designs only differ in ways that have no impact on the trials being
simulated, for instance designs that have no adaptation, or scenarios
that don't trigger any adaptation (e.g. none of the simulations stop
early).

The user can specify:

-   The number of simulations for which 'Weeks' files, 'Subjects' files
    and "Frequentist Weeks" files are written.

    -   'Weeks' files record the data, analysis and recommendation at
        each interim.

    -   'Subjects' files record the subject responses simulated for the
        trial.

    -   If Frequentist analysis has been enabled, then "Frequentist
        Weeks" files record the results of the frequentist analysis at
        each interim.

-   The parallelization packet size, this allows simulation jobs to be
    split into runs of no-more than the specified number of trials to
    simulate. If more simulations of a scenario are requested than can
    be done in one packet, the simulations are started as the requisite
    number of packets and the results combined and summarized when they
    are all complete -- so the final results files look just as though
    all the simulations were run as one job or packet.

-   The packet size should be a multiple of the number of any rows in
    any MVSR file used for any of the scenarios and the total number of
    simulations should be a multiple of the packet size.

-   When running simulations on the local machine FACTS enterprise
    version will process as many packets in parallel as there are
    execution threads on the local machine. The overhead of
    packetization is quite low so a packet size of 10 to 100 can help
    speed up the overall simulation process -- threads used to simulate
    scenarios that finish quicker can pick up packets for scenarios that
    take longer, if the number of scenarios is not directly divisible by
    the number of threads, packetization uses all threads until the last
    few packets have to be run and finally the "Simulations complete"
    figure can be updated at the end of each packet, so the smaller the
    packet the better FACTS can report the overall progress.

## To run simulations

Click in the check box in each of the rows corresponding the to the
scenarios to be run. FACTS displays a row for each possible combination
of the 'profiles' that have been specified: - baseline response, dose
response, longitudinal response, accrual rate and dropout rate. Or
simply click on "Select All".

Then click on the "Simulate" button.

During simulation, the user is prevented from modifying any parameters
on any other tab of the application. This safeguard ensures that the
simulation results reflect the parameters specified in the user
interface.

When simulations are started, FACTS saves all the study parameters, and
when the simulations are complete all the simulation results are saved
in results files in a "\_results" folder in the same directory as the
".facts" file. Within the "\_results" folder there will be a sub-folder
that holds the results for each scenario.

## How many simulations to run?

-   After first entering a design it is worth running just a small
    number of simulations such as 10 to check that the scenarios and
    design have been entered correctly. If all 10 simulations of a
    'null' scenario are successful, or all 10 simulations of what was
    intended to be an effective drug scenario are futile, it is likely
    there has been a mistake or misunderstanding in the specification of
    the scenarios or the final evaluation or early stopping criteria.

-   Once the design and scenarios look broadly correct, it is usually
    worth quickly collecting rough estimates of the operating
    characteristics using around 100 simulations for each scenario. 100
    simulations is enough to spot designs having very poor operating
    characteristics such as very high type-1 error, very poor power, a
    strong tendency to stop early for the wrong reason, or poor
    probability of selecting the correct target. 100 simulations is also
    usually sufficient to spot problems with the data analysis such as
    poor model fits and significant bias in the posterior estimates.

-   Typically 1,000 simulations of each scenario of interest is required
    to get estimates of the operating characteristics precise enough to
    compare designs and tune the parameters. (Very roughly rates of 5%
    (such as type-1 error) can be estimated to about +/-1.5% and rates
    of around 80% (such as power) estimated +/- 2.5%)

-   Finally around 10,000 simulations of the scenarios of interest is
    required to give confidence in operating characteristics of a design
    and possibly to select between the final shortlisted designs
    (Approximately rates of 5% can be estimated to about +/-0.5% and
    rates of around 80% estimated +/- 1%).

There may be many operating characteristics need to be compared over a
number of scenarios, such as expected sample size, type-1 error, power,
probability of selecting a good dose as the target and quality of
estimation of the dose-response.

However frequently these will be compared over a range of scenarios, it
may not be necessary to run very large number of simulations for each
scenario if a design shows a consistent advantage on the key operating
characteristics over the majority of the scenarios.

## What packet size to use?

You must specify a packet size that is a factor of the number of
simulations per scenario to run; this offers the following benefits:

-   If running locally a small packet size allows the simulation of an
    individual scenario to be divided between the different number of
    CPUs in your laptop or PC. This is beneficial because often some
    scenarios are quicker to simulate (e.g. they often stop early) than
    others**;** if simulations were being divided between cores simply
    at the scenario level, this would lead to idle cores, once the
    simulations had completed. Additionally if the number of cores did
    not directly divide into the number of scenarios there would be
    cores idle as the last scenarios were simulated.

-   The "Simulations completed" count will be updated more frequently.

-   If running on a grid then having a small packet size means the job
    can be distributed over more nodes in the grid and thus completed
    more quickly.

Note, the overhead of creating the packets and re-combining the results
is low compared to the time to run the simulations.

Packet sizes of between 10 (when running 100 simulations) and 100 (when
running 10000 simulations) are recommended.

Care should be taken when packetizing a scenario that includes an
external data file to supply the virtual subject responses; in this
situation, a of copy of the external file is included *in each packet*
which can cause the packetisation process to run out of memory as the
packets are being created. In this case, use a smaller number of larger
packets, such as packets that are 1/10^th^ of the total number of
simulations.

## MCMC Settings

To set advanced settings for simulation, the user may click the "MCMC
Settings" button, which will display a number of additional specifiable
parameters for simulation in a separate window.

![](../coreUGattachments/continuous/media/image37.png){width="2.6092705599300086in"
height="2.2039446631671042in"}

The first two values specify two standard MCMC parameters --

-   The length of burn-in is the number of the initial iterations whose
    results are discarded, to allow the MCMC chain to reach its
    equilibrium distribution.

-   The number of samples is the number of subsequent iterations whose
    results are recorded in order to give posterior estimates of the
    values of interest.

An additional MCMC parameter controls the sampling within sampling when
the analysis includes imputation from a longitudinal or predictor model:

-   The third parameter controls the number of MCMC samples taken
    between each imputation of missing data using the longitudinal
    model, the default value is 1. This parameter only has an effect if
    Bayesian imputation is being used to impute a significant proportion
    of your data. This allows the parameter estimates to converge
    somewhat for each set of imputed data, if the imputed data is only a
    small percentage of the overall data this is unnecessary. As a rough
    guide, if it at some early interims \> 5% of the data being analyzed
    will be imputed, a value in the range 2 to 10 is recommended to
    avoid underestimating the uncertainty. A higher number should be
    used the greater the proportion of imputed data.

The last two parameters concern the output of the MCMC samples to a log
file:

-   It is possible to have the design engine output the sampled values
    in the MCMC, in all of the interims of the first N simulated trials
    of each scenario by specifying the "Number of MCMC files to output"
    (setting N \> 0). The resulting files, 'mcmcNNNN.csv', will be in
    the results directory with all the other results files for that
    scenario.

-   It is also possible to reduce the size of these files by specifying
    a "thinning parameter".

## FACTS Grid Simulation Settings

A user with access to a computational grid, may choose to run
simulations on the grid instead of running them locally. This frees the
user's computer from the computationally intensive task of simulating so
that they can continue other work or even shutdown their PC or laptop.
In order to run simulations on the grid, it must first be configured,
this is normally done via a configuration file supplied with the FACTS
installation by the IT group responsible for the FACTS installation.

## Simulation Results

In the center of the simulation tab, the summary simulation results are
displayed. There are many columns of results, these are now organized
into related groups of sub-windows, which can be displayed by clicking
on the "Show other Columns" button.

![](../coreUGattachments/continuous/media/image38.png){width="1.2078937007874015in"
height="1.2707327209098862in"}

These windows will show:

All all the columns

Highlights the columns shown on the main tab.

Allocation the columns that report of subject recruitment and allocation

Response the columns that report that estimate treatment response, the
SD of the estimate, the estimate of the SD of the response, the true
treatment response and the true SD of the response.

Probabilities the proportion of times for each dose that it met the
different target criteria (Max, EDx & MED) and the posterior
probabilities for each dose that its treatment response is better than
control, better than control by the CSD and better than the active
comparator.

Stopping Rules the proportion of times the different stopping criteria
were met

Model Parameters the columns that report the estimates of the values of
the model parameters.

Simulation Results A window that displays the individual simulation
results for the currently selected scenario.

Frequentist results If frequentist analysis is enabled, the summary
results can be viewed, these are grouped by how missing data has been
treated: Last Observation Carried Forward (LOCF), Baseline Observation
Carried Forward (BOCF -- if baseline has been simulated), Per-Protocol
(PP).

## Right Click Menu

Clicking the Right-hand mouse button on a row in the simulations tab
brings up a short cut menu:

![](../coreUGattachments/continuous/media/image39.png){width="1.6892858705161855in"
height="1.0002351268591425in"}

These will respectively:

-   Open a new Windows directory browser window showing the contents of
    the simulation results for that scenario.

-   Open a window that displays the individual simulation results for
    that scenario. The results initially displayed are the 'highlights'
    columns, similarly to the summary results (see below) the results
    columns are collected into sub-groups, windows of these subgroups
    can be opened from the Right Click menu of the Simulation Results
    highlights window.

-   Open a window that displays the frequentist analysis summary
    results. This option is only available if one or more frequentist
    analyses have been selected on the Design \> Frequentist Analysis
    tab. (If more than one analysis has been requested -- using
    different treatments of missing data there will be separate options
    in the menu to display each summary).

-   Open R loading in the result files for that scenario as separate
    dataframes.

-   Opens the FACTS graph control displaying the graphs for that
    scenario.

-   Opens the FACTS graph control that displays the trellis plot of
    graphs of selected scenarios for selected design variants.

## Open in R

If aggregated results files have been created then the Open in R button
will start R and load the aggregated '.csv' files.

If there are no aggregated files then the results files of the currently
selected scenario are loaded. R can also be opened in this fashion by
right clicking on a row in the simulation results table.

When FACTS starts R it writes out an R auto run startup script that
loads the csv files into R as separate dataframes.

## Aggregation

Aggregation combines the csv output from multiple scenarios into fewer
csv files. The Aggregate... button displays a dialog which allows the
user to select what to aggregate.

![](../coreUGattachments/continuous/media/image40.png){width="5.177083333333333in"
height="4.281936789151356in"}

The default location for the aggregated files is the results directory
for the study, but this can be changed.

Aggregation may be performed with or without pivoting on group, or both.

-   Unpivoted files will have one row for each row in the original
    files.

-   In pivoted files each original row will be split into one row per
    dose.

    -   Where there is a group of columns for each dose, they will be
        turned into a single column with each value on a new row.

    -   Values in columns that are independent of dose will be repeated
        on each row.

The default is to aggregate all scenarios, but any combination may be
selected.

Pressing "Aggregate" generates the aggregated files.

Each type of csv file is aggregated into a separate csv file whose name
begins agg\_ or agg_pivot\_, so agg_summary.csv will contain the rows
from each of the summary.csv files, unpivoted. WeeksNNNNN.csv files are
aggregated into a single agg\_\[pivot\_\]weeks.csv file.
PatientsNNNNN.csv files are aggregated into a single agg_patients.csv
file, but they are never pivoted because each row already refers to a
single dose. Similarly the various frequentist results at the summary,
simulation and weeks level are aggregated (if they've been output).

RegionIndex.csv is not aggregated.

Each aggregated file begins with the following extra columns, followed
by the columns from the original csv file:

  -----------------------------------------------------------------------
  Column Name          Comments
  -------------------- --------------------------------------------------
  Scenario ID          Index of the scenario

  Recruitment Profile  A series of columns containing the names of the
                       various profiles used to construct the scenario.
                       Columns that are never used are omitted (e.g.
                       External Subjects Profile if there are no external
                       scenarios)

  Dropouts Profile

  Longitudinal Rates
  Profile

  Dose Response
  Profile

  External Subjects
  Profile

  Agg Timestamp        Date and time when aggregation was performed

  P(TS)                Proportion of trial success (early success + late
                       success)

  P(TF)                Proportion of trial futility (early futility +
                       late futility)

  Sim                  Simulation number. Only present in weeks and
                       patients files.

  Dose                 Only present if pivoted
  -----------------------------------------------------------------------

  : Figure 4‑1: The FACTS Core Continuous Opening Screen

## Design Report

This button becomes enabled once there are simulation results, it uses
an R script and R libraries to generate a MS Word document describing
the design.

See the FACTS Design Report User Guide for details of what R packages
need installing, how FACTS needs configuring to use the correct R
instance, how the generate_report() function is run, and where the
resulting report can be found.

# The summary results columns

## Highlights

These are the columns displayed on the simulations tab after simulations
are completed, the can also be displayed in the separate "Highlights"
results window.

+----------+---------+------------------------------------------------+
| Column   | Number  | Description                                    |
| Title    | of      |                                                |
|          | columns |                                                |
+==========+=========+================================================+
| Select   | 1       | Not an output column, this column contains     |
|          |         | check box to allow the user to select which    |
|          |         | scenario to simulate. The 'Select All' button  |
|          |         | causes them all to be checked.                 |
+----------+---------+------------------------------------------------+
| Status   | 1       | This column reports on the current status of   |
|          |         | simulations: Completed, Running, No Results,   |
|          |         | Out of date, Error. It is updated              |
|          |         | automatically.                                 |
+----------+---------+------------------------------------------------+
| Scenario | 1       | This column gives the name of the scenario,    |
|          |         | concatenating together the profile names from  |
|          |         | the following tabs:                            |
|          |         |                                                |
|          |         | 'Execution \> Accrual',                        |
|          |         |                                                |
|          |         | 'Execution \> Dropout Rate',                   |
|          |         |                                                |
|          |         | 'Virtual Subject Response \> Composite,        |
|          |         |                                                |
|          |         | This is the same name as used for the results  |
|          |         | directory                                      |
+----------+---------+------------------------------------------------+
| Num Sims | 1       | The number of simulations that were run to     |
|          |         | produce the displayed results.                 |
+----------+---------+------------------------------------------------+
| Random   | 1       | Base random number seed used to perform the    |
| Number   |         | simulations.                                   |
| Seed     |         |                                                |
+----------+---------+------------------------------------------------+
| Mean     | 1       | This is the mean (over the simulations) of the |
| Subj.    |         | number of subjects recruited in this scenario. |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | This is the proportion of simulations that     |
| Overall  |         | stopped for success, either early success or   |
| Success  |         | late success (as defined below).               |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | This is the proportion of simulations that     |
| Early    |         | stopped early for success (and did not regress |
| Success  |         | to futility in the final analysis -- though    |
|          |         | they might have regressed to 'inconclusive').  |
+----------+---------+------------------------------------------------+
| Ppn Late | 1       | This is the proportion of simulations that did |
| Success  |         | not stop early but were successful in the      |
|          |         | final analysis.                                |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | This is the proportion of simulations that     |
| Overall  |         | stopped for futility, either early futility or |
| Futility |         | late futility (as defined below).              |
+----------+---------+------------------------------------------------+
| Ppn Late | 1       | This is the proportion of simulations that did |
| Futility |         | not stop early but were futile in the final    |
|          |         | analysis.                                      |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | This is the proportion of simulations that     |
| Early    |         | stopped early for futility (and did not        |
| Futility |         | regress to success in the final analysis --    |
|          |         | though they might have regressed to            |
|          |         | 'inconclusive').                               |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | This is the proportion of simulations that     |
| S        |         | stopped early for success but regressed to     |
| uc-\>Fut |         | futility in the final analysis.                |
| Flipflop |         |                                                |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | This is the proportion of simulations that     |
| F        |         | stopped early for futility but regressed to    |
| ut-\>Suc |         | success in the final analysis.                 |
| Flipflop |         |                                                |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | This is the proportion of simulations that did |
| Inco     |         | not stop early and were neither successful nor |
| nclusive |         | futile in the final analysis.                  |
+----------+---------+------------------------------------------------+
| Early    | 1       | This is the average time to an early decision  |
| Success  |         | to stop for success (i.e. the time excluding   |
| Time     |         | final follow up) over those simulations that   |
|          |         | did decide early to stop for success.          |
+----------+---------+------------------------------------------------+
| Mean     | One per | This is the mean (over the simulations) of the |
| Trt.:    | arm     | estimate of the mean response on this dose.    |
| \<Dose\> |         |                                                |
+----------+---------+------------------------------------------------+
| Mean     | 1       | This is the mean, in weeks (over the           |
| Duration |         | simulations) of the duration of the trial from |
|          |         | first patient first visit to last patient last |
|          |         | visit                                          |
+----------+---------+------------------------------------------------+
| PPn Arms | One per | This is the number of times (over the          |
| Drop:    | arm     | simulations) that each arm was dropped.        |
| \<       |         |                                                |
| Dose\>\> |         |                                                |
+----------+---------+------------------------------------------------+
| Mean LP  | 1       | This is the mean, in weeks (over the           |
| Enrolled |         | simulations) of the duration of the trial from |
|          |         | first patient first visit to Last Patient      |
|          |         | First Visit (i.e. the duration of accrual).    |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | The proportion of simulations that met the     |
| Correct  |         | success criteria and selected (by the target   |
| Arm      |         | QOI specified on the Study \> Variant tab) one |
|          |         | of the arms marked as "should succeed" on the  |
|          |         | Virtual Subject Response \> Explicitly Defined |
|          |         | \> Dose Response tab                           |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | The proportion of simulations that met the     |
| I        |         | success criteria and selected (by the target   |
| ncorrect |         | QOI specified on the Study \> Variant tab) one |
| Arm      |         | of the arms **not** marked as "should succeed" |
|          |         | on the Virtual Subject Response \> Explicitly  |
|          |         | Defined \> Dose Response tab                   |
+----------+---------+------------------------------------------------+
| Version  | 1       | The FACTS version number at the time the       |
|          |         | simulations were run.                          |
+----------+---------+------------------------------------------------+

: Figure 4‑2: Tab layout of FACTS

## Allocation

+----------+---------+------------------------------------------------+
| Column   | Number  | Description                                    |
| Title    | of      |                                                |
|          | columns |                                                |
+==========+=========+================================================+
| Status   | 1       | This column reports on the current status of   |
|          |         | simulations: Completed, Running, No Results,   |
|          |         | Out of date, Error. It is updated              |
|          |         | automatically.                                 |
+----------+---------+------------------------------------------------+
| Scenario | 1       | This column gives the name of the scenario,    |
|          |         | concatenating together the profile names from  |
|          |         | the following tabs:                            |
|          |         |                                                |
|          |         | 'Execution \> Accrual',                        |
|          |         |                                                |
|          |         | 'Execution \> Dropout Rate',                   |
|          |         |                                                |
|          |         | 'Virtual Subject Response \> Composite,        |
|          |         |                                                |
|          |         | This is the same name as used for the results  |
|          |         | directory                                      |
+----------+---------+------------------------------------------------+
| Mean     | 1       | This is the mean (over the simulations) of the |
| Subj.    |         | number of subjects recruited in this scenario. |
+----------+---------+------------------------------------------------+
| SD Mean  | 1       | This is the standard deviation across the      |
| Subj.    |         | simulations of the number of subjects          |
|          |         | recruited.                                     |
+----------+---------+------------------------------------------------+
| Num Subj | 1       | This is the eightieth percentile across the    |
| 80%      |         | simulations of the number of subjects          |
|          |         | recruited into the trial.                      |
+----------+---------+------------------------------------------------+
| Mean     | One per | This is the mean (over the simulations) of the |
| Alloc.:  | arm     | number of subjects recruited into each arm in  |
| \<Dose\> |         | this scenario.                                 |
+----------+---------+------------------------------------------------+
| SD       | One per | This is the SD (over the simulations) of the   |
| Alloc.:  | arm     | number of subjects allocated to each treatment |
| \<Dose\> |         | arm.                                           |
+----------+---------+------------------------------------------------+

: Figure 4‑3 - The \'Notes\' button

## Response

+----------+---------+------------------------------------------------+
| Column   | Number  | Description                                    |
| Title    | of      |                                                |
|          | columns |                                                |
+==========+=========+================================================+
| Status   | 1       | This column reports on the current status of   |
|          |         | simulations: Completed, Running, No Results,   |
|          |         | Out of date, Error. It is updated              |
|          |         | automatically.                                 |
+----------+---------+------------------------------------------------+
| Scenario | 1       | This column gives the name of the scenario,    |
|          |         | concatenating together the profile names from  |
|          |         | the following tabs:                            |
|          |         |                                                |
|          |         | 'Execution \> Accrual',                        |
|          |         |                                                |
|          |         | 'Execution \> Dropout Rate',                   |
|          |         |                                                |
|          |         | 'Virtual Subject Response \> Composite,        |
|          |         |                                                |
|          |         | This is the same name as used for the results  |
|          |         | directory                                      |
+----------+---------+------------------------------------------------+
| Mean     | One per | This is the mean (over the simulations) of the |
| Trt.:    | arm     | estimate of the mean response on this dose.    |
| \<Dose\> |         |                                                |
+----------+---------+------------------------------------------------+
| SD Trt.: | One per | This is the standard deviation (over the       |
| \<Dose\> | arm     | simulations) of the estimate of the response   |
|          |         | on this dose.                                  |
+----------+---------+------------------------------------------------+
| Mean     | 1       | The mean (over the simulations) of the         |
| Sigma    |         | estimate of the SD of the dose response across |
|          |         | all the treatment arms ('sigma')               |
+----------+---------+------------------------------------------------+
| SD Mean  | 1       | The SD (over the simulations) of the estimate  |
| Sigma    |         | of the SD of the dose response across all the  |
|          |         | treatment arms.                                |
+----------+---------+------------------------------------------------+
| True     | One per | This is the true mean response from which the  |
| Mean     | arm     | simulation data was sampled for each treatment |
| Resp:    |         | arm.                                           |
| \<Dose\> |         |                                                |
+----------+---------+------------------------------------------------+
| SD True  | One per | This is the true SD of the dose response for   |
| Resp.:   | arm     | each treatment arm                             |
| \<Dose\> |         |                                                |
+----------+---------+------------------------------------------------+
| Mean     | One per | These are only calculated and written out if   |
| Longmod  | arm per | the Time Course Hierarchical or ITP            |
| Resp:    | visit   | longitudinal models are being used.            |
| \<Dose\> |         |                                                |
| \        |         | This is the mean (over the simulations) of the |
| <Visit\> |         | estimate of the mean response for a particular |
|          |         | dose at a particular visit, based on the       |
|          |         | independent estimate of the dose response      |
|          |         | (omega_d), scaled by the longitudinal model\'s |
|          |         | estimate of the proportion of the final effect |
|          |         | observed at the visit.                         |
+----------+---------+------------------------------------------------+
| SD Mean  | One per | This is the SD ( over the simulations) of the  |
| Longmod  | arm per | longitudinal model estimate of the response at |
| Resp:    | visit   | intermediate visits (see above)                |
| \<Dose\> |         |                                                |
| \        |         |                                                |
| <Visit\> |         |                                                |
+----------+---------+------------------------------------------------+
| Mean     |         | This is the mean (over the simulations) of the |
| Baseline |         | estimate of "Beta" in the Baseline Adjusted    |
| Beta     |         | dose response model.                           |
+----------+---------+------------------------------------------------+
| SD       |         | This is the SD (over the simulations) of the   |
| Baseline |         | estimate of "Beta" in the Baseline Adjusted    |
| Beta     |         | dose response model.                           |
+----------+---------+------------------------------------------------+
| Mean     | 1       | This is the mean (over the simulations) of the |
| Baseline |         | estimate of the mean baseline score.           |
+----------+---------+------------------------------------------------+
| SD       | 1       | This is the SD (over the simulations) of the   |
| Baseline |         | estimate of the mean baseline score.           |
+----------+---------+------------------------------------------------+
| True     | 1       | This is the true mean from which baseline      |
| Mean     |         | scores where simulated (including accounting   |
| Baseline |         | for possible truncation of the baseline        |
|          |         | scores)                                        |
+----------+---------+------------------------------------------------+
| True SD  | 1       | This is the true SD of the distribution from   |
| Baseline |         | which baseline scores were simulated           |
|          |         | (including accounting for possible truncation  |
|          |         | of the baseline scores)                        |
+----------+---------+------------------------------------------------+

: Figure 4‑4 - Example design notes

## Observed

+----------+---------+------------------------------------------------+
| Column   | Number  | Description                                    |
| Title    | of      |                                                |
|          | columns |                                                |
+==========+=========+================================================+
| Status   | 1       | This column reports on the current status of   |
|          |         | simulations: Completed, Running, No Results,   |
|          |         | Out of date, Error. It is updated              |
|          |         | automatically.                                 |
+----------+---------+------------------------------------------------+
| Scenario | 1       | This column gives the name of the scenario,    |
|          |         | concatenating together the profile names from  |
|          |         | the following tabs:                            |
|          |         |                                                |
|          |         | 'Execution \> Accrual',                        |
|          |         |                                                |
|          |         | 'Execution \> Dropout Rate',                   |
|          |         |                                                |
|          |         | 'Virtual Subject Response \> Composite,        |
|          |         |                                                |
|          |         | This is the same name as used for the results  |
|          |         | directory                                      |
+----------+---------+------------------------------------------------+
| Mean     | One per | This is the mean (over the simulations) of the |
| Complete | arm     | number of subjects recruited per arm which     |
| \<Dose\> |         | have had their endpoint observed in this       |
|          |         | scenario.                                      |
+----------+---------+------------------------------------------------+
| Mean     | One per | This is the mean (over the simulations) of     |
| Complete | arm     | information observed per arm as defined on the |
| Info     |         | Interims tab (Subjects enrolled, Complete Data |
| \<Dose\> |         | at Specified Visit, Opportunity to Complete at |
|          |         | Specified Visit) in this scenario.             |
+----------+---------+------------------------------------------------+
| Mean     | One per | This is the mean (over the simulations) of     |
| Dropouts | arm per | dropouts per arm per visit in this scenario.   |
| \<Dose\> | visit   |                                                |
| \        |         |                                                |
| <Visit\> |         |                                                |
+----------+---------+------------------------------------------------+

: Figure 6‑1: Webservice Configuration

## Probabilities

+----------+---------+------------------------------------------------+
| Column   | Number  | Description                                    |
| Title    | of      |                                                |
|          | columns |                                                |
+==========+=========+================================================+
| Status   | 1       | This column reports on the current status of   |
|          |         | simulations: Completed, Running, No Results,   |
|          |         | Out of date, Error. It is updated              |
|          |         | automatically.                                 |
+----------+---------+------------------------------------------------+
| Scenario | 1       | This column gives the name of the scenario,    |
|          |         | concatenating together the profile names from  |
|          |         | the following tabs:                            |
|          |         |                                                |
|          |         | 'Execution \> Accrual',                        |
|          |         |                                                |
|          |         | 'Execution \> Dropout Rate',                   |
|          |         |                                                |
|          |         | 'Virtual Subject Response \> Composite,        |
|          |         |                                                |
|          |         | This is the same name as used for the results  |
|          |         | directory                                      |
+----------+---------+------------------------------------------------+
| \<QOI\>  | One per | For each Posterior Probability and Predictive  |
| \<Dose\> | arm per | Probability QOI defined on this endpoint, this |
|          | QOI     | is the mean over the simulations of the        |
|          |         | estimate of the probability of the QOI for     |
|          |         | each dose. (P-value QOIs are reported in the   |
|          |         | frequentist results table).                    |
|          |         |                                                |
|          |         | For each Target QOI this is the proportion of  |
|          |         | simulations where this dose was selected at    |
|          |         | the end of the trial as the dose with the      |
|          |         | greatest probability of meeting the target     |
|          |         | condition.                                     |
|          |         |                                                |
|          |         | The probability that each dose is the target   |
|          |         | at the end of a simulated trial is its         |
|          |         | marginal probability (the number of times it   |
|          |         | was the dose closest to the target in the MCMC |
|          |         | sampling of the analysis at the end of the     |
|          |         | trial). The target of having the Max response  |
|          |         | on this endpoint, or some fraction of it (EDq) |
|          |         | is always identifiable, so the Ppn(target) for |
|          |         | these QOIs will sum to 1 across the doses.     |
|          |         |                                                |
|          |         | An MED target is not guaranteed to be          |
|          |         | identifiable, if no dose meets the CSD         |
|          |         | criteria in any MCMC sample so all doses have  |
|          |         | a 0 probability of having a response greater   |
|          |         | than Control (or AC) by the CSD then no dose   |
|          |         | is the MED. So the sum of each Ppn(target) QOI |
|          |         | across the doses should sum to between 0 and 1 |
|          |         | inclusive.                                     |
|          |         |                                                |
|          |         | Decision QOI's are not reported here           |
|          |         | separately, but their component QOIs -- the    |
|          |         | vector of values and target QOI used to select |
|          |         | from them are.                                 |
+----------+---------+------------------------------------------------+

: Figure 6‑2 The R Configuration Dialog

## Model Parameters

+----------+---------+------------------------------------------------+
| Column   | Number  | Description                                    |
| Title    | of      |                                                |
|          | columns |                                                |
+==========+=========+================================================+
| Status   | 1       | This column reports on the current status of   |
|          |         | simulations: Completed, Running, No Results,   |
|          |         | Out of date, Error. It is updated              |
|          |         | automatically.                                 |
+----------+---------+------------------------------------------------+
| Scenario | 1       | This column gives the name of the scenario,    |
|          |         | concatenating together the profile names from  |
|          |         | the following tabs:                            |
|          |         |                                                |
|          |         | 'Execution \> Accrual',                        |
|          |         |                                                |
|          |         | 'Execution \> Dropout Rate',                   |
|          |         |                                                |
|          |         | 'Virtual Subject Response \> Composite,        |
|          |         |                                                |
|          |         | This is the same name as used for the results  |
|          |         | directory                                      |
+----------+---------+------------------------------------------------+
| Mean     | 1       | This is the mean (over the simulations) of the |
| Sigma    |         | posterior estimate of sigma, the SD in the     |
|          |         | subject's final responses.                     |
+----------+---------+------------------------------------------------+
| SD Mean  | 1       | This is the SD (over the simulations) of the   |
| Sigma    |         | estimate of sigma.                             |
+----------+---------+------------------------------------------------+
| Mean     | 1       | This is the mean (over the simulations) of the |
| Baseline |         | estimate of the Beta parameter when Baseline   |
| Beta     |         | Adjustment is Modeled.                         |
+----------+---------+------------------------------------------------+
| SD       | 1       | This is the SD (over the simulations) of the   |
| Baseline |         | estimate of the Beta parameter when Baseline   |
| Beta     |         | Adjustment is Modeled.                         |
+----------+---------+------------------------------------------------+
| BAC Mean | 1       | This is the mean (over the simulations) of the |
|          |         | posterior estimate of the mean of the Bayesian |
|          |         | Augmented Control (Hierarchical Prior)         |
|          |         | distribution of mean control responses.        |
+----------+---------+------------------------------------------------+
| SD BAC   | 1       | This is the SD (over the simulations) of the   |
| Mean     |         | posterior estimate of the mean of the Bayesian |
|          |         | Augmented Control (Hierarchical Prior)         |
|          |         | distribution of mean control responses.        |
+----------+---------+------------------------------------------------+
| BAC Tau  | 1       | This is the mean (over the simulations) of the |
|          |         | posterior estimate of the SD of the Bayesian   |
|          |         | Augmented Control (Hierarchical Prior)         |
|          |         | distribution of mean control responses.        |
+----------+---------+------------------------------------------------+
| SD BAC   | 1       | This is the SD (over the simulations) of the   |
| tau      |         | posterior estimate of the SD of the Bayesian   |
|          |         | Augmented Control (Hierarchical Prior)         |
|          |         | distribution of mean control responses.        |
+----------+---------+------------------------------------------------+
| BAAC     | 1       | This is the mean (over the simulations) of the |
| Mean     |         | posterior estimate of the mean of the Bayesian |
|          |         | Augmented Active Comparator (Hierarchical      |
|          |         | Prior) distribution of mean active comparator  |
|          |         | responses.                                     |
+----------+---------+------------------------------------------------+
| SD BAAC  | 1       | This is the SD (over the simulations) of the   |
| Mean     |         | posterior estimate of the mean of the Bayesian |
|          |         | Augmented Active Comparator (Hierarchical      |
|          |         | Prior) distribution of mean control responses. |
+----------+---------+------------------------------------------------+
| BAAC Tau | 1       | This is the mean (over the simulations) of the |
|          |         | posterior estimate of the SD of the Bayesian   |
|          |         | Augmented Active Comparator (Hierarchical      |
|          |         | Prior) distribution of mean active comparator  |
|          |         | responses.                                     |
+----------+---------+------------------------------------------------+
| SD BAAC  | 1       | This is the SD (over the simulations) of the   |
| tau      |         | posterior estimate of the SD of the Bayesian   |
|          |         | Augmented Active Comparator (Hierarchical      |
|          |         | Prior) distribution of mean active comparator  |
|          |         | responses.                                     |
+----------+---------+------------------------------------------------+

: Figure 6‑3 Adding a link to R

# Graphs of Simulation Results

To enable swift visualization and analysis of the simulation results,
FACTS has a number of pre-defined graphs it can display. Full and
detailed simulation results are available in 'csv' format files that can
be loaded into other analysis tools allowing any aspect of the
simulation to be explored. These files are described in Section 16,
below.

## Per Scenario Graphs

To view the graphs of the results of the simulations of a particular
design variant in a particular scenario, select that row of scenario
results by clicking on it and then click on the 'View Graph' button and
select "Show Per Scenario Graphs".

The graph display supports copying an image of the graph to the
clipboard, to facilitate pasting them into documents and presentations.
Right clicking on a graph brings up a short menu that allows the image
of the graph to be copied to the clipboard or saved in '.png' format to
a file.

Many graphs have a number of controls to allow the graph to be tailored,
standard graph controls available on most graphs are:

-   Set Y axis -- this displays a dialog boxing allowing the user to fix
    the minimum and maximum of each of the Y axes and the number of
    'tick' marks. (Not displayed if the 'y' value must lie in the
    interval 0-1.

-   Space doses evenly -- if the x-value is 'dose', then data for each
    dose can either be spaced equally or proportionate to the doses'
    effective dose strength.

-   If using a 2D treatment arm model then it is possible to display
    graphs where the different doses (or "arms") form the x-axis, then
    there is an option to show the row factors as separate series --
    otherwise the different combinations are displayed in effective
    strength order

  ------------------------------------------------------------------------------------------------------------------------------------------------------------
  Arms shown in effective strength order                                         Arms shown with row factors as a separate series
  ------------------------------------------------------------------------------ -----------------------------------------------------------------------------
  ![](../coreUGattachments/continuous/media/image41.png){width="3.2150120297462816in"   ![](../coreUGattachments/continuous/media/image42.png){width="3.201952099737533in"
  height="2.3225984251968503in"}                                                 height="2.313163823272091in"}

  ------------------------------------------------------------------------------------------------------------------------------------------------------------

  : Figure 6‑4 Enabling analytics

## Across Scenario Graphs

To view multiple graphs showing the results of the simulations of
possibly all the design variants and all the scenarios click on the
'View Graph' button and select "Show Across Scenario Graphs". This
launches a graph display that displays multiple graphs in a trellis
plot. You can select the graph type, filter the design variants and
filter which scenarios displayed:

![](../coreUGattachments/continuous/media/image43.png){width="2.9705358705161853in"
height="2.5262040682414697in"}

## Box and whisker plot conventions

-   The mean probability is plotted as a large dot.

-   The median value is plotted as a dashed line.

-   The 25-75^th^ quantile range is plotted as the "box" portion of each
    point.

-   The "whiskers" extend to the largest and smallest values within 1 ½
    times the interquartile range from either end of the box.

-   Points outside the whisker range are considered outliers, and are
    plotted as small blue dots. Note that it may be difficult to see all
    of these symbols if they are plotted at the same value.

# Per Scenario Graphs

## Allocation Box and Whisker Plot

![](../coreUGattachments/continuous/media/image44.png){width="5.094032152230971in"
height="4.6941590113735785in"}

This graph displays a box and whisker plot of the number of subjects
recruited into each arm. These plots show:

-   The distribution over all simulations of the number of subjects
    allocated to each arm shown as a box and whisker plot. If the design
    is not adaptive, the number allocated will be the same in every
    simulation and the box and whiskers collapse to a single line.

## Response and Subject Allocation

![](../coreUGattachments/continuous/media/image45.png){width="5.094032152230971in"
height="4.6941590113735785in"}

This graph shows for each treatment arm, the mean subject allocation,
mean response and the 2.5%-97.5% boundaries of the estimated means over
the simulations.

-   The blue bars show the mean number of subjects allocated.

-   The black line shows the true mean response being simulated.

-   The green dashed line shows the mean of the estimated response
    across the simulations

-   The green 'error bars' show the spread of the central 95% of the
    estimated mean response across the simulations (if less than 20
    simulations have been run it simply shows the full spread).

## Response and Target Selection graphs

![](../coreUGattachments/continuous/media/image46.png){width="5.45630905511811in"
height="5.027997594050744in"}

These plots show the true simulated mean response and the mean and 95%
spread of the mean fitted mean responses along with bars showing the
proportion of simulations the different treatment arms are the selected
target arm for each of the "Probability of being target" QOIs, such as
Pr(Max), Pr(EDq relative to ..: Quantile=...) and Pr(MED relative to
...: Delta=...).

## Per Dose QOIs (Box and Whisker Plots)

This set of graphs show the distribution over the simulations of the
posterior probability estimates of quantities of interest for each dose.
All the Posterior Probability, Predictive Probability, P-value and
Probability of being Target QOIs that have been defined are available
for plotting, via a drop down list.

Note that in any one analysis the Probability of being Target will sum
to 1 across the doses (and can sum to less than one in the case of the
MED target if none of the doses look likely to be better than the CSD),
whereas all the other QOIs are assessed individually for each dose.

  ------------------------------------------------------------------------------------------------------------------------------------------------------------
  ![](../coreUGattachments/continuous/media/image47.png){width="2.736324365704287in"   ![](../coreUGattachments/continuous/media/image48.png){width="2.7322878390201226in"
  height="2.5215266841644794in"}                                                height="2.517808398950131in"}
  ----------------------------------------------------------------------------- ------------------------------------------------------------------------------

  ------------------------------------------------------------------------------------------------------------------------------------------------------------

  : Figure 6‑5: The parameterisation of Inverse Gamma Distributions

## Target Response by Sample Size Scatter Plot

![](../coreUGattachments/continuous/media/image49.png){width="5.079343832020998in"
height="4.680623359580053in"}

This graph shows a scatter plot of trial outcomes with the selected
Target QOI as the y-axis and total number of subjects recruited as the
x-axis. The trials are plotted with a symbol that indicated the final
outcome:

-   A light blue circle indicates a trial that stopped early for success

-   A dark blue circle indicates a trial that was a late success

-   A dark red square indicates a trial that was a late futility

-   A light red square indicates a trial that stopped early for futility

-   A light pink diamond indicates a trial that stopped early for
    success but where the final analysis was futility

-   A dark pink diamond indicates a trial that stopped early for
    futility but where the final analysis was success

-   A yellow cross indicates a trial that completed full enrolment but
    was inconclusive at the end.

These graphs are not particularly useful if there is no early stopping.

If the design does allow early stopping this graph shows

-   The overall distribution of sample sizes -- in particular is
    stopping evenly distributed from the moment stopping is possible, or
    is there are large cohort of trials that stop as soon as it is
    possible?

-   When and with what mean response trials stop incorrectly, in
    particular having trials stopping and the decision being reversed
    suggests stopping is allowed to soon or the criteria is not
    conservative enough.

## Cumulative Operating Characteristics Plot

![](../coreUGattachments/continuous/media/image50.png){width="3.2680555555555557in"
height="3.1862073490813647in"}![](../coreUGattachments/continuous/media/image51.png){width="3.271329833770779in"
height="3.1952537182852145in"}

There are two graphs, one that shows the cumulative proportion of
durations across all simulations, and the other shows the cumulative
proportion of subjects across all simulations.

## Time course for stopping

There are two graphs, one that shows the distribution over time for
stopping for futility and one for stopping for success.

  ------------------------------------------------------------------------------------------------------------------------------------------------------------
  ![](../coreUGattachments/continuous/media/image52.png){width="2.826408573928259in"   ![](../coreUGattachments/continuous/media/image53.png){width="2.8275535870516184in"
  height="2.6045395888014in"}                                                   height="2.605594925634296in"}
  ----------------------------------------------------------------------------- ------------------------------------------------------------------------------

  ------------------------------------------------------------------------------------------------------------------------------------------------------------

  : Figure 6‑6: Enter FACTS License Key

These plots show as cumulative curves the proportion of the simulations
that stopped at different time points from the start of the trial. The
user can select whether time or subject enrollment is used as the
x-axis.

## Arm Dropping Graphs

If the design has used arm dropping, the following graphs are available.

### Response and Ppn Arms Dropped

![](../coreUGattachments/continuous/media/image54.png){width="5.511057524059493in"
height="5.078448162729659in"}

This graph shows the true (simulated) mean response and the average
fitted response with 2.5% & 97.5% quantiles.

The histogram bars show for each arm the proportion of simulations for
which the arm was dropped.

### Time Course for Arm Dropping

This graph shows, for each arm, the cumulative proportion of simulations
when it was dropped. The user can select whether time or number of
subjects allocated to the arm is used as the x-axis.

![](../coreUGattachments/continuous/media/image55.png){width="5.058861548556431in"
height="4.661748687664042in"}

### Time Course for Arm retention

This graph shows, for each arm, the cumulative proportion of simulations
when the arm was retained. The user can select whether time or number of
subjects allocated to the arm is used as the x-axis. This is simply the
inverse of the arm dropping graph above.

![](../coreUGattachments/continuous/media/image56.png){width="5.089583333333334in"
height="4.690060148731408in"}

### Arm Retention Proportion

This graph shows, for each arm, the simple proportion of simulations
where the arm was retained.

![](../coreUGattachments/continuous/media/image57.png){width="5.099823928258967in"
height="4.6994958442694665in"}

## Frequentist

These graphs are available if frequentist analysis is enabled.

### Frequentist P(significance)

These graphs are the box and whisker plots of various p-values that are
automatically calculated (that is to say they do not need to be defined
as QOIs for them to be calculated) for the final analysis. The user can
select from Unadjusted, Bonferroni and Dunnett\'s and LOCF, BOCF (if
baseline is simulated) or PP (per-protocol) treatment of missing values.

![](../coreUGattachments/continuous/media/image58.png){width="5.028139763779528in"
height="4.633438320209974in"}

### Frequentist: Response and Significance

This graph plots the mean and 2.5-97.5 percentile of the mean across the
simulations or the simple frequentist estimate of the response for each
arm, along with a histogram plot of the ppn of times the response on
each arm was significant. The user can select from Unadjusted,
Bonferroni or Dunnett's and LOCF, BOCF (if baseline is simulated) or PP
(per-protocol) treatment of missing values.

![](../coreUGattachments/continuous/media/image59.png){width="5.069103237095363in"
height="4.671185476815398in"}

## Per Sim: Response and Subject Alloc

This graph shows the final analysis at the end of individual
simulations.

![](../coreUGattachments/continuous/media/image60.png){width="5.509448818897638in"
height="5.076966316710411in"}

This graph includes a control that allows the user to select which
simulation to graph the results from. On each graph

-   The black line shows the 'True' mean response being simulated.

-   The brown circles and arms show the mean raw data and its 95% CI for
    each arm.

-   The green solid line shows the estimate of the mean response.

-   The green dashed lines show the boundaries of the 95% credible
    interval for the estimate of the response.

-   Blue bars showing the number of subjects allocated on each treatment
    arm.

![](../coreUGattachments/continuous/media/image61.png){width="6.5in"
height="4.717361111111111in"}

Control to select the individual simulation results to be displayed

## Per Sim: Posterior Quantities

This graph shows the final analysis at the end of individual
simulations, including the distribution of a selected QOI.

![](../coreUGattachments/continuous/media/image62.png){width="5.478728127734033in"
height="5.048655949256343in"}

This graph includes a control that allows the user to select which
simulation to graph the results from. On each graph

-   The black line shows the 'True' mean response being simulated.

-   The brown circles and arms show the mean raw data and its 95% CI for
    each arm.

-   The green solid line shows the estimate of the mean response.

-   The green dashed lines show the boundaries of the 95% credible
    interval for the estimate of the response.

-   Brown bars showing the final value of the selected QOI for each arm
    at the end of the simulated trial.

The user can select from any of the Posterior Probability, Predictive
Probability or Target Probability QOIs to plot.

## Per Interim Response Graphs

This is an identical set of graphs to the Per Sim graphs, the difference
is that in addition to a control to select which simulation to graph the
results from, there is a control to select which interim within the
simulation to graph the results from. These graphs are only available
for those simulations for which 'weeks' files have been output (by
default the first 100).

![](../coreUGattachments/continuous/media/image63.png){width="6.5in"
height="4.717361111111111in"}

Controls to select the individual simulation and interim for which the
results are to be displayed

## Explore Success/Futility Criteria

  -------------------------------------------------------------------------------------------------------------------------------------------------------------
  ![](../coreUGattachments/continuous/media/image64.png){width="3.1745898950131233in"   ![](../coreUGattachments/continuous/media/image65.png){width="3.1754090113735782in"
  height="2.92538823272091in"}                                                   height="2.926143919510061in"}
  ------------------------------------------------------------------------------ ------------------------------------------------------------------------------

  -------------------------------------------------------------------------------------------------------------------------------------------------------------

  : Figure 6‑1: The Study Info sub-tab.

These graphs can be used to explore what proportion of simulated trials
of a particular scenario would have been a success/failure at final
evaluation. Using the two drop down controls the user can select the
target dose to use: e.g. Pr(Max), and set and lower/upper limits to
explore for the threshold (setting the range used on the x-axis). The
graphs show for all the decision QOIs defined for the selected Target
Dose the proportion of simulations that would have met the threshold
values.

As in the examples above, the plots will be somewhat jagged if only a
small number of simulations have been run. These graphs can be used to
select thresholds that can be expected to yield a certain level of
type-1 or power, but the user must remember these will only be
approximate (depending on the number of simulations) but can be useful
to understand the designs sensitivity to the thresholds and to set
initial thresholds early on in the design / simulation process that will
get close to the desired type-1 error and power from the outset.

## Explore Early Success/Futility Criteria

  -----------------------------------------------------------------------------------------------------------------------------------------------------------
  ![](../coreUGattachments/continuous/media/image66.png){width="3.205311679790026in"   ![](../coreUGattachments/continuous/media/image67.png){width="3.205978783902012in"
  height="2.9536996937882765in"}                                                height="2.9543153980752406in"}
  ----------------------------------------------------------------------------- -----------------------------------------------------------------------------

  -----------------------------------------------------------------------------------------------------------------------------------------------------------

  : Figure 6‑2: Visits

These graphs can be used to explore what proportion of simulated trials
of a particular scenario would have stopped early for success/futility.
NOTE these graphs require weeks files to have been output, they are also
most use where the design has been simulated with interims but no early
stopping (unlike the examples above where the shape of the "existing
stopping rules" line indicates that early stopping occurred in these
simulations).

Using the two drop down controls, the user can select which decision QOI
is evaluated and from which interim onwards stopping will be permitted.
Lines are then displayed for the proportion of simulations that would
have stopped by each interim for a fixed set of thresholds.

Typically these can be used to see at what threshold (and starting at
what interim) stopping for success or futility introduces an
unacceptably level of 'incorrect' early stopping -- stopping for
futility in successful scenarios and stopping for success in futile
scenarios and whether at below/above these levels there may be a useful
probability of correct stopping.

## Explore Arm Dropping Criteria

  -------------------------------------------------------------------------------------------
  ![](../coreUGattachments/continuous/media/image68.png){width="5.499207130358705in"
  height="5.067528433945757in"}
  ----------------------------------------------------------------------------- -------------

  -------------------------------------------------------------------------------------------

  : Figure 6‑3: Treatment Arms

This graph is similar to the Explore Early Success/Futility Criteria
graph but for arm dropping criteria. The user has an additional control
to select which dose the proportion of trials in which the arm would be
dropped is displayed.

## Success/Futility Stopping Contours

  -------------------------------------------------------------------------------------------------------------------------------------------------------------
  ![](../coreUGattachments/continuous/media/image69.png){width="3.1848293963254592in"   ![](../coreUGattachments/continuous/media/image70.png){width="3.1789162292213473in"
  height="2.9348261154855644in"}                                                 height="2.929375546806649in"}
  ------------------------------------------------------------------------------ ------------------------------------------------------------------------------

  -------------------------------------------------------------------------------------------------------------------------------------------------------------

  : Figure 6‑4 Treatment Arms, 2D Treatment Model

These graphs allow early stopping and final evaluation criteria to be
considered jointly. Like the explore early stopping criteria plots,
these graphs require weeks files to have been output and will work best
if interims were evaluated but no trials actually stopped early.

The user selects the decision QOI to plot, the first interim at which
early stopping is allowed, and the upper/lower limit of the threshold to
consider.

FACTS will then plot contours where (final evaluation threshold, early
stopping threshold) yield the same proportion of trials that are
successful/futile. Contours are only plotted where final evaluation
threshold \< early stopping threshold for success and vice versa for
futility. Early stopping criteria should not be less strict than final
criteria.

Again the example graphs shown are based on only 100 simulations with
weeks files, so any threshold derived will only very approximately yield
these success/futility rates.

# Across Scenario Graphs

## Selected Arms

This graph shows a bar chart for each scenario and variant selected.
Each chart shows how often each arm was 'selected' by the target QOI
specified on the Study \> Variants tab. Each bar uses a stacked bar to
show the proportion of times that arm was:

-   "Successful" --the arm was correctly selected (marked as "Should
    succeed" on the VSR tab) and the trial was successful.

-   "Should not succeed" -- the arm was incorrectly selected (not marked
    as "Should succeed" on the VSR tab) and the trial was successful.

-   Unsuccessful -- the arm was selected and the trial failed.

![](../coreUGattachments/continuous/media/image71.png){width="6.925in"
height="3.8152777777777778in"}

## QOI Box Plots

This graph shows a box and whisker plot for each scenario and variant
selected. Each plot shows the distribution of the values of a selected
QOI for each arm. There is a drop down control to allow the selection of
the QOI to be displayed. Any Posterior probability, Predictive
probability, p-value or target QOI can be selected.

![](../coreUGattachments/continuous/media/image72.png){width="6.925in"
height="3.8152777777777778in"}

## Ppn Success

This grouped bar chart shows a bar for the proportion of successful
simulations for each variant, grouped by scenario.

![](../coreUGattachments/continuous/media/image73.png){width="6.925in"
height="3.8152777777777778in"}

## Response

This graph shows a dose response plot for each scenario and variant
selected. Each plot shows the mean estimate over the simulations and the
95%-ile interval of the mean estimates over the simulations. The graph
also shoes the "true response" i.e. the mean response being simulated.

![](../coreUGattachments/continuous/media/image74.png){width="6.925in"
height="3.8152777777777778in"}

## Allocation

This graph shows a box and whisker plot for each scenario and variant
selected. Each plot shows the distribution of the number of subjects
allocated to each arm over the simulations.

![](../coreUGattachments/continuous/media/image75.png){width="6.925in"
height="3.8152777777777778in"}

## Sample Size

This graph shows the mean sample size for each scenario at different
maximum sample sizes (the different variants).

![](../coreUGattachments/continuous/media/image76.png){width="6.925in"
height="3.8152777777777778in"}

## Interim vs Final Scatter Plot

This is an interactive plot that shows the outcome of each simulation
over all the scenarios of a selected variant.

The x-axis shows the value of the selected decision QOI at the specified
interim, and the y-axis shows the final value of a (possibly different)
selected decision QOI. As well as selecting a decision QOI for the final
decision, the graph can use the actual final decision in the simulations
-- the value of the QOI used in the first criteria is used for the
decision is used for the y-axis.

Note the graph is based just on the values at the selected interim, what
might happen at other interims is ignored.

Thresholds can be set to specify early and late success/futility. Each
scenario is then coloured to show its outcome -- and stacked bar graphs
are displayed to show the proportion of each outcome for each scenario.
The thresholds can be changed and the graph re-drawn. If the selected
QOI uses a p-value the checks for success are that it is "\<" than the
threshold, (and vice-versa for futility), otherwise the checks for
success are that it is "\>" the threshold (and vice-versa for futility).

The graph can only display the results for simulations for which cohorts
files have been output, and for simulations that reached the specified
interim. Thus the graph works best if interims have been specified, but
the simulations run without any early stopping enabled -- so each
simulation has the results for every interim.

With 1,000 simulations per scenario and cohorts files for each
simulation, the graph will take several seconds to re-draw. To allow
several parameters to be set before redrawing (rather than having to
wait for the redraw after each change) the graph is only redrawn after
the 'Redraw' button is clicked.

![Chart, scatter chart Description automatically
generated](../coreUGattachments/continuous/media/image77.png){width="6.925in"
height="4.772916666666666in"}

## Receiver Operating Characteristics

This graph plots the relative proportion of successful simulations in
the scenarios compared to the proportion of successes in one specific
scenario. The intended use of this is to yield a "Receiver Operating
Characteristics" (ROC) curve. This is done as follows:

-   Select the decision QoI that is to be used to determine final
    success/futility. (The graph only supports the simple case where
    just one is being used).

-   Select a scenario that represents the 'Null' case -- where
    determining success is a type-1 error.

-   If multiple variants have been simulated, select which variant to
    plot.

FACTS computes for the null scenario, for a range of decision threshold
values, what proportion of the 'Null' scenario sims would have been
successful (giving the estimated type-1 error rate), these proportions
form the x-values for each point. The corresponding threshold values are
shown on the x-axis at the top of the graph, the type-1 error rate on
the x-axis at the bottom of the graph.

FACTS then computes for each of the other scenarios in turn the
proportion of sims that would have been successful **and selected a
"should succeed" dose** so it is necessary for doses to have been
specified as "should succeed" on the Virtual Subject Response profiles
(giving the estimate of power for that scenario -- where 'power' also
requires correct dose selection), at each of the threshold values, these
proportions are then shown on the y-axis of the graph.

Thus for each scenario we can see the estimated power of the design to
determine success for a given type-1 error rate in the specified Null
scenario.

![](../coreUGattachments/continuous/media/image78.png){width="6.925in"
height="3.8152777777777778in"}

# Analysis

The analysis tab allows the user to supply a specific data set for
analysis by the design specified in the Design tab of the ".facts" file.

![](../coreUGattachments/continuous/media/image79.png){width="5.014761592300962in"
height="3.8078390201224845in"}

Clicking on the "Use Design to Analyze Data" button, will create an
empty "subject.csv" file in the main simulation results directory and an
'Analysis' sub-directory there for running the analysis and saving the
outputs.

Alternatively, clicking on the "Import Data to Analyze" launches a file
browser, allowing the user to select a '.csv' file to load as the data
to analyze. This is a shortcut for first clicking on the "Use Design to
Analyze Data" button, and then clicking on the "Select File to Create
New Analysis" button on the subject data tab.

![](../coreUGattachments/continuous/media/image80.png){width="4.520758967629046in"
height="3.4327307524059494in"}

After enabling data analysis, the analysis screen is shown with no data
loaded. By clicking on the "Subject Data" tab the user is now able to
enter data values directly, or to load a '.csv' file already containing
data:

![Graphical user interface, application Description automatically
generated](../coreUGattachments/continuous/media/image81.png){width="4.58830927384077in"
height="3.4840234033245845in"}

## Entering the data directly

For a typical FACTS Core trial, there are normally too many subjects to
want to enter the data directly, but it is possible. Also if data is
first loaded from an external file, it is presented in the same grid as
that used for data entry and additional data can be added or existing
data modified.

The data format is the same as the 'patientsNNNN.csv' output file from
simulations, so it is easy to use these as the basis for a trial
analysis.

-   The first column is the Subject ID. FACTS does not use this value,
    it is there to allow the data to be cross-referenced to an external
    data source. If not required there is no harm simply entering '1' on
    each row.

-   Region ID is a value output from FACTS simulation, reflecting the
    recruiting region the simulated subject was recruited in. It is not
    used in analysis, if a region ID is not available there is no harm
    simply entering '1' for each subject.

-   Date is a real number indicating when the subject was recruited in
    weeks[^5] from the start of the trial. It is output from FACTS
    simulation, it is not used in analysis. If a date is not available
    there is no harm simply entering '1' for each subject.

-   Dose index indicates which arm the subject was randomized to. The
    index of each arm is visible on the Study \> Treatment Arms tab.
    Index '1' is the Control arm if a Control is present.

-   Last Visit# is the index of last visit for which there is data for
    the subject. Previously FACTS could not process data with data
    missing from visits before the last visit. From FACTS 6.2 this is
    now possible. Visits for which no data is available should be given
    the value "-9999". Data supplied for a subject's visits after 'Last
    Visit#' is ignored.

-   Dropout, is a flag, value '0' (not dropped out) or '1' (dropped
    out). For s subject that has dropped out, FACTS will apply the
    defined value for the subject from the 'Last Visit#'.

-   Baseline, this should be the subjects baseline score -- if it has
    been defined (on the Study tab) that baseline is being analyzed,
    otherwise it is ignored.

-   Visit1-... these are the subjects response values at the defined
    visits (on the Study tab), up to and including the final visit.

![](../coreUGattachments/continuous/media/image82.png){width="5.011411854768154in"
height="3.8052952755905514in"}

If data is entered and then 'Run Analysis' clicked, the data is saved to
a file called 'patients.dat' and the analysis results saved to a folder
called 'Analysis' within the "\_results" folder of the design.

![](../coreUGattachments/continuous/media/image83.png){width="5.027722003499562in"
height="2.3938659230096238in"}

The 'Save As' button can be used to save the file with a different name,
but it will still be saved within the \_Results folder.

A specific results folder is also created, called 'Analysis\_\<file
name\>'.

## Loading Data From a File

As well as entering the data via FACTS its possible to load the data
from a 'subject.csv' file. These can be created within FACTS or outside
of FACTS and once created can be edited FACTS or outside of FACTS.

We have tried to make it particularly easy to enter, modify and analyze
data in N-CRM because this is a useful way to explore the properties of
the design in addition to simulation.

### The subject.csv file format

The file is a simple ascii file with the different data items separated
by commas. Any line starting with '#'' is ignored, here we use that to
include a header row. The data may also include spaces to aid
readability (but **not**, currently, tabs). Each line defines the dose
given to a single subject and that subject's response.

The format of the file is the same as the 'patientsNNNN.csv' output
file, (Section 18.5 below) and the column values described above.

### Converting arrival date value from days to weeks

From FACTS 7.0 the value in the Date field is interpreted as being in
weeks (rather than days as in previous versions). If you have existing
data, a simple conversion tool is provided "Convert Date from Days to
Weeks" that simply divides all the Date values by 7. Having run it, you
then need to save the modified data. The values of the Date field will
only make a difference to TTE analyses.

![Graphical user interface, application, table Description automatically
generated](../coreUGattachments/continuous/media/image84.png){width="5.008907480314961in"
height="3.833532370953631in"}![Text, table Description automatically
generated](../coreUGattachments/continuous/media/image85.png){width="0.8278991688538933in"
height="2.1494313210848643in"}

## Data file management on the Analysis tab

From FACTS 6.2 onwards FACTS now supports multiple subject data files
and analysis folders.

Buttons that allow the subject data file to be changed:

-   'Select File to Create New Analysis: launches a file browser that
    allows the user to select a new ".csv" file from any location. The
    selected file is copied to the "\_Results" folder (retaining its
    current name) and made the current subject data file.

-   'Rename Current Analysis' allows the name of the current subject
    data file to be changed.

-   'Select Difference Analysis' allows a different subject data file
    that is in the "\_Results" folder to be made the current subject
    data file.

-   'Delete Analysis' allows any of the subject data files that are in
    the "\_Results" folder to be deleted.

The name of the current subject data file and the name of the
corresponding analysis folder are shown below the subject data file
buttons.

There are five buttons that allow the currently loaded subject data file
to be modified:

-   'Delete Row' deletes the currently selected row in the data grid.
    The data in the current subject file is not updated unless the
    current data is saved.

-   'Delete All' clears all the data in the data grid. The data in the
    current subject file is not updated unless the current data is
    saved.

-   'Reload data' replaces the data in the data grid with the data that
    is still in the current subject data file.

-   'Save As' saves the current data in the data grid to a new subject
    data file in the "\_Results" folder, and makes that the current
    subject data file.

-   "Save" saves the current data in the data grid to the current
    subject data file.

Running an analysis performs a 'Save' before running the analysis.

## Running an Analysis

Once data has been loaded or entered, the user can click the 'Run
Analysis' button.

Once the analysis has run, FACTS displays the recommendation, and a
graph showing the data.

![](../coreUGattachments/continuous/media/image86.png){width="5.020615704286964in"
height="3.8122845581802274in"}

## Analysis Options

At the top of the analysis tab there are various parameters that can be
set to control the analysis performed:

![](../coreUGattachments/continuous/media/image87.png){width="6.925in"
height="2.03125in"}

-   The MCMC parameters

    -   "Burn-in" for the number of initial samples that are discarded

    -   "Length" for the number of samples drawn to form the posterior
        distributions

    -   Random number seed that can be set to generate a different
        sampling sequence

    -   Whether an MCMC file is to be output (which enables the ability
        to view sample history graphs for the model parameters).

    -   Edit command line parameters allows expert users to enter
        command line parameters to be passed to the design engine that
        are not settable through this panel.

    -   The user specifies which interim the analysis is for and hence
        which decision criteria to be applied

        -   The user supplied the interim analysis number or

        -   Selects "Do Final Analysis" which causes the analysis to use
            the final evaluation success/futility criteria.

    -   The user specifies the current week of the trial if the amount
        if information defined by "opportunity to complete" is required.

    -   If this is an arm dropping design, it is possible to flag which,
        if any, doses have already been dropped and hence to be excluded
        from future adaptation decisions, but included in the analysis
        \[this can be used even if the design is not an arm dropping
        design -- to allow for an arm being dropped for reasons outside
        the scope of the simulation, such as logistical or safety
        reasons but only be entering the '-armsdropped' command line
        parameter the control is only displayed if the design includes
        arm dropping\].

# Detailed Simulation Results

After simulation has completed and simulation results have been loaded,
the user may examine detailed results for any scenario with simulation
data in the table by double-clicking on the row. A separate window (as
in Figure 15‑1) displays the individual results for each simulation.
This is the contents of the "simulations.csv" file, which is described
below. The simulations results are partitioned into the same various
results groupings as the summary results. These can be accessed from the
"right click" menu, along with opening the results folder, opening the
weeks file for a particular simulation and opening the simulated
patients file for a particular simulation (where a "weeks" file or a
"patients" file has been output).

![](../coreUGattachments/continuous/media/image88.png){width="5.641510279965004in"
height="2.896095800524934in"}

# Output Files

FACTS stores the results of simulations as '.csv' files under a Results
folder. For each row in the simulations table, there is a folder named
by the profiles that make up the scenario, which contains the
corresponding '.csv' files.

![](../coreUGattachments/continuous/media/image89.png){width="5.2805708661417325in"
height="2.673570647419073in"}

These files can be opened using Microsoft Excel, but versions of Excel
before 2007 are restricted to 256 columns, which is too few to view some
files in their entirety. The 'Calc' application in 'OpenOffice' will
show all the columns (and will open two files that have the same name at
the same time!). Because Excel takes out a file lock on any file it has
open, while a file is open in Excel it cannot be deleted or modified by
another application. The most common cause for an error to be reported
when simulating trials in FACTS is because the user has one of the
previous results files is still open in Excel.

In the scenario directory there are the following types of results file:

**Summary.csv** Contains a single row of data that summarizes the
simulation results. This is the source of the shown on the simulations
tab.

**Summary_freq_locf.csv**

**Summary_freq_fail.csv**

**Summary_freq_ignore.csv** Contains a single row of data that that
summarizes the frequentist analysis of the simulations. A file is output
for each of the different methods for dealing with missing data that are
applicable: BOCF if the baseline score is being simulated, LOCF and
"ignore" (referred to as PP (Per-Protocol) in the GUI).

**Simulations.csv** Contains one row per simulation describing the final
state of each simulation for every trial simulated.

**Simulations_freq.csv** Contains one row per simulation describing the
frequentist analysis of the final state of each simulation for every
trial simulated.

**PatientsNNNNN.csv** Contains one row per patient in a simulation,
where NNNNN is the number of the simulation. By default this file is
written out only for the first simulation, but this can be changed on
the simulations tab.

**WeeksNNNNN.csv** contains one row for each cohort during a simulation
where NNN is the number of the simulation. By default this file is
written only for the first 100 simulations, but this can be changed via
the simulation tab. The values in the last row of the cohorts file will
be the same as the final values for that simulation in the simulations
file.

**weeks_freq_bocf_NNNNN.csv,**

**weeks_freq_locf_NNNN.csv,**

**weeks_freq_ignore_NNNNN.csv,**

Contains one row for each interim during a simulation where NNNNN is the
number of the simulation. A file is output for each simulation for which
a frequentist "weeks file" is to be output, and for each of the
different methods for dealing with missing data that are applicable.

## Contents of summary.csv

The first line is a header line, starting with a '#', containing the
column headings.

+-----------+---------+------------------------------------------------+
| Column    | Number  | Description                                    |
| Title     | of      |                                                |
|           | columns |                                                |
+===========+=========+================================================+
| Project   | 1       | The name of the facts file                     |
+-----------+---------+------------------------------------------------+
| Scenario  | 1       | The name of the scenario                       |
+-----------+---------+------------------------------------------------+
| Timestamp | 1       | The time the simulations were run              |
+-----------+---------+------------------------------------------------+
| Version   | 1       | The version of FACTS that was used to run the  |
|           |         | simulations                                    |
+-----------+---------+------------------------------------------------+
| NSim      | 1       | The number of simulation run.                  |
+-----------+---------+------------------------------------------------+
| Random    | 1       | The random number seed                         |
| Number    |         |                                                |
| Seed      |         |                                                |
+-----------+---------+------------------------------------------------+
| No. Subj  | 1       | The mean, over the simulations, of the total   |
|           |         | number of subjects recruited in the trial.     |
+-----------+---------+------------------------------------------------+
| SE Subj.  | 1       | The standard error of the total number of      |
|           |         | subjects recruited into the trials.            |
+-----------+---------+------------------------------------------------+
| No.Subj   | 1       | The 80^th^ percentile, over the simulations,   |
| 80%ile    |         | of the total number of subjects recruited in   |
|           |         | the trial.                                     |
+-----------+---------+------------------------------------------------+
| Ppn       | 1       | The proportion of simulations that were        |
| Overall   |         | successful (P(ES) + P(LS))                     |
| Success   |         |                                                |
+-----------+---------+------------------------------------------------+
| Ppn       | 1       | The proportion of simulations that were futile |
| Overall   |         | (P(EF) + P(LF))                                |
| Futility  |         |                                                |
+-----------+---------+------------------------------------------------+
| P(ES)     | > 1     | The proportion of simulations that stopped     |
|           |         | early for success.                             |
+-----------+---------+------------------------------------------------+
| P(LS)     | 1       | The proportion of simulations that did not     |
|           |         | stop early, and were successful on final       |
|           |         | evaluation.                                    |
+-----------+---------+------------------------------------------------+
| P(LF)     | 1       | The proportion of simulations that did not     |
|           |         | stop early, and were futile on final           |
|           |         | evaluation.                                    |
+-----------+---------+------------------------------------------------+
| P(EF)     | 1       | The proportion of simulations that stopped     |
|           |         | early for futility.                            |
+-----------+---------+------------------------------------------------+
| SFFF      | 1       | The proportion of simulations that stopped     |
|           |         | early for success, but at final analysis were  |
|           |         | futile (Success-Futility 'flip-flops').        |
+-----------+---------+------------------------------------------------+
| FSFF      | 1       | The proportion of simulations that stopped     |
|           |         | early for futility, but at final analysis were |
|           |         | successful (Futility- Success 'flip-flops').   |
+-----------+---------+------------------------------------------------+
| Undec.    | 1       | The proportion of simulations that did not     |
|           |         | stop early, and met neither the success or     |
|           |         | futility final evaluation criteria and hence   |
|           |         | are counted as 'undecided'.                    |
+-----------+---------+------------------------------------------------+
| Unused    | 3       | Three unused columns for other outcome types.  |
+-----------+---------+------------------------------------------------+
| Early     | 1       | This is the mean early decision time (over the |
| Success   |         | simulations stopped early for success), it is  |
| Time      |         | the time from the start of the trial to the    |
|           |         | interim where early success was declared. It   |
|           |         | does not include the subsequent follow up      |
|           |         | time.                                          |
+-----------+---------+------------------------------------------------+
| Mean      | D       | The mean (over the simulations) of the number  |
| Alloc     |         | of subjects allocated to each treatment arm.   |
| \<dose\>  |         |                                                |
+-----------+---------+------------------------------------------------+
| SE Alloc  | D       | The standard error (over the simulations) of   |
| \<dose\>  |         | the number of subjects allocated to each       |
|           |         | treatment arm.                                 |
+-----------+---------+------------------------------------------------+
| Mean Resp | D       | The mean of the estimates of response of each  |
| \<dose\>  |         | treatment arm.                                 |
+-----------+---------+------------------------------------------------+
| SE Resp   | D       | The standard error, over the simulations, of   |
| \<dose\>  |         | the estimate of response of each treatment     |
|           |         | arm.                                           |
+-----------+---------+------------------------------------------------+
| Mean      | 1       | The mean of the estimate of sigma -- the       |
| Sigma     |         | average standard deviation of the dose         |
|           |         | response                                       |
+-----------+---------+------------------------------------------------+
| SE Mean   | 1       | The standard error of the estimate of sigma -- |
| Sigma     |         | the average standard deviation of the dose     |
|           |         | response                                       |
+-----------+---------+------------------------------------------------+
| True Mean | D       | The true response for each treatment arm used  |
| resp      |         | when sampling the simulated subject responses. |
| \<dose\>  |         |                                                |
+-----------+---------+------------------------------------------------+
| True SD   | D       | The true SD of the response for each treatment |
| resp      |         | arm of the simulated subject responses         |
| \<dose\>  |         |                                                |
+-----------+---------+------------------------------------------------+
| Mean      | D\*V    | These are only calculated and written out if   |
| Longmod   |         | the Time Course Hierarchical or ITP            |
| Resp:     |         | longitudinal models are being used.            |
| \<Dose\>  |         |                                                |
| \<Visit\> |         | This is the mean (over the simulations) of the |
|           |         | estimate of the mean response for a particular |
|           |         | dose at a particular visit.                    |
+-----------+---------+------------------------------------------------+
| SE Mean   | D\*V    | This is the standard error (over the           |
| Longmod   |         | simulations) of the longitudinal model         |
| Resp:     |         | estimate of the response at intermediate       |
| \<Dose\>  |         | visits (see above)                             |
| \<Visit\> |         |                                                |
+-----------+---------+------------------------------------------------+
| Mean      | D       | The mean number of completers for each         |
| Complete  |         | treatment arm                                  |
| \<Dose\>  |         |                                                |
+-----------+---------+------------------------------------------------+
| Mean      | D       | The mean number of complete information (as    |
| Complete  |         | specified by the interim information type on   |
| Info      |         | the Interims tab) for each treatment arm       |
| \<Dose\>  |         |                                                |
+-----------+---------+------------------------------------------------+
| No        | D\*V    | The mean number of dropouts per treatment arm  |
| .Dropouts |         | per visit                                      |
| \<Dose\>  |         |                                                |
| \<Visit\> |         |                                                |
+-----------+---------+------------------------------------------------+
| Mean Beta | 1       | The mean of the estimates of the coefficient   |
|           |         | of baseline adjustment                         |
+-----------+---------+------------------------------------------------+
| SE beta   | 1       | The standard error of the estimates of the     |
|           |         | coefficient of baseline adjustment             |
+-----------+---------+------------------------------------------------+
| Mean      | 1       | The mean of the estimate of the mean of the    |
| Baseline  |         | baseline score                                 |
+-----------+---------+------------------------------------------------+
| SE Mean   | 1       | The standard error of the estimate of the mean |
| Baseline  |         | of the baseline score                          |
+-----------+---------+------------------------------------------------+
| SD        | 1       | The mean of the estimate of the SD of the      |
| Baseline  |         | baseline score                                 |
+-----------+---------+------------------------------------------------+
| SE SD     | 1       | The standard error of the estimate of the SD   |
| Baseline  |         | of the baseline score                          |
+-----------+---------+------------------------------------------------+
| True Mean | 1       | The true mean of the baseline score            |
| Baseline  |         | (accounting for possible truncation)           |
+-----------+---------+------------------------------------------------+
| True SD   | 1       | The true SD of the baseline score (accounting  |
| Baseline  |         | for possible truncation)                       |
+-----------+---------+------------------------------------------------+
| BAC Mean  | 1       | If a hierarchical prior for Control is being   |
|           |         | used this is the mean (over the simulations)   |
|           |         | of the posterior estimate of the mean of the   |
|           |         | Bayesian Augmented Control (Hierarchical       |
|           |         | Prior) distribution of mean control responses. |
+-----------+---------+------------------------------------------------+
| SE of BAC | 1       | If a hierarchical prior for Control is being   |
| Mean      |         | used this is the standard error (over the      |
|           |         | simulations) of the posterior estimate of the  |
|           |         | mean of the Bayesian Augmented Control         |
|           |         | (Hierarchical Prior) distribution of mean      |
|           |         | control responses.                             |
+-----------+---------+------------------------------------------------+
| BAC Tau   | 1       | If a hierarchical prior for Control is being   |
|           |         | used this is the mean (over the simulations)   |
|           |         | of the posterior estimate of the SD of the     |
|           |         | Bayesian Augmented Control (Hierarchical       |
|           |         | Prior) distribution of mean control responses. |
+-----------+---------+------------------------------------------------+
| SE of BAC | 1       | If a hierarchical prior for Control is being   |
| Tau       |         | used this is the standard error (over the      |
|           |         | simulations) of the posterior estimate of the  |
|           |         | SD of the Bayesian Augmented Control           |
|           |         | (Hierarchical Prior) distribution of mean      |
|           |         | control responses.                             |
+-----------+---------+------------------------------------------------+
| BAAC Mean | 1       | If a hierarchical prior for Active Comparator  |
|           |         | is being used this is the mean (over the       |
|           |         | simulations) of the posterior estimate of the  |
|           |         | mean of the Bayesian Augmented Active          |
|           |         | Comparator (Hierarchical Prior) distribution   |
|           |         | of mean active comparator responses.           |
+-----------+---------+------------------------------------------------+
| SE of     | 1       | If a hierarchical prior for Active Comparator  |
| BAAC Mean |         | is being used this is the standard error (over |
|           |         | the simulations) of the posterior estimate of  |
|           |         | the mean of the Bayesian Augmented Active      |
|           |         | Comparator (Hierarchical Prior) distribution   |
|           |         | of mean control responses.                     |
+-----------+---------+------------------------------------------------+
| BAAC Tau  | 1       | If a hierarchical prior for Active Comparator  |
|           |         | is being used this is the mean (over the       |
|           |         | simulations) of the posterior estimate of the  |
|           |         | SD of the Bayesian Augmented Active Comparator |
|           |         | (Hierarchical Prior) distribution of mean      |
|           |         | active comparator responses.                   |
+-----------+---------+------------------------------------------------+
| SE of     | 1       | If a hierarchical prior for Active Comparator  |
| BAAC Tau  |         | is being used this is the standard error (over |
|           |         | the simulations) of the posterior estimate of  |
|           |         | the SD of the Bayesian Augmented Active        |
|           |         | Comparator (Hierarchical Prior) distribution   |
|           |         | of mean active comparator responses.           |
+-----------+---------+------------------------------------------------+
| Mean      | 1       | The mean, over the simulations, of the overall |
| Duration  |         | duration of the trials, from first person      |
|           |         | first visit, to last person last visit.        |
+-----------+---------+------------------------------------------------+
| Ppn Arms  | D       | The proportion of the simulations in which     |
| Dropped   |         | each arm was dropped. These will be zero if    |
| \<dose\>  |         | arm dropping is not selected as the means of   |
|           |         | adaptive allocation.                           |
+-----------+---------+------------------------------------------------+
| Mean LPFV | 1       | The mean, over the simulations, of the accrual |
| time      |         | period of the trials, from first person first  |
|           |         | visit, to last person first visit (LPFV).      |
+-----------+---------+------------------------------------------------+
| Ppn       | 1       | The proportion of the simulations where the    |
| Correct   |         | correct arm has been selected, where an arm is |
| Arm       |         | deemed "correct" based on whether it was       |
|           |         | marked as "Should Succeed" for the relevant    |
|           |         | scenario on the VSR tab.                       |
+-----------+---------+------------------------------------------------+
| Ppn       | 1       | The proportion of the simulations where the    |
| Incorrect |         | incorrect correct arm has been selected, where |
| Arm       |         | an arm is deemed "incorrect" based on whether  |
|           |         | it wasn't marked as "Should Succeed" for the   |
|           |         | relevant scenario on the VSR tab.              |
+-----------+---------+------------------------------------------------+
| QOI       |         |                                                |
| Columns   |         |                                                |
+-----------+---------+------------------------------------------------+

: Figure 6‑5 2D grid of the selected combinations in the trial

### QOI Columns

The QOI columns depend on the QOIs that have been defined for this
design. The columns in the following order:

Posterior Probabilities The summary file contains the mean (over the
simulations) of the posterior probability for each dose.

Predictive Probabilities The summary file contains the mean (over the
simulations) of the predictive probability for each dose.

P-Values The summary file contains the mean (over the simulations) of
the p-value for each dose.

Target Probabilities The summary file contains the proportion of times
(over the simulations) each dose had the greatest probability of being
the target.

Decision QOIs The summary file contains the mean (over the simulations)
of the final value of the decision QOI at the target.

## Contents of Summary_freq\_\<missing\>.csv

There is a frequentist summary file for each type of treatment of
missing values.

The first line is a header line, starting with a '#', and containing

-   The FACTS GUI version number

-   The name of the FACTS file

-   The name of the scenario

-   The time stamp of the start of the simulation

The second line is a header line, starting with a '#', containing the
column headings.

+----------+---------+------------------------------------------------+
| Column   | Number  | Description                                    |
| Title    | of      |                                                |
|          | columns |                                                |
+==========+=========+================================================+
| Mean     | D       | The mean response per dose.                    |
| Theta    |         |                                                |
| \<dose\> |         |                                                |
+----------+---------+------------------------------------------------+
| SE Theta | D       | The standard error of the response per dose    |
| \<dose\> |         |                                                |
+----------+---------+------------------------------------------------+
| Mean     | 1       | The mean of the estimate of the baseline       |
| Beta     |         | coefficient.                                   |
| (b       |         |                                                |
| aseline) |         |                                                |
+----------+---------+------------------------------------------------+
| SE Mean  | 1       | The standard error of the estimate of the      |
| Beta     |         | baseline coefficient                           |
| (b       |         |                                                |
| aseline) |         |                                                |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | The proportion of simulations where at least   |
| Signif   |         | one of the unadjusted p-values is less than    |
|          |         | the user specified one-sided alpha.            |
+----------+---------+------------------------------------------------+
| Ppn      | D       | For each treatment arm, the proportion of      |
| Signif   |         | simulations where the unadjusted p-value is    |
| \<dose\> |         | less than the user specified one-sided alpha.  |
|          |         |                                                |
|          |         | The marginal probability of significance per   |
|          |         | dose (using unadjusted p-values.               |
+----------+---------+------------------------------------------------+
| Bias     | D       | The difference between the estimated mean      |
| \<dose\> |         | response and the true (simulated) mean         |
|          |         | response per dose                              |
+----------+---------+------------------------------------------------+
| Coverage | D       | The proportion of simulations where the        |
| \<dose\> |         | unadjusted confidence interval for the         |
|          |         | response contains the true mean response used  |
|          |         | to simulate subject responses.                 |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | The proportion of simulations where at least   |
| Signif   |         | one of the Dunnett adjusted p-values is less   |
| Dunnett  |         | than the user specified one-sided alpha.       |
+----------+---------+------------------------------------------------+
| Ppn      | D       | For each treatment arm, the proportion of      |
| Signif   |         | simulations where the Dunnett adjusted p-value |
| Dunnett  |         | is less than the user specified one-sided      |
| \<dose\> |         | alpha.                                         |
+----------+---------+------------------------------------------------+
| Coverage | D       | The proportion of simulations where the        |
| Dunnett  |         | Dunnett adjusted confidence interval contains  |
| \<dose\> |         | the true mean response used to simulate        |
|          |         | subjects responses.                            |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | The proportion of simulations where at least   |
| Signif   |         | one of the Bonferroni adjusted p-values is     |
| Bonf     |         | less than the user specified one-sided alpha.  |
+----------+---------+------------------------------------------------+
| Ppn      | D       | For each treatment arm, the proportion of      |
| Signif   |         | simulations where the Bonferroni adjusted      |
| Bonf     |         | p-value is less than the user specified        |
| \<dose\> |         | one-sided alpha.                               |
+----------+---------+------------------------------------------------+
| Coverage | D       | The proportion of simulations where the        |
| Bonf     |         | Bonferroni adjusted confidence interval        |
| \<dose\> |         | contains the true mean response used to        |
|          |         | simulate subjects responses.                   |
+----------+---------+------------------------------------------------+
| Ppn      | 1       | The proportion of simulations where the trend  |
| Signif   |         | test p-value is less than the user specified   |
| Trend    |         | one-sided alpha.                               |
+----------+---------+------------------------------------------------+

: Figure 6‑6 The Variants tab, specifying 5 variants

## Contents of simulations.csv and weeksNNNNN.csv

The simulations.csv file holds the FACTS summary of the final analysis
for each simulation (one per row).

The weeksNNNNN.csv file holds the FACTS summary of every analysis for
the NNNNN^th^ simulation. It contains a row for each interim in the
trial and a roe for the final analysis (Interim number 999). The final
analysis occurs after all the planned data is collected.

-   If the trial does not stop early this will be after all full
    follow-up for all subjects,

-   if the trial does stop early this will be either

<!-- -->

-   an analysis after full follow-up of the subjects recruited up to the
    point of the interim when the stopping decision was taken (If the
    "continue follow-up" option has been selected by the user on the
    Interims tab)

-   or it will perform a repeat the analysis using the data available at
    the interim when the stopping decision was taken -- the results will
    vary from those of the interim within MCMC sampling error. (This
    "unnecessary" analysis is included to keep the content of the weeks
    files consistent and hence simplify the post processing of "weeks"
    files).

The first line is a header line, starting with a '#', and containing

-   The FACTS GUI version number

-   The name of the FACTS file

-   The name of the scenario

-   The time stamp of the start of the simulation

The second line is a header line, starting with a '#', containing the
column headings.

Most of the columns are common to the two file types, but the weeks file
does not contain columns for the 'final' values of the evaluation
criteria.

+-------------+------+-------+----+----------------------------------+
| Column      | Nu   | In    | In | Description                      |
| Title       | mber | s     | w  |                                  |
|             | of   | imula | ee |                                  |
|             | col  | tions | ks |                                  |
|             | umns | file  | fi |                                  |
|             |      |       | le |                                  |
+=============+======+=======+====+==================================+
| \# Weeks    | 1    |       | ✔  | The week of the analysis         |
| (Duration)  |      |       |    |                                  |
+-------------+------+-------+----+----------------------------------+
| #Sim        | 1    | ✔     |    | The number of the simulation.    |
+-------------+------+-------+----+----------------------------------+
| Random      | 1    | ✔     | ✔  | Base random number seed.         |
| Number Seed |      |       |    |                                  |
+-------------+------+-------+----+----------------------------------+
| LastInterim | 1    | ✔     |    | The index of the last interim    |
|             |      |       |    | performed the index of the       |
|             |      |       |    | interim immediately before the   |
|             |      |       |    | final interim (index '999').     |
|             |      |       |    | Note this is not necessarily the |
|             |      |       |    | interim when the trial stopped   |
|             |      |       |    | if the design includes follow-up |
|             |      |       |    | after stopping.                  |
+-------------+------+-------+----+----------------------------------+
| #Subjects   | 1    | ✔     | ✔  | The number of subjects recruited |
|             |      |       |    | in the simulation.               |
+-------------+------+-------+----+----------------------------------+
| Outcome     | 1    | ✔     | ✔  | A flag categorizing final study  |
|             |      |       |    | outcome:                         |
|             |      |       |    |                                  |
|             |      |       |    | 1.  = Early success              |
|             |      |       |    |                                  |
|             |      |       |    | 2.  = Late success               |
|             |      |       |    |                                  |
|             |      |       |    | 3.  = Late futility              |
|             |      |       |    |                                  |
|             |      |       |    | 4.  = Early futility             |
|             |      |       |    |                                  |
|             |      |       |    | 5.  = Success to futility        |
|             |      |       |    |     flip-flop                    |
|             |      |       |    |                                  |
|             |      |       |    | 6.  = Futility to success        |
|             |      |       |    |     flip-flop                    |
|             |      |       |    |                                  |
|             |      |       |    | 7.  = Inconclusive               |
+-------------+------+-------+----+----------------------------------+
| Early       | 1    | ✔     | ✔  | This is the time to the early    |
| Success     |      |       |    | success decision (-9999 if there |
| Time        |      |       |    | was no early success decision).  |
|             |      |       |    | The from the start of the trial  |
|             |      |       |    | to the interim where the early   |
|             |      |       |    | success conditions were first    |
|             |      |       |    | met. It does not include the     |
|             |      |       |    | subsequent follow up time.       |
+-------------+------+-------+----+----------------------------------+
| Alloc       | D    | ✔     | ✔  | The number of subjects allocated |
| \<dose\>    |      |       |    | to each arm.                     |
+-------------+------+-------+----+----------------------------------+
| Pr(Alloc)   | D    | ✔     | ✔  | The probability of allocation to |
| \<dose\>    |      |       |    | the different arms following the |
|             |      |       |    | interim.                         |
+-------------+------+-------+----+----------------------------------+
| Mean resp   | D    | ✔     | ✔  | The estimated response of each   |
| \<dose\>    |      |       |    | treatment arm.                   |
+-------------+------+-------+----+----------------------------------+
| SD resp     | D    | ✔     | ✔  | The standard deviation of the    |
| \<dose\>    |      |       |    | estimate of response of each     |
|             |      |       |    | treatment arm.                   |
+-------------+------+-------+----+----------------------------------+
| True Mean   | D    | ✔     | ✔  | The true mean response of each   |
| resp        |      |       |    | treatment arm for this           |
| \<dose\>    |      |       |    | simulation.                      |
+-------------+------+-------+----+----------------------------------+
| True SD     | D    | ✔     | ✔  | The true SD of the response of   |
| resp        |      |       |    | each treatment arm for this      |
| \<dose\>    |      |       |    | simulation                       |
+-------------+------+-------+----+----------------------------------+
| Sigma       | 1    | ✔     | ✔  | The pooled estimate of the SD of |
|             |      |       |    | the response across all the      |
|             |      |       |    | treatment arms                   |
+-------------+------+-------+----+----------------------------------+
| SD_Sigma    | 1    | ✔     | ✔  | The SD of the pooled estimate of |
|             |      |       |    | the SD of the response across    |
|             |      |       |    | all the treatment arms           |
+-------------+------+-------+----+----------------------------------+
| Beta        | 1    | ✔     | ✔  | The estimate of 'Beta' the       |
|             |      |       |    | baseline adjustment coefficient, |
|             |      |       |    | if baseline adjustment is being  |
|             |      |       |    | used.                            |
+-------------+------+-------+----+----------------------------------+
| SD_Beta     | 1    | ✔     | ✔  | The SD of the estimate of 'Beta' |
|             |      |       |    | the baseline adjustment          |
|             |      |       |    | coefficient.                     |
+-------------+------+-------+----+----------------------------------+
| Mean        | 1    | ✔     | ✔  | The estimate of the mean         |
| Baseline    |      |       |    | baseline score.                  |
+-------------+------+-------+----+----------------------------------+
| SE Mean     | 1    | ✔     | ✔  | The standard error of the        |
| Baseline    |      |       |    | estimate of the mean baseline    |
|             |      |       |    | score.                           |
+-------------+------+-------+----+----------------------------------+
| SD Baseline | 1    | ✔     | ✔  | The estimate of the SD of the    |
|             |      |       |    | baseline score.                  |
+-------------+------+-------+----+----------------------------------+
| True Mean   | 1    | ✔     | ✔  | The true mean of the simulated   |
| Baseline    |      |       |    | baseline score                   |
+-------------+------+-------+----+----------------------------------+
| True SD     | 1    | ✔     | ✔  | The true SD of the simulated     |
| Baseline    |      |       |    | baseline score                   |
+-------------+------+-------+----+----------------------------------+
| Mean Raw    | D    | ✔     | ✔  | The observed mean response on    |
| Response    |      |       |    | each treatment arm (unadjusted   |
| \<dose\>    |      |       |    | by any modeling).                |
+-------------+------+-------+----+----------------------------------+
| SE Mean Raw | D    | ✔     | ✔  | The SE of the estimate of the    |
| Response    |      |       |    | mean raw response on each dose.  |
+-------------+------+-------+----+----------------------------------+
| Complete    | D    | ✔     | ✔  | The number of completed subjects |
| \<dose\>    |      |       |    | on each treatment arm at the     |
|             |      |       |    | time of the analysis.            |
+-------------+------+-------+----+----------------------------------+
| Complete    | D    | ✔     | ✔  | The number of subject who count  |
| Information |      |       |    | as complete for the purposes of  |
| \<dose\>    |      |       |    | timing interims -- whether       |
|             |      |       |    | complete or opportunity to       |
|             |      |       |    | complete and at which visit is   |
|             |      |       |    | as defined on the Interims tab.  |
|             |      |       |    |                                  |
|             |      |       |    | If interims are by enrolment     |
|             |      |       |    | then CompleteInformation is the  |
|             |      |       |    | number of subjects that have     |
|             |      |       |    | completed -- final endpoint data |
|             |      |       |    | is available.                    |
+-------------+------+-------+----+----------------------------------+
| #Dropouts   | D \* | ✔     | ✔  | The number of subjects dropped   |
| \<dose\>    | V    |       |    | out on each treatment arm and    |
| \<visit\>   |      |       |    | each visit.                      |
+-------------+------+-------+----+----------------------------------+
| DR Param    | 10   | ✔     | ✔  | The estimate of the mean value   |
| \<param\>   |      |       |    | of each of the response model    |
|             |      |       |    | parameters. The response models  |
|             |      |       |    | require up to 10 parameters,     |
|             |      |       |    | most less. The model parameters  |
|             |      |       |    | are labeled α~1~, α~2~, .. the   |
|             |      |       |    | subscripts corresponding to the  |
|             |      |       |    | index "\<param\>".               |
+-------------+------+-------+----+----------------------------------+
| Sd DR Param | 4    | ✔     | ✔  | The standard deviation of the    |
| \<param\>   |      |       |    | estimate of the mean value of    |
|             |      |       |    | the corresponding response model |
|             |      |       |    | parameter.                       |
+-------------+------+-------+----+----------------------------------+
| Longmod\_   | LM   | ✔     | ✔  | The estimate of the mean value   |
| \<model\>   | \*   |       |    | of each of the longitudinal      |
| \<          | LMP  |       |    | model parameters. The number of  |
| parameter\> | \* V |       |    | models depends on the number of  |
| \<visit\>   |      |       |    | "model instances" the user has   |
|             |      |       |    | specified.                       |
|             |      |       |    |                                  |
|             |      |       |    | For linear regression the        |
|             |      |       |    | parameters reported are:         |
|             |      |       |    |                                  |
|             |      |       |    | -   Alpha -- per visit -- the    |
|             |      |       |    |     mean estimate of the         |
|             |      |       |    |     constant offset in the       |
|             |      |       |    |     change in response from this |
|             |      |       |    |     visit to the final visit     |
|             |      |       |    |                                  |
|             |      |       |    | -   Beta -- per visit -- the     |
|             |      |       |    |     mean estimate of the         |
|             |      |       |    |     coefficient of change in     |
|             |      |       |    |     response from this visit to  |
|             |      |       |    |     the final visit              |
|             |      |       |    |                                  |
|             |      |       |    | -   Lambda -- per visit -- the   |
|             |      |       |    |     mean estimate of the SD of   |
|             |      |       |    |     the residual error term in   |
|             |      |       |    |     the predicted final visit    |
|             |      |       |    |     response based on the        |
|             |      |       |    |     response at this visit.      |
|             |      |       |    |                                  |
|             |      |       |    | For time course hierarchical the |
|             |      |       |    | parameters reported are:         |
|             |      |       |    |                                  |
|             |      |       |    | -   Alpha -- per visit -- the    |
|             |      |       |    |     mean estimate of the         |
|             |      |       |    |     exponential coefficient of   |
|             |      |       |    |     the proportion of the dose   |
|             |      |       |    |     response and per-subject     |
|             |      |       |    |     response seen at this        |
|             |      |       |    |     visit..                      |
|             |      |       |    |                                  |
|             |      |       |    | -   Lambda -- per visit -- the   |
|             |      |       |    |     mean estimate of the SD of   |
|             |      |       |    |     the residual error term in   |
|             |      |       |    |     the predicted final visit    |
|             |      |       |    |     response based on the        |
|             |      |       |    |     response at this visit.      |
|             |      |       |    |                                  |
|             |      |       |    | -   Tau -- the mean estimate of  |
|             |      |       |    |     the SD of the per subject    |
|             |      |       |    |     random effect                |
|             |      |       |    |                                  |
|             |      |       |    | For ITP the parameters are:      |
|             |      |       |    |                                  |
|             |      |       |    | -   K -- per model -- the mean   |
|             |      |       |    |     estimate of the ITP shape    |
|             |      |       |    |     parameter                    |
|             |      |       |    |                                  |
|             |      |       |    | -   Tau -- per model - the mean  |
|             |      |       |    |     estimate of the SD of the    |
|             |      |       |    |     per subject random effect    |
|             |      |       |    |                                  |
|             |      |       |    | -   Lambda -- per model -- the   |
|             |      |       |    |     mean estimate of the Sd of   |
|             |      |       |    |     the residual error.          |
|             |      |       |    |                                  |
|             |      |       |    | -   Omega -- per treatment arm   |
|             |      |       |    |     -- the mean estimate of the  |
|             |      |       |    |     mean treatment arm effect.   |
|             |      |       |    |                                  |
|             |      |       |    | For LOCF & Kernel Density there  |
|             |      |       |    | are no estimated parameters.     |
+-------------+------+-------+----+----------------------------------+
| Longmod     | D \* | ✔     | ✔  | These are only calculated and    |
| Resp:       | V    |       |    | written out if the Time Course   |
| \<Dose\>    |      |       |    | Hierarchical or ITP longitudinal |
| \<Visit\>   |      |       |    | models are being used.           |
|             |      |       |    |                                  |
|             |      |       |    | This is the mean response for a  |
|             |      |       |    | particular dose at a particular  |
|             |      |       |    | visit.                           |
+-------------+------+-------+----+----------------------------------+
| BAC Mean    | 1    | ✔     | ✔  | This is the posterior estimate   |
|             |      |       |    | of the mean of the Bayesian      |
|             |      |       |    | Augmented Control (Hierarchical  |
|             |      |       |    | Prior) distribution of mean      |
|             |      |       |    | control responses.               |
+-------------+------+-------+----+----------------------------------+
| BAC Mean SD | 1    | ✔     | ✔  | This is the SD of the posterior  |
|             |      |       |    | estimate of the mean of the      |
|             |      |       |    | Bayesian Augmented Control       |
|             |      |       |    | (Hierarchical Prior)             |
|             |      |       |    | distribution of mean control     |
|             |      |       |    | responses.                       |
+-------------+------+-------+----+----------------------------------+
| BAC Tau     | 1    | ✔     | ✔  | This is the posterior estimate   |
|             |      |       |    | of the SD of the Bayesian        |
|             |      |       |    | Augmented Control (Hierarchical  |
|             |      |       |    | Prior) distribution of mean      |
|             |      |       |    | control responses.               |
+-------------+------+-------+----+----------------------------------+
| BAC Tau SD  | 1    | ✔     | ✔  | This is the SD of the posterior  |
|             |      |       |    | estimate of the SD of the        |
|             |      |       |    | Bayesian Augmented Control       |
|             |      |       |    | (Hierarchical Prior)             |
|             |      |       |    | distribution of mean control     |
|             |      |       |    | responses.                       |
+-------------+------+-------+----+----------------------------------+
| BAAC Mean   | 1    | ✔     | ✔  | This is the posterior estimate   |
|             |      |       |    | of the mean of the Bayesian      |
|             |      |       |    | Augmented Active Comparator      |
|             |      |       |    | (Hierarchical Prior)             |
|             |      |       |    | distribution of mean active      |
|             |      |       |    | comparator responses.            |
+-------------+------+-------+----+----------------------------------+
| BAAC Mean   | 1    | ✔     | ✔  | This is the SD of the posterior  |
| SD          |      |       |    | estimate of the mean of the      |
|             |      |       |    | Bayesian Augmented Active        |
|             |      |       |    | Comparator (Hierarchical Prior)  |
|             |      |       |    | distribution of mean comparator  |
|             |      |       |    | responses.                       |
+-------------+------+-------+----+----------------------------------+
| BAAC Tau    | 1    | ✔     | ✔  | This is the posterior estimate   |
|             |      |       |    | of the SD of the Bayesian        |
|             |      |       |    | Augmented Active Comparator      |
|             |      |       |    | (Hierarchical Prior)             |
|             |      |       |    | distribution of mean active      |
|             |      |       |    | comparator responses.            |
+-------------+------+-------+----+----------------------------------+
| BAAC Tau SD | 1    | ✔     | ✔  | This is the SD of the posterior  |
|             |      |       |    | estimate of the SD of the        |
|             |      |       |    | Bayesian Augmented Active        |
|             |      |       |    | Comparator (Hierarchical Prior)  |
|             |      |       |    | distribution of mean active      |
|             |      |       |    | comparator responses.            |
+-------------+------+-------+----+----------------------------------+
| Duration    | 1    | ✔     | ✔  | The time in weeks to the         |
|             |      |       |    | analysis shown.                  |
+-------------+------+-------+----+----------------------------------+
| Arm Drop    | D    | ✔     | ✔  | For each treatment arm, the time |
| Time        |      |       |    | in weeks when it was decided to  |
| \<dose\>    |      |       |    | drop the arm.                    |
+-------------+------+-------+----+----------------------------------+
| LPFV        | 1    | ✔     | ✔  | The time in weeks to the last    |
|             |      |       |    | patient first visit.             |
+-------------+------+-------+----+----------------------------------+
| QOI Columns |      |       |    |                                  |
+-------------+------+-------+----+----------------------------------+

: Figure 7‑1: Explicitly Defined Dose Response -- Continuous

### QOI Columns

The QOI columns depend on the QOIs that have been defined for this
design. The columns are grouped in the following order:

Posterior Probabilities The posterior probability for each QOI for each
dose.

Predictive Probabilities The predictive probability for each QOI for
each dose.

P-Values The p-value for each QOI for each dose.

Target Probabilities The probability of being the target for each QOI
for each dose.

Decision QOIs The value of the decision QOI at the target.

Success

Futile A flag for each QOI decision criteria indicating if the decision
QOI was evaluated and compared to a threshold at the interim (weeks
file) or final analysis (simulation file). The flag value is -1 if the
decision QOI was not evaluated, 0 if it did not meet the threshold and 1
if it did.

Success / Futile Combined Flags indicating if the interim or final
analysis determined success or futility taking all the factors defined
for Success/Futility into account: 0 if the conditions were not met, 1
it the conditions were met. If success and futility conditions have been
defined that are not mutually exclusive and both sets of combined
conditions are met, FACTS will pick one of the outcomes as met but not
the other. In order to discourage defining Success and Futility rules
that can both be true FACTS does not guarantee which outcome will be
selected.

## Contents of Simulations_freq\_\<missing\>.csv, Weeks_freq\_\<missing\>.csv

These file contain the frequentist results after an interim analysis
(weeks file) or final analysis (simulations file), apart for the first
column, the columns are the same in the two types of file, and the same
across the different methods for treating missing data.

  -----------------------------------------------------------------------
  Column      Number of Description
  Title       columns
  ----------- --------- -------------------------------------------------
  \# Trial    1         The number of the simulation.
                        (simulations_freq\_\...csv only)

  #Weeks      1         The week of the interim (weeks_freq\_\...csv
                        only)

  Theta       D         Unadjusted estimate of response per treatment arm
  \<dose\>

  Theta SD    D         The SD of the estimate of response per treatment
  \<dose\>              arm

  Trt Effect  D         The relative size of the treatment effect
  \<dose\>              compared to control per arm (treatment effect for
                        control is always 0). The direction of the
                        comparison takes into account whether a response
                        represents a subject's condition improving or
                        worsening, so that a positive treatment effect
                        shows the response on the dose is better than on
                        control.

  t-Stat      D         The t-test statistic per treatment arm (for
  \<dose\>              control this is always 0)

  p-Value     D         The unadjusted t-test p-value per arm (for
  \<dose\>              control this is always 0)

  lower CI    D         The unadjusted lower bound of the alpha
  \<dose\>              confidence interval of the estimated treatment
                        effect per treatment arm (for control this is
                        always 0).

  upper CI    D         The unadjusted upper bound of the alpha
  \<dose\>              confidence interval of the estimated treatment
                        effect per treatment arm (for control this is
                        always 0).

  Min p-Value 1         The smallest of the t-test p-values

  p-Value     D         The Dunnett adjusted t-test p-value per arm (for
  Dunnett               control this is always 0).
  \<dose\>

  lower CI    D         The Dunnett adjusted lower bound of the alpha
  Dunnett               confidence interval of the estimated treatment
  \<dose\>              effect (for control this is always 0).

  upper CI    D         The Dunnett adjusted upper bound of the alpha
  Dunnett               confidence interval of the estimated treatment
  \<dose\>              effect (for control this is always 0).

  Min p-Value 1         The smallest of the Dunnett adjusted p-values.
  Dunnett

  p-Value     D         The Bonferroni adjusted t-test p-value per arm.
  Bonf
  \<dose\>

  lower-CI    D         The Bonferroni adjusted lower bound of the alpha
  Bonf                  confidence interval of the estimated treatment
  \<dose\>              effect (for control this is always 0).

  upper-CI    D         The Bonferroni adjusted upper bound of the alpha
  Bonf                  confidence interval of the estimated treatment
  \<dose\>              effect (for control this is always 0).

  Min p-Value 1         The smallest of the Bonferroni adjusted t-test
  Bonf                  value per arm.

  t-Stat      1         The t statistic from the trend test.
  trend

  p-Value     1         The p-value from the trend test.
  trend
  -----------------------------------------------------------------------

  : Figure 7‑2 Dose Response - Loading scenario means in an external
  file

## Contents of PatientsNNNNN.csv

  -------------------------------------------------------------------------
  Column Title Number of  Description
               columns
  ------------ ---------- -------------------------------------------------
  #Subject     1          The subject id number, starting at 1.

  Region       1          Which region the subject was recruited in

  Date         1          The date, in weeks from the start of the trial,
                          of the subject's baseline visit and
                          randomization.

  Dose         1          The index number (1, ...) of the treatment arm
                          the subject belongs to.

  LastVisit#              The index of the last visit for which the
                          subjects data was collected, if the subject did
                          not complete this could be because the subject
                          dropped-out, the subject's treatment arm was
                          dropped (and there was no follow-up) or the study
                          stopped early (and there was no follow-up).

  Baseline     1          Subject baseline if simulated

  Visit        V          Subjects response at each visit
  \<visit\>
  -------------------------------------------------------------------------

  : Figure 7‑3: Virtual Subject Longitudinal Responses -- Correlated
  Method

## Contents of MCMCNNNNN.csv

The MCMC file if requested for output by the user, contains all the MCMC
samples for the fitted parameters in the design. There is one row per
sample (including the burnin) and the samples from all the analyses in
the simulation are included. The first two columns are the analysis
index and the sample (within analysis) index. The remaining columns are
the parameters whose sample values are being reported, the number and
constituents of these columns are highly variable depending on design of
the statistical analysis.

  ------------------------------------------------------------------------
  Column      Number of  Description
  Title       columns
  ----------- ---------- -------------------------------------------------
  Analysis    1          The index of the analysis (interim) in the
                         simulation

  Sample      1          The index of the sample within the analysis

  Theta       D          The estimate of the mean response for each dose,
  \<dose\>               based on the dose response model fitted

  Sigma       1          The estimate of the SD of the endpoint

  Beta        1          If baseline is included in the simulated data and
                         using the "Baseline Adjusted Model", this is the
                         value of "Beta", the baseline coefficient.

  A \<1-8\> / P          If the dose response model estimates parameters
  Tau                    then the samples of these are listed next. The
                         number and name of the parameters will vary
                         depending on the model being fitted. Check the
                         Design \> Dose Response tab for a listing of the
                         parameters.

  Longmod     L \* P \*  If the analysis includes longitudinal modelling
  \<model\>   V          then the samples of the parameters of the
  \<param\>              longitudinal models are output. The number of
  \<visit\>              models depends on the number of different
                         longitudinal fits the user has specified (one
                         over all arms, one for control and one for all
                         treatment arms, model all arms separately, etc.),
                         the number of parameters the model has, and if
                         these are fitted per visit (which depends on the
                         model being fitted), then the number of visits.
  ------------------------------------------------------------------------

  : Figure 7‑4: Virtual Subject Longitudinal Responses - Hierarchical
  Method

[^1]: Screenshots from earlier versions of FACTS 6 are retained only
    where they are unchanged in FACTS 7.1

[^2]: The doses in the design become linked to many other parameters, if
    dose levels could be edited this could change the effective order of
    doses and keeping the other parameters settings associated with the
    right doses becomes problematic -- in different circumstances the
    user might want values to stay with the particular treatment arm or
    stay with the particular slot in the treatment arm ranking. Forcing
    doses to be deleted and re-entered if their dose level changes

[^3]: Elsewhere in FACTS Core however we still use the overly specific
    term "dose" when the user might be simulating any manner of
    different treatments. Unfortunately the term "dose" became so
    ubiquitous in the user interface, documentation and outputs that it
    will be a lot of work to remove it.

[^4]: This value is in weeks from FACTS 7.0 onwards, previous to that it
    was in days.

[^5]: This value is in weeks from FACTS 7.0 onwards, previous to that it
    was in days.
